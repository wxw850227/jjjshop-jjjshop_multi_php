import{a as e,E as a,f as t,l as i,m as s,n as o,v as r}from"./element-plus-78c440b2.js";import{H as l,k as p,l as d}from"./page-7f4bcbd8.js";import n from"./Preview-37869e4a.js";import{_ as m}from"./index-0e3e5afc.js";import{ae as c,ap as g,o as u,c as j,a as h,T as f,Y as y,$ as b,S as k,W as C,P as _,X as v}from"./@vue-76da2f05.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Setpages-33752048.js";import"./vue-router-590ae0e4.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./vue-ueditor-wrap-cd890801.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";import"./Search-b67c85f9.js";import"./Banner-21d407bd.js";import"./ImageSingle-75d65b1f.js";import"./Window-3071c194.js";import"./Video-43e3ceab.js";import"./Article-19ee02f0.js";import"./Special-af9de18a.js";import"./Notice-2feebe72.js";import"./NavBar-c2bcbfcf.js";import"./Product-a8eaa34f.js";import"./product-edd059db.js";import"./Coupon-63928d69.js";import"./Store-f3bdf43c.js";import"./Service-4226fb43.js";import"./RichText-db9e34d0.js";import"./Blank-1a52e072.js";import"./Guide-50936867.js";import"./Seckill-db747f0e.js";import"./assembleProduct-6da41ef5.js";import"./BargainProduct-eb577b27.js";import"./Live-a633f2d8.js";import"./Title-36b6bf13.js";import"./vuedraggable-13be42ee.js";import"./vue-407f4729.js";import"./sortablejs-9c07ead7.js";import"./Preview-86aa1569.js";const w={class:"d-b-s diy-preview"},z={class:"diy-phone"},D={class:"user flex-1"},S={class:"common-level-rail"},P={class:"product-content"},x={class:"table-wrap"},T={key:0,class:"red"},B={key:0},L={key:1},N={class:"pagination"};const q=m({components:{Model:n},data:()=>({loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,defaultData:{},diyData:{items:[]},form:{umeditor:{},curItem:{},selectedIndex:-1}}),created(){this.getTableList()},methods:{onEditer(){},handleCurrentChange(e){let a=this;a.curPage=e,a.loading=!0,a.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,a={};a.page=e.curPage,a.list_rows=e.pageSize,l(a).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.diyData=a.data.default.page_data,e.totalDataNumber=a.data.list.total})).catch((e=>{}))},deleteClick(t){let i=this;e.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{i.loading=!0,p({page_id:t}).then((e=>{1==e.code?(i.loading=!1,a({message:"恭喜你，删除成功",type:"success"}),i.getTableList()):i.loading=!1})).catch((e=>{i.loading=!1}))})).catch((()=>{}))},addClick(){this.$router.push("/page/page/addpage")},setHomeClick(t){let i=this;e.confirm("确定要将此页面设置为默认首页吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{i.loading=!0,d({page_id:t}).then((e=>{i.loading=!1,1==e.code?(a({message:"恭喜你，设置成功",type:"success"}),i.getTableList()):a.error("错了哦，这是一条错误消息")})).catch((e=>{i.loading=!1}))})).catch((()=>{}))},editClick(e){this.$router.push({path:"/page/page/editpage",query:{page_id:e}})}}},[["render",function(e,a,l,p,d,n){const m=c("Model"),q=t,I=i,E=s,H=o,$=g("auth"),A=r;return u(),j("div",w,[h("div",z,[d.loading?y("",!0):(u(),f(m,{key:0,ref:"model",form:d.form,defaultData:d.defaultData,diyData:d.diyData},null,8,["form","defaultData","diyData"]))]),h("div",D,[h("div",S,[b((u(),f(q,{size:"small",type:"primary",icon:"Plus",onClick:a[0]||(a[0]=e=>n.addClick())},{default:k((()=>[C("添加页面")])),_:1})),[[$,"/page/page/addpage"]])]),h("div",P,[h("div",x,[b((u(),f(E,{size:"small",data:d.tableData,border:"",style:{width:"100%"}},{default:k((()=>[_(I,{prop:"page_id",label:"页面ID",width:"80"}),_(I,{prop:"page_name",label:"页面名称"},{default:k((e=>[h("span",null,v(e.row.page_name),1),0!=e.row.is_default?(u(),j("span",T,"(默认)")):y("",!0)])),_:1}),_(I,{prop:"page_type",label:"页面类型"},{default:k((e=>[10==e.row.page_type?(u(),j("span",B,"商城首页")):y("",!0),20==e.row.page_type?(u(),j("span",L,"自定义页")):y("",!0)])),_:1}),_(I,{prop:"create_time",label:"添加时间"}),_(I,{prop:"update_time",label:"更新时间"}),_(I,{fixed:"right",label:"操作",width:"90"},{default:k((e=>[0==e.row.is_default?b((u(),f(q,{key:0,onClick:a=>n.setHomeClick(e.row.page_id),link:"",type:"primary",size:"small"},{default:k((()=>[C("设为默认")])),_:2},1032,["onClick"])),[[$,"/page/page/setPage"]]):y("",!0),b((u(),f(q,{onClick:a=>n.editClick(e.row.page_id),link:"",type:"primary",size:"small"},{default:k((()=>[C("编辑")])),_:2},1032,["onClick"])),[[$,"/page/page/editPage"]]),0==e.row.is_default?b((u(),f(q,{key:1,onClick:a=>n.deleteClick(e.row.page_id),link:"",type:"primary",size:"small"},{default:k((()=>[C("删除 ")])),_:2},1032,["onClick"])),[[$,"/page/page/deletePage"]]):y("",!0)])),_:1})])),_:1},8,["data"])),[[A,d.loading]])]),h("div",N,[_(H,{onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,background:"","current-page":d.curPage,"page-size":d.pageSize,layout:"total, prev, pager, next, jumper",total:d.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])])}]]);export{q as default};
