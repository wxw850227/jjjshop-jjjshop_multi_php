import{e,i as a,A as t,M as l,f as o,l as s,m as r,c as i,N as d,o as m,E as n}from"./element-plus-78c440b2.js";import{_ as p}from"./index-0e3e5afc.js";import{F as u,K as c,L as f,o as _,T as b,S as g,P as y,W as j,c as h,a as v,ae as w}from"./@vue-76da2f05.js";import{j as k,k as V}from"./product-edd059db.js";import x from"./Basic-ee53b540.js";import C from"./Spec-b81b2463.js";import S from"./Content-4cb84e6c.js";import B from"./Buyset-80fedc21.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-590ae0e4.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./vue-ueditor-wrap-cd890801.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";import"./Upload-4b5e65e6.js";import"./vuedraggable-13be42ee.js";import"./vue-407f4729.js";import"./sortablejs-9c07ead7.js";import"./Single-b86296cb.js";import"./Many-f8ea8c62.js";import"./UE-8f57cb64.js";const z=u({components:{},setup(){const e=c({show:!1,form:{}});return{...f(e),open:()=>{e.form={exam:[{name:"建设项目安全设施的施工应当由取得相应资质的施工单位进行，并与建设项目主体工程同时施工。 （）",img:"https://img2.baidu.com/it/u=3852445477,1258821849&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1682269200&t=b20b8a4126b5b36b6646d2a5729477a7",type:"判断题",score:3,difficulty:"一般"}]},e.show=!0}}},methods:{close(){this.show=!1}}}),U=v("div",{class:"cardHeader"},"基本信息",-1),J={key:0},D=v("div",{class:"cardHeader"},"选题设置",-1),F=v("span",{class:"mr-small"},"单选题(7) ",-1),L=v("span",{class:"mr-small"},"多选题(7) ",-1),q=v("span",{class:"mr-small"},"判断题(7) ",-1),E=["src"];const I=p(z,[["render",function(n,p,u,c,f,w){const k=e,V=a,x=t,C=l,S=o,B=s,z=r,I=i,H=d,N=m;return _(),b(N,{modelValue:n.show,"onUpdate:modelValue":p[4]||(p[4]=e=>n.show=e),title:"试卷详情",width:"800","before-close":n.close,class:"noBg"},{footer:g((()=>[y(S,{onClick:n.close},{default:g((()=>[j(" 取消 ")])),_:1},8,["onClick"])])),default:g((()=>[y(H,{height:"400px"},{default:g((()=>[y(I,{model:n.form,"label-width":"110px",rules:n.rules,ref:"formRef"},{default:g((()=>[y(C,{shadow:"never"},{header:g((()=>[U])),default:g((()=>[y(k,{label:"试卷分类",prop:"name"},{default:g((()=>[j(" 三级安全教育试卷>asdad ")])),_:1}),y(k,{label:"试卷名称",prop:"name"},{default:g((()=>[j(" 55555 ")])),_:1}),y(k,{label:"是否保密",prop:"name"},{default:g((()=>[y(x,{modelValue:n.form.type333,"onUpdate:modelValue":p[0]||(p[0]=e=>n.form.type333=e),disabled:""},{default:g((()=>[y(V,{label:1},{default:g((()=>[j("分值统计")])),_:1}),y(V,{label:2},{default:g((()=>[j("比例统计")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(k,{label:"难度系数",prop:"name"},{default:g((()=>[y(x,{modelValue:n.form.type333,"onUpdate:modelValue":p[1]||(p[1]=e=>n.form.type333=e),disabled:""},{default:g((()=>[y(V,{label:1},{default:g((()=>[j("1-及易")])),_:1}),y(V,{label:2},{default:g((()=>[j("2-较易")])),_:1}),y(V,{label:2},{default:g((()=>[j("3-一般")])),_:1}),y(V,{label:2},{default:g((()=>[j("4-较难")])),_:1}),y(V,{label:2},{default:g((()=>[j("5-极准")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(k,{label:"时长设置",prop:"name"},{default:g((()=>[j(" 60分钟,考生必须在设置的考试时间的时间内完成考试。 ")])),_:1}),y(k,{label:"评估方式",prop:"name"},{default:g((()=>[y(x,{modelValue:n.form.type333,"onUpdate:modelValue":p[2]||(p[2]=e=>n.form.type333=e),disabled:""},{default:g((()=>[y(V,{label:1},{default:g((()=>[j("分值统计")])),_:1}),y(V,{label:2},{default:g((()=>[j("比例统计")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(k,{label:"评估值",prop:"name"},{default:g((()=>[(_(),h("span",J,"60(%)比例，通过。按总分计算百分比统计评估结果。"))])),_:1}),y(k,{label:"试卷说明",prop:"name"},{default:g((()=>[j(" 暂无 ")])),_:1})])),_:1}),y(C,{shadow:"never",class:"mt-defaul"},{header:g((()=>[D])),default:g((()=>[y(k,{label:"试题筛选",prop:"fileId"},{default:g((()=>[y(x,{modelValue:n.form.type222,"onUpdate:modelValue":p[3]||(p[3]=e=>n.form.type222=e)},{default:g((()=>[y(V,{label:0},{default:g((()=>[j("不限")])),_:1}),y(V,{label:1},{default:g((()=>[j("单选题")])),_:1}),y(V,{label:2},{default:g((()=>[j("多选题")])),_:1}),y(V,{label:3},{default:g((()=>[j("判断题")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(S,{type:"danger",link:""},{default:g((()=>[j("总题数(43道)")])),_:1}),y(S,{type:"danger",link:"",class:"mr-small"},{default:g((()=>[j("总分数(213分) ")])),_:1}),F,L,q,y(z,{data:n.form.exam,border:"",style:{"margin-top":"6px"}},{default:g((()=>[y(B,{prop:"name",label:"试题名称",width:"400"}),y(B,{prop:"img",label:"题目图片"},{default:g((({row:e})=>[v("img",{src:e.img,class:"tableImg"},null,8,E)])),_:1}),y(B,{prop:"type",label:"试题类型"}),y(B,{prop:"score",label:"分值"}),y(B,{prop:"difficulty",label:"难度"})])),_:1},8,["data"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","before-close"])}]]),H={class:"product-add"},N={class:"common-button-wrapper"};const O=p({components:{Basic:x,Spec:C,Content:S,Buyset:B},data:()=>({loading:!1,form:{model:{product_name:"",category_id:null,image:[],selling_point:"",spec_type:10,deduct_stock_type:20,is_alone_grade:0,sku:{},spec_many:{spec_attr:[],spec_list:[]},content:"",delivery_id:"",product_status:10,sales_initial:0,product_sort:100,is_points_gift:1,is_points_discount:1,max_points_discount:0,is_enable_grade:1,alone_grade_type:10,grade_ids:[],is_ind_agent:0,agent_money_type:10,first_money:0,second_money:0,third_money:0,is_virtual:0,limit_num:0,virtual_auto:0,virtual_content:"",is_preview:0,preview_time:""},catgory:[],delivery:[],gradeList:[],specData:null,isSpecLocked:!1}}),provide:function(){return{form:this.form}},created(){this.getBaseDataFunc()},methods:{getBaseDataFunc:function(){let e=this;k({}).then((a=>{e.loading=!1,Object.assign(e.form,a.data)})).catch((a=>{e.loading=!1}))},convertJson(e){let a={};return e.forEach((e=>{a[e.grade_id]=e.product_equity})),JSON.stringify(a)},onSubmit:function(){let e=this,a=e.form.model;e.$refs.form.validate((t=>{t?(e.loading=!0,a.alone_grade_equity=e.convertJson(e.form.gradeList),V({params:JSON.stringify(a)}).then((a=>{e.loading=!1,n({message:"添加成功",type:"success"}),e.$router.push("/product/product/index")})).catch((a=>{e.loading=!1}))):n({message:"请检查必填项是否填写完整",type:"error"})}))},Draft(){this.form.model.product_status=30,this.onSubmit()},cancelFunc(){this.$router.back(-1)}}},[["render",function(e,a,t,l,s,r){const d=I,m=w("Spec"),n=w("Content"),p=w("Buyset"),u=o,c=i;return _(),h("div",H,[y(c,{size:"small",ref:"form",model:s.form,"label-width":"180px"},{default:g((()=>[y(d),y(m),y(n),y(p),v("div",N,[y(u,{size:"small",type:"info",onClick:r.cancelFunc},{default:g((()=>[j("取消")])),_:1},8,["onClick"]),y(u,{size:"small",type:"primary",onClick:r.onSubmit,loading:s.loading},{default:g((()=>[j("发布")])),_:1},8,["onClick","loading"]),y(u,{size:"small",type:"primary",onClick:r.Draft,loading:s.loading},{default:g((()=>[j("保存为草稿")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])}],["__scopeId","data-v-c8b74604"]]);export{O as default};
