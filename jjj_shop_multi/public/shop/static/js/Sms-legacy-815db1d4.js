System.register(["./element-plus-legacy-662cb951.js","./message-legacy-383e2388.js","./index-legacy-7cb89a83.js","./@vue-legacy-3fcc10b7.js","./@vueuse-legacy-bdd63cbd.js","./lodash-es-legacy-7c31c52b.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-c5a98902.js","./call-bind-legacy-9803fab8.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-053c792c.js","./@popperjs-legacy-876caf52.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-b8d63bd7.js","./pinia-legacy-9b6e299c.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-40880ebd.js","./vue-ueditor-wrap-legacy-4eaef8ae.js","./qs-legacy-e8d8a27b.js","./side-channel-legacy-a0fabbd4.js","./object-inspect-legacy-50e036e0.js"],(function(e,l){"use strict";var n,t,a,i,s,o,d,u,c,r,g,f,m,_,p,h,y,j,v,b,w;return{setters:[function(e){n=e.E,t=e.d,a=e.e,i=e.l,s=e.m,o=e.c,d=e.f,u=e.o,c=e.v},function(e){r=e.f,g=e.s},function(e){f=e._},function(e){m=e.n,_=e.o,p=e.T,h=e.S,y=e.P,j=e.a,v=e.$,b=e.X,w=e.W},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l={data:function(){return{formLabelWidth:"120px",dialogVisible:!1,loading:!1,isupload:!1,fieldList:[],title:"设置短信模板",checkList:[],settings:{},template_id:""}},props:["open_sms","messageModel"],mounted:function(){this.$nextTick((function(){this.initChecked()})),this.dialogVisible=this.open_sms,this.title=this.title+"("+this.messageModel.message_name+")",this.getData()},methods:{getData:function(){var e=this;e.loading=!0,r({message_id:e.messageModel.message_id,message_type:"sms"}).then((function(l){l.data.list.forEach((function(e){e.field_new_ename=e.field_ename,e.filed_new_value=e.filed_value})),e.fieldList=l.data.list,null==l.data.settings||0==l.data.settings.length?(e.settings={},e.template_id=""):(e.settings=l.data.settings,e.template_id=l.data.settings.template_id),e.loading=!1,m((function(){e.initChecked()}))})).catch((function(e){}))},saveTemplate:function(){var e=this;e.loading=!0,g({fieldList:e.checkList,message_id:e.messageModel.message_id,message_type:"sms",template_id:e.template_id}).then((function(l){e.loading=!1,n({message:"保存成功",type:"success"}),e.dialogFormVisible(!0)})).catch((function(l){e.loading=!1}))},dialogFormVisible:function(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})},handleSelectionChange:function(e){this.checkList=e},initChecked:function(){var e=this;"{}"!=JSON.stringify(e.settings)&&Object.keys(e.settings.var_data).forEach((function(l){e.fieldList.forEach((function(n){n.field_ename==l&&(e.$refs.fieldTable.toggleRowSelection(n,!0),n.field_new_ename=e.settings.var_data[l].field_name,n.filed_new_value=e.settings.var_data[l].filed_value)}))}))}}},V={class:"table-wrap"},C=j("div",{class:"operation-wrap"},[j("p",null,"配置说明："),j("p",null,"1、短信模板里有的字段才勾选，如果没有请勿勾选。"),j("p",null,"2、模板变量替换成短信模板里的字段。")],-1),k=["textContent"],x={slot:"footer",class:"dialog-footer"};e("default",f(l,[["render",function(e,l,n,r,g,f){var m=t,L=a,S=i,D=s,T=o,U=d,z=u,$=c;return _(),p(z,{title:g.title,modelValue:g.dialogVisible,"onUpdate:modelValue":[l[1]||(l[1]=function(e){return g.dialogVisible=e}),l[2]||(l[2]=function(e){return g.dialogVisible=e})],onClose:f.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{default:h((function(){return[y(T,{size:"small"},{default:h((function(){return[j("div",V,[C,j("div",null,[y(L,{label:"模板id："},{default:h((function(){return[y(m,{size:"small",class:"max-w460",modelValue:g.template_id,"onUpdate:modelValue":l[0]||(l[0]=function(e){return g.template_id=e}),placeholder:"请填写申请的短信模板code"},null,8,["modelValue"])]})),_:1})]),v((_(),p(D,{border:"",ref:"fieldTable",data:g.fieldList,onSelectionChange:f.handleSelectionChange,"max-height":"400"},{default:h((function(){return[y(S,{type:"selection",width:"55"}),y(S,{label:"字段名称"},{default:h((function(e){return[j("label",{textContent:b(e.row.field_name)},null,8,k)]})),_:1}),y(S,{label:"模板变量名"},{default:h((function(e){return[y(m,{size:"small",prop:"field_new_ename",modelValue:e.row.field_new_ename,"onUpdate:modelValue":function(l){return e.row.field_new_ename=l}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),y(S,{label:"模板内容"},{default:h((function(e){return[y(m,{size:"small",prop:"filed_new_value",disabled:1===e.row.is_var,modelValue:e.row.filed_new_value,"onUpdate:modelValue":function(l){return e.row.filed_new_value=l}},null,8,["disabled","modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data","onSelectionChange"])),[[$,g.loading]])])]})),_:1}),j("div",x,[y(U,{onClick:f.dialogFormVisible},{default:h((function(){return[w("取 消")]})),_:1},8,["onClick"]),y(U,{type:"primary",onClick:f.saveTemplate,loading:g.loading},{default:h((function(){return[w("确 定")]})),_:1},8,["onClick","loading"])])]})),_:1},8,["title","modelValue","onClose"])}]]))}}}));
