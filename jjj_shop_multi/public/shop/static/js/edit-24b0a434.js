import{_ as e}from"./GetUser-52b22456.js";import{_ as l}from"./Upload-b330ad48.js";import{E as s,d as a,e as o,f as r,g as i,q as p,r as u,i as t,A as d,c as m}from"./element-plus-78c440b2.js";import{n,o as _}from"./supplier-e8e4f017.js";import{_ as f,f as c}from"./index-73113c1c.js";import{o as h,c as b,P as g,S as y,W as j,a as V,Y as w,Q as U,a9 as k,T as v,bb as x,b9 as q}from"./@vue-76da2f05.js";import"./data-6cf4a9eb.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-590ae0e4.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./vue-ueditor-wrap-cd890801.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";const C={components:{Upload:l,GetUser:e},data:()=>({form:{shop_supplier_id:0,supplier:{user_name:"",logo_id:0,business_id:0,open_service:0,name:"",link_name:"",link_phone:"",address:"",description:"",category_id:"",user_id:0,store_type:10,is_recycle:0}},logo_file_path:"",business_file_path:"",open_add:!1,storeList:[],category:[],isupload:!1,loading:!1,type:"logo",open_user:!1,user_info:{}}),created(){this.form.shop_supplier_id=this.$route.query.shop_supplier_id,this.getData()},methods:{getData(){let e=this;n({shop_supplier_id:e.form.shop_supplier_id}).then((l=>{e.form.supplier=c(e.form.supplier,l.data.model),l.data.model.logo&&(e.logo_file_path=l.data.model.logo.file_path),e.category=l.data.category,l.data.model.business&&(e.business_file_path=l.data.model.business.file_path),l.data.model.superUser&&(e.form.supplier.user_id=l.data.model.superUser.user_id,e.form.supplier.user_name=l.data.model.superUser.user_name,e.user_info.avatarUrl=l.data.model.superUser.user.avatarUrl)})).catch((e=>{}))},onSubmit(){let e=this,l=e.form;e.$refs.form.validate((a=>{a&&(e.loading=!0,_(l).then((l=>{e.loading=!1,1==l.code?(s({message:"恭喜你，商户修改成功",type:"success"}),e.$router.push("/supplier/supplier/index")):e.loading=!1})).catch((l=>{e.loading=!1})))}))},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&("logo"==this.type?(this.logo_file_path=e[0].file_path,this.form.supplier.logo_id=e[0].file_id):"business"==this.type&&(this.business_file_path=e[0].file_path,this.form.supplier.business_id=e[0].file_id)),this.isupload=!1},cancelFunc(){this.$router.back(-1)},userClick(){this.open_user=!0},closeDialogFunc(e){e&&"error"!=e.type&&(this.user_info=e.params[0],this.form.supplier.user_id=e.params[0].user_id),this.open_user=!1}}},F={class:"product-add"},I=(e=>(x("data-v-b45dbfb0"),e=e(),q(),e))((()=>V("div",{class:"common-form"},"添加商户",-1))),z={key:0,class:"img"},D=["src"],P={key:0,class:"img"},$=["src"],L={key:0,class:"img"},S=["src"],W={class:"common-button-wrapper"};const G=f(C,[["render",function(s,n,_,f,c,x){const q=a,C=o,G=r,R=i,A=p,E=u,Q=t,T=d,Y=m,B=l,H=e;return h(),b("div",F,[g(Y,{size:"small",ref:"form",model:c.form,"label-width":"200px"},{default:y((()=>[I,g(C,{label:"商户名称",prop:"supplier.name",rules:[{required:!0,message:" "}]},{default:y((()=>[g(q,{class:"max-w460",modelValue:c.form.supplier.name,"onUpdate:modelValue":n[0]||(n[0]=e=>c.form.supplier.name=e),placeholder:"请输入商户名称"},null,8,["modelValue"])])),_:1}),g(C,{label:"账号",prop:"supplier.user_name",rules:[{required:!0,message:" "}]},{default:y((()=>[g(q,{class:"max-w460",modelValue:c.form.supplier.user_name,"onUpdate:modelValue":n[1]||(n[1]=e=>c.form.supplier.user_name=e),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),g(C,{label:"登录密码",prop:"supplier.password"},{default:y((()=>[g(q,{modelValue:c.form.supplier.password,"onUpdate:modelValue":n[2]||(n[2]=e=>c.form.supplier.password=e),placeholder:"请输入登录密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(C,{label:"确认密码",prop:"supplier.confirm_password"},{default:y((()=>[g(q,{modelValue:c.form.supplier.confirm_password,"onUpdate:modelValue":n[3]||(n[3]=e=>c.form.supplier.confirm_password=e),placeholder:"请输入确认密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(C,{label:"联系人",prop:"supplier.link_name",rules:[{required:!0,message:" "}]},{default:y((()=>[g(q,{class:"max-w460",modelValue:c.form.supplier.link_name,"onUpdate:modelValue":n[4]||(n[4]=e=>c.form.supplier.link_name=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),g(C,{label:"联系电话",prop:"supplier.link_phone",rules:[{required:!0,message:" "}]},{default:y((()=>[g(q,{class:"max-w460",modelValue:c.form.supplier.link_phone,"onUpdate:modelValue":n[5]||(n[5]=e=>c.form.supplier.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),g(C,{label:"门店logo",rules:[{required:!0,message:" "}]},{default:y((()=>[g(R,null,{default:y((()=>[g(G,{icon:"Picture",onClick:n[6]||(n[6]=e=>x.openUpload("logo"))},{default:y((()=>[j("选择图片")])),_:1}),""!=c.form.supplier.logo_id?(h(),b("div",z,[V("img",{src:c.logo_file_path,width:"100",height:"100"},null,8,D)])):w("",!0)])),_:1})])),_:1}),g(C,{label:"主营类别"},{default:y((()=>[g(E,{modelValue:c.form.supplier.category_id,"onUpdate:modelValue":n[7]||(n[7]=e=>c.form.supplier.category_id=e),placeholder:"请选择"},{default:y((()=>[(h(!0),b(U,null,k(c.category,((e,l)=>(h(),v(A,{key:l,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(C,{label:"商户类型","label-width":s.formLabelWidth},{default:y((()=>[g(T,{modelValue:c.form.supplier.store_type,"onUpdate:modelValue":n[8]||(n[8]=e=>c.form.supplier.store_type=e)},{default:y((()=>[g(Q,{label:10},{default:y((()=>[j("普通")])),_:1}),g(Q,{label:20},{default:y((()=>[j("自营")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),g(C,{label:"商户状态","label-width":s.formLabelWidth},{default:y((()=>[g(T,{modelValue:c.form.supplier.is_recycle,"onUpdate:modelValue":n[9]||(n[9]=e=>c.form.supplier.is_recycle=e)},{default:y((()=>[g(Q,{label:0},{default:y((()=>[j("开启")])),_:1}),g(Q,{label:1},{default:y((()=>[j("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),g(C,{label:"地址",prop:"supplier.address",rules:[{required:!0,message:" "}]},{default:y((()=>[g(q,{class:"max-w460",modelValue:c.form.supplier.address,"onUpdate:modelValue":n[10]||(n[10]=e=>c.form.supplier.address=e),placeholder:"请输入地址"},null,8,["modelValue"])])),_:1}),g(C,{label:"营业执照"},{default:y((()=>[g(R,null,{default:y((()=>[g(G,{icon:"Picture",onClick:n[11]||(n[11]=e=>x.openUpload("business"))},{default:y((()=>[j("选择图片")])),_:1}),""!=c.form.supplier.business_id?(h(),b("div",P,[V("img",{src:c.business_file_path,width:"100",height:"100"},null,8,$)])):w("",!0)])),_:1})])),_:1}),g(C,{label:"绑定用户"},{default:y((()=>[g(R,null,{default:y((()=>[g(G,{icon:"Picture",onClick:n[12]||(n[12]=e=>x.userClick())},{default:y((()=>[j("选择用户")])),_:1}),0!=c.form.supplier.user_id?(h(),b("div",L,[V("img",{src:c.user_info.avatarUrl,width:"100",height:"100"},null,8,S)])):w("",!0)])),_:1})])),_:1}),g(C,{label:"商家介绍",prop:"supplier.description"},{default:y((()=>[g(q,{type:"textarea",modelValue:c.form.supplier.description,"onUpdate:modelValue":n[13]||(n[13]=e=>c.form.supplier.description=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),V("div",W,[g(G,{size:"small",type:"info",onClick:x.cancelFunc},{default:y((()=>[j("取消")])),_:1},8,["onClick"]),g(G,{size:"small",type:"primary",onClick:x.onSubmit,loading:c.loading},{default:y((()=>[j("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),c.isupload?(h(),v(B,{key:0,isupload:c.isupload,type:c.type,onReturnImgs:x.returnImgsFunc},{default:y((()=>[j("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):w("",!0),g(H,{is_open:c.open_user,onClose:n[14]||(n[14]=e=>x.closeDialogFunc(e,"add"))},null,8,["is_open"])])}],["__scopeId","data-v-b45dbfb0"]]);export{G as default};
