import{_ as e}from"./GetUser-33f80844.js";import{_ as l}from"./Upload-4b5e65e6.js";import{E as s,d as a,e as o,f as r,g as i,q as p,r as t,i as u,A as d,c as m}from"./element-plus-78c440b2.js";import{t as n,j as c}from"./supplier-d6e925a3.js";import{_ as f}from"./index-0e3e5afc.js";import{o as _,c as h,P as g,S as b,W as y,a as j,Y as V,Q as w,a9 as k,T as v,bb as U,b9 as x}from"./@vue-76da2f05.js";import"./data-1001c4bf.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-590ae0e4.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./vue-ueditor-wrap-cd890801.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";const C={components:{Upload:l,GetUser:e},data:()=>({form:{supplier:{logo_id:0,business_id:0,open_service:0,category_id:"",user_id:0,store_type:10}},logo_file_path:"",business_file_path:"",open_add:!1,storeList:[],category:[],isupload:!1,loading:!1,type:"logo",open_user:!1,user_info:{}}),created(){this.getCategoryList()},methods:{getCategoryList(){let e=this;n({}).then((l=>{e.category=l.data.category,e.category.length>0&&(e.form.category_id=e.category[0].category_id)})).catch((e=>{}))},onSubmit(){let e=this,l=e.form;e.$refs.form.validate((a=>{a&&(e.loading=!0,c(l).then((l=>{e.loading=!1,1==l.code?(s({message:"恭喜你，商户添加成功",type:"success"}),e.$router.push("/supplier/supplier/index")):e.loading=!1})).catch((l=>{e.loading=!1})))}))},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&("logo"==this.type?(this.logo_file_path=e[0].file_path,this.form.supplier.logo_id=e[0].file_id):"business"==this.type&&(this.business_file_path=e[0].file_path,this.form.supplier.business_id=e[0].file_id)),this.isupload=!1},cancelFunc(){this.$router.back(-1)},userClick(){this.open_user=!0},closeDialogFunc(e){e&&"error"!=e.type&&(this.user_info=e.params[0],this.form.supplier.user_id=e.params[0].user_id),this.open_user=!1}}},q={class:"product-add"},F=(e=>(U("data-v-67dbb57f"),e=e(),x(),e))((()=>j("div",{class:"common-form"},"添加商户",-1))),I={key:0,class:"img"},z=["src"],L={key:0,class:"img"},P=["src"],S={key:0,class:"img"},$=["src"],D={class:"common-button-wrapper"};const G=f(C,[["render",function(s,n,c,f,U,x){const C=a,G=o,R=r,W=i,A=p,E=t,Q=u,T=d,Y=m,B=l,H=e;return _(),h("div",q,[g(Y,{size:"small",ref:"form",model:U.form,"label-width":"200px"},{default:b((()=>[F,g(G,{label:"商户名称",prop:"supplier.name",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{class:"max-w460",modelValue:U.form.supplier.name,"onUpdate:modelValue":n[0]||(n[0]=e=>U.form.supplier.name=e),placeholder:"请输入商户名称"},null,8,["modelValue"])])),_:1}),g(G,{label:"账号",prop:"supplier.user_name",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{class:"max-w460",modelValue:U.form.supplier.user_name,"onUpdate:modelValue":n[1]||(n[1]=e=>U.form.supplier.user_name=e),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),g(G,{label:"登录密码",prop:"supplier.password",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{modelValue:U.form.supplier.password,"onUpdate:modelValue":n[2]||(n[2]=e=>U.form.supplier.password=e),placeholder:"请输入登录密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(G,{label:"确认密码",prop:"supplier.confirm_password",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{modelValue:U.form.supplier.confirm_password,"onUpdate:modelValue":n[3]||(n[3]=e=>U.form.supplier.confirm_password=e),placeholder:"请输入确认密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(G,{label:"联系人",prop:"supplier.link_name",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{class:"max-w460",modelValue:U.form.supplier.link_name,"onUpdate:modelValue":n[4]||(n[4]=e=>U.form.supplier.link_name=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),g(G,{label:"联系电话",prop:"supplier.link_phone",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{class:"max-w460",modelValue:U.form.supplier.link_phone,"onUpdate:modelValue":n[5]||(n[5]=e=>U.form.supplier.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),g(G,{label:"门店logo"},{default:b((()=>[g(W,null,{default:b((()=>[g(R,{icon:"Picture",onClick:n[6]||(n[6]=e=>x.openUpload("logo"))},{default:b((()=>[y("选择图片")])),_:1}),""!=U.form.supplier.logo_id?(_(),h("div",I,[j("img",{src:U.logo_file_path,width:"100",height:"100"},null,8,z)])):V("",!0)])),_:1})])),_:1}),g(G,{label:"主营类别",prop:"supplier.category_id",rules:[{required:!0,message:" "}]},{default:b((()=>[g(E,{modelValue:U.form.supplier.category_id,"onUpdate:modelValue":n[7]||(n[7]=e=>U.form.supplier.category_id=e),placeholder:"请选择"},{default:b((()=>[(_(!0),h(w,null,k(U.category,((e,l)=>(_(),v(A,{key:l,label:e.name,value:e.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(G,{label:"商户类型","label-width":s.formLabelWidth},{default:b((()=>[g(T,{modelValue:U.form.supplier.store_type,"onUpdate:modelValue":n[8]||(n[8]=e=>U.form.supplier.store_type=e)},{default:b((()=>[g(Q,{label:10},{default:b((()=>[y("普通")])),_:1}),g(Q,{label:20},{default:b((()=>[y("自营")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),g(G,{label:"地址",prop:"supplier.address",rules:[{required:!0,message:" "}]},{default:b((()=>[g(C,{class:"max-w460",modelValue:U.form.supplier.address,"onUpdate:modelValue":n[9]||(n[9]=e=>U.form.supplier.address=e),placeholder:"请输入地址"},null,8,["modelValue"])])),_:1}),g(G,{label:"营业执照"},{default:b((()=>[g(W,null,{default:b((()=>[g(R,{icon:"Picture",onClick:n[10]||(n[10]=e=>x.openUpload("business"))},{default:b((()=>[y("选择图片")])),_:1}),""!=U.form.supplier.business_id?(_(),h("div",L,[j("img",{src:U.business_file_path,width:"100",height:"100"},null,8,P)])):V("",!0)])),_:1})])),_:1}),g(G,{label:"绑定用户"},{default:b((()=>[g(W,null,{default:b((()=>[g(R,{icon:"Picture",onClick:n[11]||(n[11]=e=>x.userClick())},{default:b((()=>[y("选择用户")])),_:1}),0!=U.form.supplier.user_id?(_(),h("div",S,[j("img",{src:U.user_info.avatarUrl,width:"100",height:"100"},null,8,$)])):V("",!0)])),_:1})])),_:1}),g(G,{label:"商家介绍",prop:"supplier.description"},{default:b((()=>[g(C,{type:"textarea",modelValue:U.form.supplier.description,"onUpdate:modelValue":n[12]||(n[12]=e=>U.form.supplier.description=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),j("div",D,[g(R,{size:"small",type:"info",onClick:x.cancelFunc},{default:b((()=>[y("取消")])),_:1},8,["onClick"]),g(R,{size:"small",type:"primary",onClick:x.onSubmit,loading:U.loading},{default:b((()=>[y("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),U.isupload?(_(),v(B,{key:0,isupload:U.isupload,type:U.type,onReturnImgs:x.returnImgsFunc},{default:b((()=>[y("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):V("",!0),g(H,{is_open:U.open_user,onClose:n[13]||(n[13]=e=>x.closeDialogFunc(e,"add"))},null,8,["is_open"])])}],["__scopeId","data-v-67dbb57f"]]);export{G as default};
