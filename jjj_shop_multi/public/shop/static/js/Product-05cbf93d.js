import{e,f as a,d as l,c as t,l as i,m as o,n as s,o as n,v as d}from"./element-plus-78c440b2.js";import{a as r}from"./product-b0159307.js";import{_ as c}from"./index-73113c1c.js";import{o as u,T as p,S as h,a as m,P as g,W as C,Y as f,$ as b}from"./@vue-76da2f05.js";const _={class:"common-seach-wrap"},S={class:"product-content"},y={class:"table-wrap"},k=["src"],z={class:"pagination"},w={class:"dialog-footer"};const V=c({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},cateList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isproduct","excludeIds","islist"],watch:{isproduct:function(e,a){e!=a&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,a=e.formInline;a.page=e.curPage,a.list_rows=e.pageSize,r(a).then((a=>{1==a.code&&(e.loading=!1,e.cateList=a.data.category,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?a.data.list.data.forEach((a=>{e.excludeIds.indexOf(a.product_id)>-1?a.noChoose=!1:a.noChoose=!0})):e.islist||a.data.list.data.forEach((e=>{e.noChoose=!0})),e.productList=a.data.list.data,e.totalDataNumber=a.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let e=this,a=null;e.multipleSelection.length<1?e.$message({message:"请至少选择一件产品商品！",type:"error"}):(e.islist&&void 0!==e.islist?(e.multipleSelection.forEach((e=>{e.image=e.image[0].file_path})),a=e.multipleSelection):(a=e.multipleSelection[0],a.image=a.image[0].file_path),e.params=a,e.type="success",e.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(r,c,V,x,v,D){const I=e,F=a,L=l,P=t,j=i,E=o,N=s,$=n,U=d;return u(),p($,{title:"选择商品",modelValue:v.dialogVisible,"onUpdate:modelValue":c[2]||(c[2]=e=>v.dialogVisible=e),onClose:D.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:h((()=>[m("div",w,[g(F,{size:"small",onClick:c[1]||(c[1]=e=>v.dialogVisible=!1)},{default:h((()=>[C("取 消")])),_:1}),V.islist?(u(),p(F,{key:0,size:"small",type:"primary",onClick:D.addClerk},{default:h((()=>[C("确 定")])),_:1},8,["onClick"])):f("",!0)])])),default:h((()=>[m("div",_,[g(P,{inline:!0,size:"small",model:v.formInline,class:"demo-form-inline"},{default:h((()=>[g(I,{label:"商品分类"}),g(I,{label:"商品名称"},{default:h((()=>[g(L,{placeholder:"请输入商品名称",modelValue:v.formInline.search,"onUpdate:modelValue":c[0]||(c[0]=e=>v.formInline.search=e)},{append:h((()=>[g(F,{icon:"el-icon-search",onClick:D.getData},{default:h((()=>[C("查询")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])]),m("div",S,[m("div",y,[b((u(),p(E,{size:"small",data:v.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:D.tableCurrentChange},{default:h((()=>[g(j,{width:"70",label:"商品图片"},{default:h((({row:e})=>[m("img",{src:e.image&&e.image[0].file_path,width:"30",height:"30"},null,8,k)])),_:1}),g(j,{prop:"product_name",label:"商品名称"}),g(j,{prop:"category.name",width:"100",label:"商品分类"}),g(j,{prop:"create_time",width:"140",label:"添加时间"}),V.islist?(u(),p(j,{key:0,type:"selection",selectable:D.selectableFunc,width:"44"},null,8,["selectable"])):f("",!0),V.islist?f("",!0):(u(),p(j,{key:1,width:"80",label:"单选"},{default:h((({row:e})=>[e.noChoose?(u(),p(F,{key:0,size:"mini",onClick:a=>D.SingleFunc(e)},{default:h((()=>[C("选择")])),_:2},1032,["onClick"])):(u(),p(F,{key:1,size:"mini",disabled:""},{default:h((()=>[C("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[U,v.loading]])]),m("div",z,[g(N,{onSizeChange:D.handleSizeChange,onCurrentChange:D.handleCurrentChange,background:"","current-page":v.curPage,"page-sizes":[2,10,20,50,100],"page-size":v.pageSize,layout:"total, prev, pager, next, jumper",total:v.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{V as _};
