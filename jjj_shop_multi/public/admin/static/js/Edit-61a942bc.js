import{f as e,c as a,d as l,p as t,q as o,r as s,b as i,e as r,s as d}from"./element-plus-a75e5680.js";import{g as m}from"./access-c7fcb5a4.js";import{_ as u,d as n}from"./index-07143257.js";import{o as p,S as f,R as h,O as b,V as c,X as _,a as V}from"./@vue-5c89b57d.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-85afefd9.js";import"./dayjs-4d201c0d.js";import"./@element-plus-ef0dbc7a.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./request-8f5d2679.js";import"./axios-85bcd05e.js";import"./vue-router-2af8da50.js";import"./pinia-3964e703.js";import"./vue-demi-71ba0ef2.js";const g={data:()=>({loading:!1,formData:{name:"",path:"",views:"",alias:"",icon:"",is_menu:1,is_route:1,is_show:0,sort:1,parent_id:0},formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],views:[{required:!0,message:"请输入组件名称",trigger:"blur"}],alias:[{required:!0,message:"请输入别名",trigger:"blur"}]},parentsVal:[],accessList:[],srot:"1",formLabelWidth:"120px",dialogVisible:!1,propsParam:{label:"name",value:"access_id",checkStrictly:!0}}),props:{open_edit:Boolean,add_type:String,rawData:Array,selectModel:Object},created(){this.dialogVisible=this.open_edit,this.accessList=n(this.rawData),this.accessList.unshift({name:"顶级菜单",access_id:0}),this.formData=n(this.selectModel),this.findParentsID(this.accessList)},methods:{handleChange(e){},findParentsID(e){let a=!1;for(let l=0;l<e.length;l++){let t=e[l];if(t.access_id==this.formData.parent_id){this.parentsVal.unshift(t.access_id),a=!0;break}{let e=t.children;if(void 0!==e&&e.length>0&&this.findParentsID(e)){this.parentsVal.unshift(t.access_id),a=!0;break}}}return a},onSubmit(){let a=this,l=a.formData;a.parentsVal.length>0&&(l.parent_id=a.parentsVal[a.parentsVal.length-1]),a.$refs.form.validate((t=>{t&&(a.loading=!0,m(l).then((t=>{1==t.code&&(e({message:t.msg,type:"success"}),a.$emit("closeDialog",{type:"success",openDialog:!1,data:l}),a.loading=!1)})).catch((e=>{a.loading=!1})))}))},dialogFormVisible(e){this.$emit("closeDialog",{type:"error",openDialog:!1})}}},D=V("p",null,"提示：对应前端给的文件路径，例如：index/index",-1),w=V("p",null,"提示：请选择系统提供的图标",-1);const j=u(g,[["render",function(e,m,u,n,V,g){const j=a,L=l,y=t,k=o,U=s,W=i,v=r,C=d;return p(),f(C,{title:"修改菜单&权限",modelValue:V.dialogVisible,"onUpdate:modelValue":m[11]||(m[11]=e=>V.dialogVisible=e),onClose:g.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:h((()=>[b(v,{onClick:g.dialogFormVisible},{default:h((()=>[c("取 消")])),_:1},8,["onClick"]),b(v,{type:"primary",onClick:m[10]||(m[10]=e=>g.onSubmit()),disabled:V.loading},{default:h((()=>[c("确 定")])),_:1},8,["disabled"])])),default:h((()=>[b(W,{size:"small",model:V.formData,rules:V.formRules,ref:"form"},{default:h((()=>[b(L,{label:"菜单名称",prop:"name","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.name,"onUpdate:modelValue":m[0]||(m[0]=e=>V.formData.name=e),autocomplete:"off",placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1},8,["label-width"]),b(L,{label:"类型",prop:"name","label-width":V.formLabelWidth},{default:h((()=>[b(k,{modelValue:V.formData.is_route,"onUpdate:modelValue":m[1]||(m[1]=e=>V.formData.is_route=e)},{default:h((()=>[b(y,{label:1},{default:h((()=>[c("页面")])),_:1}),b(y,{label:0},{default:h((()=>[c("按钮")])),_:1}),b(y,{label:2},{default:h((()=>[c("独立单页面")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),b(L,{label:"上级菜单",prop:"parent_id","label-width":V.formLabelWidth},{default:h((()=>[b(U,{size:"small",modelValue:V.parentsVal,"onUpdate:modelValue":m[2]||(m[2]=e=>V.parentsVal=e),options:V.accessList,props:V.propsParam,onChange:g.handleChange},null,8,["modelValue","options","props","onChange"])])),_:1},8,["label-width"]),b(L,{label:"路径",prop:"path","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.path,"onUpdate:modelValue":m[3]||(m[3]=e=>V.formData.path=e),autocomplete:"off",placeholder:"请输入组件文件路径",disabled:"/plus"==V.formData.path},null,8,["modelValue","disabled"]),D])),_:1},8,["label-width"]),b(L,{label:"图标","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.icon,"onUpdate:modelValue":m[4]||(m[4]=e=>V.formData.icon=e),autocomplete:"off",placeholder:"请输入icon"},null,8,["modelValue"]),w])),_:1},8,["label-width"]),1==V.formData.is_route?(p(),f(L,{key:0,label:"是否是菜单","label-width":V.formLabelWidth},{default:h((()=>[b(k,{modelValue:V.formData.is_menu,"onUpdate:modelValue":m[5]||(m[5]=e=>V.formData.is_menu=e)},{default:h((()=>[b(y,{label:1},{default:h((()=>[c("是")])),_:1}),b(y,{label:0},{default:h((()=>[c("否")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"])):_("",!0),b(L,{label:"是否显示","label-width":V.formLabelWidth},{default:h((()=>[b(k,{modelValue:V.formData.is_show,"onUpdate:modelValue":m[6]||(m[6]=e=>V.formData.is_show=e)},{default:h((()=>[b(y,{label:1},{default:h((()=>[c("是")])),_:1}),b(y,{label:0},{default:h((()=>[c("否")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),1==V.formData.is_route?(p(),f(L,{key:1,label:"重定向","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.redirect_name,"onUpdate:modelValue":m[7]||(m[7]=e=>V.formData.redirect_name=e),autocomplete:"off",placeholder:"请输入重定向地址"},null,8,["modelValue"])])),_:1},8,["label-width"])):_("",!0),b(L,{label:"备注",prop:"sort","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.remark,"onUpdate:modelValue":m[8]||(m[8]=e=>V.formData.remark=e),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"]),b(L,{label:"排序",prop:"sort","label-width":V.formLabelWidth},{default:h((()=>[b(j,{modelValue:V.formData.sort,"onUpdate:modelValue":m[9]||(m[9]=e=>V.formData.sort=e),placeholder:"请输入排序",type:"number"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClose"])}]]);export{j as default};
