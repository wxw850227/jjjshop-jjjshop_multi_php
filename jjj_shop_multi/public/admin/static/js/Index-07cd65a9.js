import{E as e,f as s,e as a,h as t,v as l,j as i}from"./element-plus-a75e5680.js";import{m as o,d}from"./message-6c518028.js";import p from"./Edit-76aa2043.js";import n from"./Add-18040816.js";import r from"./Field-5bd126c3.js";import{_ as m,d as c}from"./index-07143257.js";import{c as g,a as _,O as u,R as f,_ as h,S as k,X as j,ad as b,o as y,V as C}from"./@vue-5c89b57d.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-85afefd9.js";import"./dayjs-4d201c0d.js";import"./@element-plus-ef0dbc7a.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./request-8f5d2679.js";import"./axios-85bcd05e.js";import"./vue-router-2af8da50.js";import"./pinia-3964e703.js";import"./vue-demi-71ba0ef2.js";const v={class:"product"},D={class:"common-level-rail"},x={class:"product-content"},M={class:"table-wrap"};const w=m({components:{Edit:p,Add:n,Field:r},data:()=>({loading:!0,activeIndex:"0",formInline:{user:"",region:""},tableData:[],totalDataNumber:0,categoryList:[],open_add:!1,open_edit:!1,messageModel:{},open_field:!1}),created(){this.getTableList()},methods:{getTableList(){let e=this;o({}).then((s=>{e.loading=!1,e.tableData=s.data.list,e.totalDataNumber=s.data.list.total})).catch((s=>{e.loading=!1}))},addClick(){this.open_add=!0},editClick(e){this.messageModel=c(e),this.messageModel.message_to=this.messageModel.message_to.value,this.messageModel.message_type=this.messageModel.message_type.value,this.open_edit=!0},fieldClick(e){this.messageModel=e,this.open_field=!0},closeDialogFunc(e,s){"add"==s&&(this.open_add=e.openDialog,"success"==e.type&&this.getTableList()),"edit"==s&&(this.open_edit=e.openDialog,"success"==e.type&&this.getTableList()),"field"==s&&(this.open_field=e.openDialog,"success"==e.type&&this.getTableList())},deleteClick(a){let t=this;e.confirm("删除后不可恢复，确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{t.loading=!0,d({message_id:a.message_id}).then((e=>{t.loading=!1,s({message:e.msg,type:"success"}),t.getTableList()})).catch((e=>{t.loading=!1}))})).catch((()=>{}))}}},[["render",function(e,s,o,d,p,n){const r=a,m=i,c=t,w=b("Add"),T=b("Edit"),F=b("Field"),L=l;return y(),g("div",v,[_("div",D,[u(r,{type:"primary",onClick:n.addClick},{default:f((()=>[C("添加消息")])),_:1},8,["onClick"])]),_("div",x,[_("div",M,[h((y(),k(c,{size:"small",data:p.tableData,border:"","default-expand-all":"","tree-props":{children:"children"},"row-key":"plus_id"},{default:f((()=>[u(m,{prop:"message_name",label:"消息名称"}),u(m,{prop:"message_ename",label:"消息名称(英文)"}),u(m,{prop:"message_to.text",label:"通知对象"}),u(m,{prop:"message_type.text",label:"消息类型"}),u(m,{label:"字段"},{default:f((e=>[u(r,{onClick:s=>n.fieldClick(e.row),link:"",type:"primary",size:"small"},{default:f((()=>[C("字段管理")])),_:2},1032,["onClick"])])),_:1}),u(m,{prop:"remark",label:"消息描述"}),u(m,{prop:"sort",label:"排序"}),u(m,{prop:"create_time",label:"添加时间"}),u(m,{fixed:"right",label:"操作"},{default:f((e=>[u(r,{onClick:s=>n.editClick(e.row),link:"",type:"primary",size:"small"},{default:f((()=>[C("编辑")])),_:2},1032,["onClick"]),u(r,{onClick:s=>n.deleteClick(e.row),link:"",type:"primary",size:"small"},{default:f((()=>[C("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[L,p.loading]])])]),p.open_add?(y(),k(w,{key:0,open_add:p.open_add,onCloseDialog:s[0]||(s[0]=e=>n.closeDialogFunc(e,"add"))},null,8,["open_add"])):j("",!0),p.open_edit?(y(),k(T,{key:1,open_edit:p.open_edit,form:p.messageModel,onCloseDialog:s[1]||(s[1]=e=>n.closeDialogFunc(e,"edit"))},null,8,["open_edit","form"])):j("",!0),p.open_field?(y(),k(F,{key:2,open_field:p.open_field,form:p.messageModel,onCloseDialog:s[2]||(s[2]=e=>n.closeDialogFunc(e,"field"))},null,8,["open_field","form"])):j("",!0)])}]]);export{w as default};
