import{o as e,u as t,r as o}from"./index-88c54a2c.js";import{a as r}from"./axios-85bcd05e.js";import{f as s}from"./element-plus-a75e5680.js";let{contentType:n,requestTimeout:a,baseURL:c}=e;const i=r.create({baseURL:c,timeout:a,headers:{"Content-Type":n}});i.interceptors.request.use((e=>{if("get"===e.method&&e.data){let o=e.url+"?";for(const r of Object.keys(e.data)){const s=e.data[r];var t=encodeURIComponent(r)+"=";if(null!=s)if("object"==typeof s)for(const e of Object.keys(s)){o+=encodeURIComponent(r+"["+e+"]")+"="+encodeURIComponent(s[e])+"&"}else o+=t+encodeURIComponent(s)+"&"}o=o.slice(0,-1),e.data={},e.url=o}return e}),(e=>{Promise.reject(e)})),i.interceptors.request.use((e=>{const o=t(),{token:r}=o;e&&e.url;let s="";return r&&(s=r),e.data&&e.formData&&(e.headers={"Content-Type":"multipart/form-data"}),e.data.token=`${s}`,e.headers.token=`${s}`,e}),(e=>(s.error("接口请求异常，请稍后再试~"),Promise.reject(e)))),i.interceptors.response.use((e=>(async({config:e,data:r,status:n,statusText:a})=>{let c=r.code;if(-1==c){const e=t(),{afterLogout:r}=e;r(),o.push("/login")}else if(1==c)return r;const i=r&&r.msg?r.msg:a;return s.error(i),Promise.reject(r)})(e)),(e=>(s.error("接口请求异常，请稍后重试"),Promise.reject(e.response))));export{i};
