import{f as e,c as o,d as l,t as r,i as a,b as i,e as s,s as t}from"./element-plus-a75e5680.js";import{c as d}from"./shop-d2111b85.js";import{_ as p}from"./index-88c54a2c.js";import{o as m,S as n,R as u,O as f,V as c,a as h}from"./@vue-5c89b57d.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-85afefd9.js";import"./dayjs-4d201c0d.js";import"./@element-plus-ef0dbc7a.js";import"./@popperjs-b78c3215.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./request-5f88d5f5.js";import"./axios-85bcd05e.js";import"./vue-router-2af8da50.js";import"./pinia-3964e703.js";import"./vue-demi-71ba0ef2.js";const b={data(){return{form:{no_expire:!1,weixin_service:!1},formLabelWidth:"120px",dialogVisible:!1,loading:!1,rules:{app_name:[{validator:(e,o,l)=>o?this.$filter.isAllSpace(o)?l(new Error("不能全是空格")):void l():l(new Error("请输入商城名称")),required:!0,trigger:"blur"}],user_name:[{validator:(e,o,l)=>this.$filter.replaceSpace(o)?this.$filter.hasSpace(o)?l(new Error("不能包含空格")):void l():l(new Error("商家账户名")),required:!0,trigger:"blur"}],password:[{validator:(e,o,l)=>{if(o){if(this.$filter.hasSpace(o))return l(new Error("不能包含空格"));if(o.length<6)return l(new Error("长度不能小于6位"));l()}else l(new Error("请输入密码"))},required:!0,trigger:"change"}],expire_time:[{validator:(e,o,l)=>{this.form.no_expire||o?l():l(new Error("过期时间必填"))},required:!0,trigger:"change"}],password_confirm:[{validator:(e,o,l)=>{o?o!==this.form.password?l(new Error("确认密码不一致")):l():l(new Error("请填写确认密码"))},required:!0,trigger:"blur"}]}}},props:["open_add"],created(){this.dialogVisible=this.open_add},methods:{addClick(){let o=this,l=this.form;o.$refs.form.validate((r=>{r&&(o.loading=!0,d(l).then((l=>{o.loading=!1,1==l.code&&(e({message:"恭喜你，添加成功",type:"success"}),o.dialogFormVisible(!0))})).catch((e=>{o.loading=!1})))}))},dialogFormVisible(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},g=h("div",{style:{height:"0",overflow:"hidden"}},[h("input",{type:"password"})],-1),w=h("p",{class:"gray"},"注：商家后台用户名",-1),_=h("p",{class:"gray"},"注：商家后台用户密码",-1);const V=p(b,[["render",function(e,d,p,h,b,V){const j=o,v=l,x=r,y=a,E=i,k=s,C=t;return m(),n(C,{title:"新增小程序商城",modelValue:b.dialogVisible,"onUpdate:modelValue":d[7]||(d[7]=e=>b.dialogVisible=e),onClose:V.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:u((()=>[f(k,{onClick:V.dialogFormVisible},{default:u((()=>[c("取 消")])),_:1},8,["onClick"]),f(k,{type:"primary",onClick:d[6]||(d[6]=e=>V.addClick()),loading:b.loading},{default:u((()=>[c("确 定")])),_:1},8,["loading"])])),default:u((()=>[f(E,{size:"small",model:b.form,ref:"form",rules:b.rules},{default:u((()=>[g,f(v,{label:"商城名称","label-width":b.formLabelWidth,prop:"app_name"},{default:u((()=>[f(j,{modelValue:b.form.app_name,"onUpdate:modelValue":d[0]||(d[0]=e=>b.form.app_name=e),autocomplete:"off",placeholder:"请输入商城名称"},null,8,["modelValue"])])),_:1},8,["label-width"]),f(v,{label:"过期时间","label-width":b.formLabelWidth,prop:"expire_time"},{default:u((()=>[f(x,{modelValue:b.form.expire_time,"onUpdate:modelValue":d[1]||(d[1]=e=>b.form.expire_time=e),type:"date",placeholder:"过期时间","value-format":"YYYY-MM-DD",disabled:b.form.no_expire},null,8,["modelValue","disabled"]),f(y,{modelValue:b.form.no_expire,"onUpdate:modelValue":d[2]||(d[2]=e=>b.form.no_expire=e),class:"pl16"},{default:u((()=>[c("永不过期")])),_:1},8,["modelValue"])])),_:1},8,["label-width"]),f(v,{label:"商家账户名","label-width":b.formLabelWidth,prop:"user_name"},{default:u((()=>[f(j,{modelValue:b.form.user_name,"onUpdate:modelValue":d[3]||(d[3]=e=>b.form.user_name=e),autocomplete:"off",placeholder:"请输入商家账户名"},null,8,["modelValue"]),w])),_:1},8,["label-width"]),f(v,{label:"商家账户密码","label-width":b.formLabelWidth,prop:"password"},{default:u((()=>[f(j,{type:"password",modelValue:b.form.password,"onUpdate:modelValue":d[4]||(d[4]=e=>b.form.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"]),_])),_:1},8,["label-width"]),f(v,{label:"确认密码","label-width":b.formLabelWidth,prop:"password_confirm"},{default:u((()=>[f(j,{type:"password",modelValue:b.form.password_confirm,"onUpdate:modelValue":d[5]||(d[5]=e=>b.form.password_confirm=e),autocomplete:"off",placeholder:"请输入确认密码"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClose"])}]]);export{V as default};
