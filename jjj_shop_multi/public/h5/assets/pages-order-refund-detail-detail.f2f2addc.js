import{_ as e,z as a,B as s,o as d,c as l,w as t,n as r,f as u,a as _,h as i,d as f,e as c,t as o,g as n,r as p,F as g,k as m,i as y,a6 as h,I as x,j as b,a9 as k,a3 as v,P as w,a7 as C}from"./index-73db7405.js";const I=e({data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,expressList:{},index:-1,order_refund_id:0,detail:{address:{}},express_id:0,temlIds:[],source:"user",refuse_desc:"",refund_money:"",is_agree:10,address:[],addressIndex:0,address_id:""}),onLoad(e){this.order_refund_id=e.order_refund_id,this.source=e.source||"user"},mounted(){this.getData()},methods:{getData(){let e=this;e.loadding=!0,a({title:"加载中"});let d=e.order_refund_id;e._get("user.refund/detail",{order_refund_id:d,platform:e.getPlatform()},(function(a){e.loadding=!1,s(),e.address=a.data.address,e.detail=a.data.detail,e.expressList=a.data.expressList,e.temlIds=a.data.template_arr}))},onExpressChange:function(e){this.index=e.detail.value,this.express_id=this.expressList[this.index].express_id},onAddressChange:function(e){this.addressIndex=e.detail.value,this.address_id=this.address[this.addressIndex].address_id,console.log(this.address_id)},formSubmit:function(e){let d=this;var l=e.detail.value;l.order_refund_id=d.order_refund_id,l.express_id=d.express_id;d.subMessage(d.temlIds,(function(){a({title:"正在提交",mask:!0}),d._post("user.refund/delivery",l,(function(e){s(),_({title:e.msg,duration:3e3,complete:function(){d.gotoPage("/pages/order/refund/detail/detail?order_refund_id="+d.order_refund_id)}})}))}))},sendRefund(){let e=this;if(e.loadding)return;if(e.loadding=!0,e.refund_money>e.detail.orderproduct.total_pay_price)return void e.showError("退款金额超过最大值");if(10==e.is_agree&&""==e.address_id&&30!=e.detail.type.value)return void e.showError("请选择退货地址");let d=e.order_refund_id;a({title:"提交中..."}),e._post("user.refund/audit",{order_refund_id:d,is_agree:e.is_agree,refuse_desc:e.refuse_desc,order_refund_id:d,refund_money:e.refund_money,address_id:e.address_id},(function(a){e.loadding=!1,s(),e.getData(),e.showSuccess("操作成功")}),(function(a){e.loadding=!1}))},reReceipt(e){let d=this;if(!d.loadding){var l=e.detail.value;l.order_refund_id=d.order_refund_id,l.send_express_id=d.express_id,l.refund_money=0,d.loadding=!0,d.order_refund_id,a({title:"提交中..."}),d._post("user.refund/receipt",l,(function(e){d.loadding=!1,s(),d.getData(),d.showSuccess("操作成功")}),(function(e){d.loadding=!1}))}},sendReceipt(){let e=this;if(e.loadding)return;if(e.loadding=!0,e.refund_money>e.detail.orderproduct.total_pay_price)return void e.showError("退款金额超过最大值");let d=e.order_refund_id;a({title:"提交中..."}),e._post("user.refund/receipt",{order_refund_id:d,refund_money:e.refund_money},(function(a){e.loadding=!1,s(),e.getData(),e.showSuccess("操作成功")}),(function(a){e.loadding=!1}))},changeRadio(e){this.is_agree=e.detail.value}}},[["render",function(e,a,s,_,I,L){const S=m,V=i,R=y,D=h,E=x,P=b,F=k,U=v,j=w,A=C;return I.loadding?u("",!0):(d(),l(V,{key:0,class:r(["order-refund-detail pb100",e.theme()||""]),"data-theme":e.theme()},{default:t((()=>[f(V,{class:"order-state d-s-c"},{default:t((()=>[f(V,{class:"icon-box"},{default:t((()=>[f(S,{class:"icon iconfont icon-gantanhao"})])),_:1}),f(V,{class:"state-cont flex-1"},{default:t((()=>[f(V,{class:"state-txt d-b-c"},{default:t((()=>[f(S,{class:"desc f34"},{default:t((()=>[c(o(I.detail.state_text),1)])),_:1})])),_:1})])),_:1}),f(V,{class:"dot-bg"})])),_:1}),f(V,{class:"p30 mt20 bg-white"},{default:t((()=>[f(V,{class:"one-product border-b-e d-s-c pb20"},{default:t((()=>[f(V,{class:"cover"},{default:t((()=>[f(R,{src:I.detail.orderproduct.image.file_path,mode:"aspectFit"},null,8,["src"])])),_:1}),f(V,{class:"flex-1"},{default:t((()=>[f(V,{class:"pro-info"},{default:t((()=>[c(o(I.detail.orderproduct.product_name),1)])),_:1}),f(V,{class:"pt10 p-0-30"},{default:t((()=>[f(S,{class:"f24 gray9"},{default:t((()=>[c(o(I.detail.orderproduct.product_attr),1)])),_:1})])),_:1})])),_:1})])),_:1}),f(V,{class:"d-e-c pt20 lh150"},{default:t((()=>[f(V,{class:"f24"},{default:t((()=>[c(" 商品金额： "),f(S,{class:"red"},{default:t((()=>[c("¥"+o(I.detail.orderproduct.total_price),1)])),_:1})])),_:1})])),_:1}),f(V,{class:"d-e-c pt10 lh150"},{default:t((()=>[f(V,{class:"f24"},{default:t((()=>[c(" 订单实付金额： "),f(S,{class:"red"},{default:t((()=>[c("¥"+o(I.detail.orderproduct.total_pay_price),1)])),_:1})])),_:1})])),_:1}),70==I.detail.order_master.order_source?(d(),l(V,{key:0,class:"d-e-c pt10 lh150"},{default:t((()=>[I.detail.orderproduct.advance?(d(),l(V,{key:0,class:"f24"},{default:t((()=>[c(" 定金("+o(I.detail.orderproduct.advance.money_return?"可退":"不可退")+")： ",1),f(S,{class:"red"},{default:t((()=>[c("¥"+o(I.detail.orderproduct.advance.pay_price),1)])),_:1})])),_:1})):u("",!0)])),_:1})):u("",!0)])),_:1}),20==I.detail.status.value?(d(),l(V,{key:0,class:"group bg-white"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("已退款金额：")])),_:1}),f(S,{class:"gray9"},{default:t((()=>[c("￥"+o(I.detail.refund_money),1)])),_:1})])),_:1})):u("",!0),f(V,{class:"group bg-white f24"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 申请退货信息 ")])),_:1}),f(V,{class:"p-20-0 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("售后类型：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.type.text),1)])),_:1})])),_:1}),f(V,{class:"p-20-0 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("申请原因：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.apply_desc),1)])),_:1})])),_:1}),f(V,{class:"p-20-0 upload-list d-s-s f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("申请凭证：")])),_:1}),f(V,{class:"d-s-s f-w"},{default:t((()=>[I.detail.image.length>0?(d(!0),n(g,{key:0},p(I.detail.image,((e,a)=>(d(),l(V,{class:"item",key:a},{default:t((()=>[f(R,{src:e.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024)))),128)):(d(),n(g,{key:1},[c(" 无 ")],64))])),_:1})])),_:1})])),_:1}),0!=I.detail.plate_status.value?(d(),l(V,{key:1,class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 平台处理结果: ")])),_:1}),f(V,{class:"p-20-0"},{default:t((()=>[10==I.detail.plate_status.value?(d(),l(S,{key:0,class:"red f28"},{default:t((()=>[c("客服处理中")])),_:1})):u("",!0),20==I.detail.plate_status.value?(d(),l(S,{key:1,class:"red f28"},{default:t((()=>[c("平台已同意退款")])),_:1})):u("",!0),30==I.detail.plate_status.value?(d(),l(S,{key:2,class:"red f28"},{default:t((()=>[c("平台已拒绝退款")])),_:1})):u("",!0)])),_:1})])),_:1})):u("",!0),10==I.detail.status.value?(d(),l(V,{key:2,class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 商家拒绝原因 ")])),_:1}),f(V,{class:"p-20-0"},{default:t((()=>[f(S,{class:"red f28"},{default:t((()=>[c(o(I.detail.refuse_desc),1)])),_:1})])),_:1})])),_:1})):u("",!0),30==I.detail.plate_status.value?(d(),l(V,{key:3,class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 平台拒绝原因 ")])),_:1}),f(V,{class:"p-20-0"},{default:t((()=>[f(S,{class:"red f28"},{default:t((()=>[c(o(I.detail.plate_desc),1)])),_:1})])),_:1})])),_:1})):u("",!0),10==I.detail.is_agree.value&&30!=I.detail.type.value?(d(),l(V,{key:4,class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 退货地址 ")])),_:1}),f(V,{class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("收货人：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.address.name),1)])),_:1})])),_:1}),f(V,{class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("联系电话：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.address.phone),1)])),_:1})])),_:1}),f(V,{class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("详情地址：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.address.detail),1)])),_:1})])),_:1}),I.detail.express_no?(d(),l(V,{key:0,class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("物流公司：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.express.express_name),1)])),_:1})])),_:1})):u("",!0),I.detail.express_no?(d(),l(V,{key:1,class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("物流单号：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.express_no),1)])),_:1})])),_:1})):u("",!0),I.detail.is_plate_send?(d(),l(V,{key:2,class:"pt30 f28"},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("换货物流公司：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.sendexpress.express_name),1)])),_:1})])),_:1})):u("",!0),I.detail.is_plate_send?(d(),l(V,{key:3,class:"pt30 f28",onClick:a[0]||(a[0]=a=>{e.gotoPage("/pages/order/express/refund-express?order_id="+I.detail.order_refund_id)})},{default:t((()=>[f(S,{class:"gray9"},{default:t((()=>[c("换货物流单号：")])),_:1}),f(S,null,{default:t((()=>[c(o(I.detail.send_express_no),1)])),_:1})])),_:1})):u("",!0),f(V,{class:"mt20 pb20 border-t gray9"},{default:t((()=>[f(V,{class:"pt20"},{default:t((()=>[c(" · 未与卖家协商一致情况下，请勿寄到付或平邮 ")])),_:1}),f(V,{class:"pt10"},{default:t((()=>[c(" · 请填写真实有效物流信息 ")])),_:1})])),_:1})])),_:1})):u("",!0),0==I.detail.status.value&&10==I.detail.is_agree.value&&0==I.detail.is_user_send&&"user"==I.source?(d(),l(F,{key:5,onSubmit:L.formSubmit,"report-submit":""},{default:t((()=>[f(V,{class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 填写物流信息 ")])),_:1}),f(V,{class:"p-20-0 d-s-c"},{default:t((()=>[f(V,{class:"gray9"},{default:t((()=>[c("物流公司：")])),_:1}),f(V,{class:"flex-1 p20 border"},{default:t((()=>[f(D,{mode:"selector",onChange:L.onExpressChange,range:I.expressList,"range-key":"express_name",value:I.index},{default:t((()=>[I.index>-1?(d(),l(S,{key:0},{default:t((()=>[c(o(I.expressList[I.index].express_name),1)])),_:1})):(d(),l(S,{key:1,class:"col-80"},{default:t((()=>[c("请选择物流公司")])),_:1}))])),_:1},8,["onChange","range","value"])])),_:1})])),_:1}),f(V,{class:"p-20-0 d-s-c"},{default:t((()=>[f(V,{class:"gray9"},{default:t((()=>[c("物流单号：")])),_:1}),f(V,{class:"flex-1 border"},{default:t((()=>[f(E,{class:"p10",placeholder:"请填写物流单号",name:"express_no"})])),_:1})])),_:1}),f(V,{class:"mt20"},{default:t((()=>[f(P,{class:"btn-red",formType:"submit"},{default:t((()=>[c("确认发货")])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])):u("",!0),20==I.detail.type.value&&10==I.detail.is_agree.value&&1==I.detail.is_user_send&&"user"!=I.source&&0==I.detail.is_plate_send?(d(),l(F,{key:6,onSubmit:L.reReceipt,"report-submit":""},{default:t((()=>[f(V,{class:"group bg-white"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[c(" 填写物流信息 ")])),_:1}),f(V,{class:"p-20-0 d-s-c"},{default:t((()=>[f(V,{class:"gray9"},{default:t((()=>[c("物流公司：")])),_:1}),f(V,{class:"flex-1 p20 border"},{default:t((()=>[f(D,{mode:"selector",onChange:L.onExpressChange,range:I.expressList,"range-key":"express_name",value:I.index},{default:t((()=>[I.index>-1?(d(),l(S,{key:0},{default:t((()=>[c(o(I.expressList[I.index].express_name),1)])),_:1})):(d(),l(S,{key:1,class:"col-80"},{default:t((()=>[c("请选择物流公司")])),_:1}))])),_:1},8,["onChange","range","value"])])),_:1})])),_:1}),f(V,{class:"p-20-0 d-s-c"},{default:t((()=>[f(V,{class:"gray9"},{default:t((()=>[c("物流单号：")])),_:1}),f(V,{class:"flex-1 border"},{default:t((()=>[f(E,{class:"p10",placeholder:"请填写物流单号",name:"send_express_no"})])),_:1})])),_:1}),f(V,{class:"mt20"},{default:t((()=>[f(P,{class:"btn-red",formType:"submit"},{default:t((()=>[c("确认发货")])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])):u("",!0),0==I.detail.is_agree.value&&"supplier"==I.source?(d(),l(V,{key:7,class:"group bg-white f24"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[f(V,{class:"mb20"},{default:t((()=>[c("审核")])),_:1}),f(V,{class:""},{default:t((()=>[f(V,{class:"f26 gray9"},{default:t((()=>[c("售后类型："),f(S,{class:"gray3"},{default:t((()=>[c(o(I.detail.type.text),1)])),_:1})])),_:1}),f(V,{class:"d-s-c mb20"},{default:t((()=>[f(V,{class:"make-top w120 mr10"},{default:t((()=>[f(V,{class:"gray9 f26"},{default:t((()=>[c("审核状态")])),_:1})])),_:1}),f(A,{class:"d-a-c",onChange:a[1]||(a[1]=e=>L.changeRadio(e))},{default:t((()=>[f(j,{class:"d-s-c make-item"},{default:t((()=>[f(V,null,{default:t((()=>[f(U,{style:{transform:"scale(0.7)"},color:"#ff6633",checked:10==I.is_agree,value:"10"},null,8,["checked"])])),_:1}),f(V,{class:"f26 color-57"},{default:t((()=>[c("同意")])),_:1})])),_:1}),f(j,{class:"d-s-c make-item"},{default:t((()=>[f(V,null,{default:t((()=>[f(U,{style:{transform:"scale(0.7)"},color:"#ff6633",checked:20==I.is_agree,value:"20"},null,8,["checked"])])),_:1}),f(V,{class:"f26 color-57"},{default:t((()=>[c("拒绝")])),_:1})])),_:1})])),_:1})])),_:1}),10==I.is_agree&&30!=I.detail.type.value?(d(),l(V,{key:0,class:"d-s-c mb20"},{default:t((()=>[f(D,{mode:"selector",onChange:L.onAddressChange,range:I.address,"range-key":"detail",value:I.addressIndex},{default:t((()=>[""!=I.address_id?(d(),l(S,{key:0},{default:t((()=>[c(o(I.address[I.addressIndex].detail),1)])),_:1})):(d(),l(S,{key:1,class:"col-80"},{default:t((()=>[c("请选择退货地址")])),_:1}))])),_:1},8,["onChange","range","value"])])),_:1})):u("",!0),20==I.is_agree?(d(),l(V,{key:1,class:"d-s-c mb20"},{default:t((()=>[f(V,{class:"w120 mr10 f26"},{default:t((()=>[c("拒绝原因")])),_:1}),f(E,{type:"text",class:"make-item selectpicker input-box",modelValue:I.refuse_desc,"onUpdate:modelValue":a[2]||(a[2]=e=>I.refuse_desc=e)},null,8,["modelValue"])])),_:1})):u("",!0),10==I.is_agree&&30==I.detail.type.value?(d(),l(V,{key:2},{default:t((()=>[f(V,{class:"d-s-c mb20"},{default:t((()=>[f(V,{class:"w120 mr10 f26"},{default:t((()=>[c("退款金额")])),_:1}),f(E,{type:"text",class:"make-item selectpicker input-box",modelValue:I.refund_money,"onUpdate:modelValue":a[3]||(a[3]=e=>I.refund_money=e)},null,8,["modelValue"])])),_:1}),f(V,{class:"p-20-0 f28"},{default:t((()=>[f(V,{class:"red"},{default:t((()=>[c(" 请严格按照售后理赔标准进行赔付,避免买家对赔付有异议,请输入退款金额,最多"+o(I.detail.orderproduct.max_refund_money)+"元",1)])),_:1}),f(V,{class:"gray9"},{default:t((()=>[c("注：该操作将执行订单原路退款，并关闭当前售后单，请确认并填写，退款的金额(不能大于订单实付款)")])),_:1})])),_:1})])),_:1})):u("",!0),f(V,{class:"mt20"},{default:t((()=>[f(P,{class:"btn-red",onClick:L.sendRefund},{default:t((()=>[c("确认审核")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})):u("",!0),10==I.detail.type.value&&10==I.detail.is_agree.value&&1==I.detail.is_user_send&&0==I.detail.is_receipt&&"supplier"==I.source?(d(),l(V,{key:8,class:"group bg-white f24"},{default:t((()=>[f(V,{class:"p-20-0 border-b f34"},{default:t((()=>[f(V,{class:"mb20"},{default:t((()=>[c("审核")])),_:1}),f(V,{class:""},{default:t((()=>[f(V,{class:"f26 gray9"},{default:t((()=>[c("售后类型："),f(S,{class:"gray3"},{default:t((()=>[c(o(I.detail.type.text),1)])),_:1})])),_:1}),f(V,null,{default:t((()=>[f(V,{class:"d-s-c mb20"},{default:t((()=>[f(V,{class:"w120 mr10 f26"},{default:t((()=>[c("退款金额")])),_:1}),f(E,{type:"text",class:"make-item selectpicker input-box",modelValue:I.refund_money,"onUpdate:modelValue":a[4]||(a[4]=e=>I.refund_money=e)},null,8,["modelValue"])])),_:1}),f(V,{class:"p-20-0 f28"},{default:t((()=>[f(V,{class:"red"},{default:t((()=>[c(" 请严格按照售后理赔标准进行赔付,避免买家对赔付有异议,请输入退款金额,最多"+o(I.detail.orderproduct.total_pay_price)+"元",1)])),_:1}),f(V,{class:"gray9"},{default:t((()=>[c("注：该操作将执行订单原路退款，并关闭当前售后单，请确认并填写，退款的金额(不能大于订单实付款)")])),_:1})])),_:1})])),_:1}),f(V,{class:"mt20"},{default:t((()=>[f(P,{class:"btn-red",onClick:L.sendReceipt},{default:t((()=>[c("确认审核")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})):u("",!0)])),_:1},8,["data-theme","class"]))}],["__scopeId","data-v-c74afc53"]]);export{I as default};
