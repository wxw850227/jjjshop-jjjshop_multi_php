import{_ as s,J as t,o,c as l,w as e,h as a,d as _,g as i,r as c,F as d,e as p,u as r,k as u,l as h,S as n,t as g,n as f,f as m,i as y}from"./index-73db7405.js";import{u as w}from"./uni-load-more.e615c410.js";const b=s({components:{uniLoadMore:w},data:()=>({shop_list:[],loading:!0,no_more:!1,scrollviewHigh:"",page:1,last_page:"",isfollow:""}),computed:{loadingType(){return this.loading?1:0!=this.shop_list.length&&this.no_more?2:0}},onShow(){this.getData(),this.init()},methods:{init(){let s=this;s.shop_list=[],s.page=1,t({success(t){s.scrollviewHigh=t.windowHeight}})},getData(){let s=this;s._post("user.Favorite/list",{page:s.page,type:10,list_rows:15},(t=>{s.loading=!1,s.shop_list=s.shop_list.concat(t.data.list.data),s.last_page=t.data.list.last_page,t.data.list.last_page<=1?s.no_more=!0:s.no_more=!1}))},scrolltolowerFunc(){let s=this;s.no_more||(s.page++,s.page<=s.last_page?s.getData():s.no_more=!0)},goto_shop(s){this.gotoPage("/pages/shop/shop?shop_supplier_id="+s)},goto_product(s){this.gotoPage("/pages/product/detail/detail?product_id="+s)}}},[["render",function(s,t,w,b,k,v){const T=y,j=a,x=u,C=h("uni-load-more"),F=n;return o(),l(j,null,{default:e((()=>[_(F,{"scroll-y":"true",class:"scroll-Y",style:r("height:"+k.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:v.scrolltolowerFunc},{default:e((()=>[_(j,{class:"shop_list_body"},{default:e((()=>[(o(!0),i(d,null,c(k.shop_list,((s,t)=>(o(),l(j,{class:"shop_list_body_item",key:t},{default:e((()=>[_(j,{class:"shop_list_body_item_shop",onClick:t=>v.goto_shop(s.shop_supplier_id)},{default:e((()=>[_(j,{class:"shop_list_body_item_shop_logo"},{default:e((()=>[_(T,{src:s.logo},null,8,["src"])])),_:2},1024),_(j,{class:"shop_list_body_item_shop_info"},{default:e((()=>[_(j,{class:"h1 title"},{default:e((()=>[p(g(s.store_name),1)])),_:2},1024),_(j,{class:"h3 brand"},{default:e((()=>[p("主营品牌："+g(s.categoryName),1)])),_:2},1024),_(j,{class:"h3 sales"},{default:e((()=>[p("销量"+g(s.product_sales)+"件",1)])),_:2},1024)])),_:2},1024),_(j,{class:"shop_list_body_item_shop_others"},{default:e((()=>[_(j,{class:"h3 attention"},{default:e((()=>[_(x,{class:"red"},{default:e((()=>[p(g(s.fav_count),1)])),_:2},1024),p("人关注")])),_:2},1024),_(j,{class:"h3 collect"},{default:e((()=>[p("商户评分："),_(x,{class:"red"},{default:e((()=>[p(g(s.score),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),k.shop_list[t].productList.length>0?(o(),l(j,{key:0,class:f(k.shop_list[t].productList.length<3?"shop_list_body_item_product2":"shop_list_body_item_product")},{default:e((()=>[(o(!0),i(d,null,c(k.shop_list[t].productList,((s,t)=>(o(),l(j,{class:"shop_list_body_item_product_item",key:t,onClick:t=>v.goto_product(s.product_id)},{default:e((()=>[_(T,{src:s.logo},null,8,["src"]),_(j,{class:"shop_list_body_item_product_item_price"},{default:e((()=>[_(j,{class:"h4 red"},{default:e((()=>[p("¥"),_(x,{class:"h3"},{default:e((()=>[p(g(s.product_price>1e3?1*s.product_price:s.product_price),1)])),_:2},1024)])),_:2},1024),_(j,{class:"h6 huaxianjia"},{default:e((()=>[p("¥"),_(x,{class:"h5"},{default:e((()=>[p(g(s.line_price>1e3?1*s.line_price:s.line_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1032,["class"])):m("",!0)])),_:2},1024)))),128))])),_:1}),0!=k.shop_list.length||k.loading?(o(),l(C,{key:1,loadingType:v.loadingType},null,8,["loadingType"])):(o(),l(j,{key:0,class:"d-c-c p30"},{default:e((()=>[_(x,{class:"iconfont icon-wushuju"}),_(x,{class:"cont"},{default:e((()=>[p("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-89d5a80c"]]);export{b as default};
