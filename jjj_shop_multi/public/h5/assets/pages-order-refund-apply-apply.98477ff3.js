import{_ as e,z as t,B as a,o as l,c as s,w as d,f as o,a as r,h as c,d as u,e as i,t as p,n,g as f,r as _,F as m,i as g,k as y,j as b,a5 as h,a9 as k,l as v}from"./index-73db7405.js";import x from"./components-upload-upload.5dc72dfa.js";const U=e({components:{Upload:x},data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:10,isUpload:!1,order_product_id:0,product:{image:{file_path:""}},images:[],temlIds:[]}),onLoad(e){this.order_product_id=e.order_product_id},mounted(){this.getData()},methods:{getData(){let e=this;t({title:"加载中"}),e.loadding=!0;let l=e.order_product_id;e._get("user.refund/apply",{order_product_id:l,platform:e.getPlatform()},(function(t){e.loadding=!1,e.product=t.data.detail,e.temlIds=t.data.template_arr,30==e.product.orderM.delivery_type.value&&(e.type=30),a()}))},tabType(e){this.type=e},formSubmit:function(e){let l=this;var s=e.detail.value;s.type=l.type,s.order_product_id=l.order_product_id,s.images=JSON.stringify(l.images);l.subMessage(l.temlIds,(function(){t({title:"正在提交",mask:!0}),l._post("user.refund/apply",s,(function(e){a(),r({title:e.msg,duration:3e3,complete:function(){l.gotoPage("/pages/order/refund/index/index")}})}))}))},openUpload(){this.isUpload=!0},getImgsFunc(e){let t=this;if(t.isUpload=!1,e&&void 0!==e){let a=t.images.length;if(a+e.length<7)t.images=t.images.concat(e);else{let l=6-a;for(let a=0;a<l;a++)t.images.push(e[a])}}},deleteFunc(e){this.images.splice(e,1)}}},[["render",function(e,t,a,r,x,U){const F=g,I=c,w=y,C=b,M=h,S=k,j=v("Upload");return x.loadding?o("",!0):(l(),s(I,{key:0,class:"refund-apply pb100"},{default:d((()=>[u(S,{onSubmit:U.formSubmit,onReset:e.formReset},{default:d((()=>[u(I,{class:"one-product d-s-c p30 bg-white"},{default:d((()=>[u(I,{class:"cover"},{default:d((()=>[u(F,{src:x.product.image.file_path||"",mode:"aspectFit"},null,8,["src"])])),_:1}),u(I,{class:"flex-1"},{default:d((()=>[u(I,{class:"pro-info"},{default:d((()=>[i(p(x.product.product_name),1)])),_:1}),u(I,{class:"pt10 p-0-30 f24 gray9"},{default:d((()=>[u(w,{class:""},{default:d((()=>[i(" 单价：¥"+p(x.product.line_price),1)])),_:1}),u(w,{class:"ml20"},{default:d((()=>[i(" 数量："+p(x.product.total_num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(I,{class:"group bg-white"},{default:d((()=>[u(I,{class:"group-hd border-b-e"},{default:d((()=>[u(I,{class:"left"},{default:d((()=>[u(w,{class:"min-name"},{default:d((()=>[i("服务类型")])),_:1})])),_:1})])),_:1}),u(I,{class:"d-s-c p-20-0"},{default:d((()=>[30!=x.product.orderM.delivery_type.value?(l(),s(C,{key:0,type:"default",class:n(10==x.type?"btn-red-border":""),onClick:t[0]||(t[0]=e=>U.tabType(10))},{default:d((()=>[i("退货/退款")])),_:1},8,["class"])):o("",!0),30!=x.product.orderM.delivery_type.value?(l(),s(C,{key:1,type:"default",class:n(20==x.type?"ml20 btn-red-border":"ml20"),onClick:t[1]||(t[1]=e=>U.tabType(20))},{default:d((()=>[i("换货")])),_:1},8,["class"])):o("",!0),30!=x.product.orderM.delivery_type.value?(l(),s(C,{key:2,type:"default",class:n(30==x.type?"ml20 btn-red-border":"ml20"),onClick:t[2]||(t[2]=e=>U.tabType(30))},{default:d((()=>[i("仅退款")])),_:1},8,["class"])):o("",!0)])),_:1})])),_:1}),u(I,{class:"group bg-white"},{default:d((()=>[u(I,{class:"group-hd"},{default:d((()=>[u(I,{class:"left"},{default:d((()=>[u(w,{class:"min-name"},{default:d((()=>[i("申请原因")])),_:1})])),_:1})])),_:1}),u(I,{class:"d-s-c"},{default:d((()=>[u(M,{class:"p10 box-s-b border flex-1 f28 lh150",name:"content",placeholder:"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通"})])),_:1})])),_:1}),10==x.type||30==x.type?(l(),s(I,{key:0,class:"group bg-white"},{default:d((()=>[u(I,{class:"group-hd"},{default:d((()=>[u(I,{class:"left"},{default:d((()=>[u(w,{class:"min-name"},{default:d((()=>[i("退款金额：")])),_:1}),u(w,{class:"red f30"},{default:d((()=>[i("¥"+p(x.product.total_pay_price),1)])),_:1})])),_:1})])),_:1})])),_:1})):o("",!0),u(I,{class:"group bg-white"},{default:d((()=>[u(I,{class:"group-hd"},{default:d((()=>[u(I,{class:"left"},{default:d((()=>[u(w,{class:"min-name"},{default:d((()=>[i("上传凭证")])),_:1}),u(w,{class:"gray9"},{default:d((()=>[i("(最多6张)")])),_:1})])),_:1})])),_:1}),u(I,{class:"upload-list d-s-c"},{default:d((()=>[(l(!0),f(m,null,_(x.images,((e,t)=>(l(),s(I,{class:"item",key:t,onClick:t=>U.deleteFunc(e)},{default:d((()=>[u(F,{src:e.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["onClick"])))),128)),x.images.length<6?(l(),s(I,{key:0,class:"item d-c-c d-stretch"},{default:d((()=>[u(I,{class:"upload-btn d-c-c d-c flex-1",onClick:t[3]||(t[3]=e=>U.openUpload())},{default:d((()=>[u(w,{class:"icon iconfont icon-xiangji f34"}),u(w,{class:"gray9"},{default:d((()=>[i("上传图片")])),_:1})])),_:1})])),_:1})):o("",!0)])),_:1})])),_:1}),u(I,{class:"foot-btns"},{default:d((()=>[u(C,{"form-type":"submit",class:"btn-red"},{default:d((()=>[i("确认提交")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"]),x.isUpload?(l(),s(j,{key:0,onGetImgs:U.getImgsFunc},null,8,["onGetImgs"])):o("",!0)])),_:1}))}]]);export{U as default};
