import{_ as t,J as e,K as a,a as s,o as l,c as i,w as c,n as o,h as n,d as r,e as d,t as h,u as g,g as u,r as y,F as p,f as _,k as f,S as m,l as k,i as x}from"./index-73db7405.js";const w=t({components:{},data:()=>({isloadding:!0,searchName:"搜索商品",show_type:3,phoneHeight:0,scrollviewHigh:0,listData:[],childlist:[],select_index:0,catename:""}),onShow(){this.getTabBarLinks()},mounted(){this.init(),this.getData()},methods:{init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,a().select("#searchBox").boundingClientRect((e=>{let a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec()}})},hasImages:t=>null!=t.images&&null!=t.images.file_path?t.images.file_path:"",getData(){let t=this;t.isloadding=!0,t._get("product.category/index",{},(function(e){t.listData=e.data.list,t.show_type=e.data.template.category_style,console.log(t.show_type),t.listData[0].child&&(t.childlist=t.listData[0].child),t.catename=t.listData[0].name,t.background=e.data.background,t.isloadding=!1}))},selectCategory(t){this.listData[t].child&&(this.childlist=this.listData[t].child,this.select_index=t)},gotoList(t){let e=t;this.gotoPage("/pages/product/list/list?category_id="+e+"&sortType=all&search=&sortPrice=0")},wxGetUserInfo:function(t){if(!t.detail.iv)return s({title:"您取消了授权,登录失败",icon:"none"}),!1},gotoSearch(){this.gotoPage("/pages/product/search/search")},onShareAppMessage(){return{title:this.templet.share_title,path:"/pages/product/category?"+this.getShareUrlParams()}}}},[["render",function(t,e,a,s,w,C){const D=f,H=n,b=x,v=m,B=k("tabBar"),I=k("request-loading");return l(),i(H,{class:o(["category-wrap",t.theme()||""]),"data-theme":t.theme()},{default:c((()=>[r(H,{class:"index-search-box-cate d-b-c",id:"searchBox",style:g(0==t.topBarHeight()?"":"height:"+t.topBarHeight()+"px;padding-top:"+t.topBarTop()+"px")},{default:c((()=>[r(H,{class:"index-search-cate flex-1 t-c",onClick:C.gotoSearch},{default:c((()=>[r(D,{class:"icon iconfont icon-sousuo"}),r(D,{class:"ml10"},{default:c((()=>[d(h(w.searchName),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["style"]),r(H,{class:"category-content"},{default:c((()=>[10==w.show_type?(l(),i(H,{key:0,class:"cotegory-type cotegory-type-1"},{default:c((()=>[r(v,{"scroll-y":"true",class:"scroll-Y",style:g("height:"+w.scrollviewHigh+"px;")},{default:c((()=>[r(H,{class:"list"},{default:c((()=>[(l(!0),u(p,null,y(w.listData,((t,e)=>(l(),i(H,{class:"item",key:e,onClick:e=>C.gotoList(t.category_id)},{default:c((()=>[r(H,{class:"pic"},{default:c((()=>[r(b,{src:C.hasImages(t),mode:"widthFix"},null,8,["src"])])),_:2},1024),r(H,{class:"p-20-0 fb tc f34"},{default:c((()=>[d(h(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):_("",!0),20==w.show_type?(l(),i(H,{key:1,class:"cotegory-type cotegory-type-2"},{default:c((()=>[r(v,{"scroll-y":"true",class:"scroll-Y",style:g("height:"+w.scrollviewHigh+"px;")},{default:c((()=>[r(H,{class:"list"},{default:c((()=>[(l(!0),u(p,null,y(w.listData,((t,e)=>(l(),i(H,{class:"item",key:e,onClick:e=>C.gotoList(t.category_id)},{default:c((()=>[r(b,{src:C.hasImages(t),mode:"aspectFit"},null,8,["src"]),r(D,null,{default:c((()=>[d(h(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):_("",!0),30==w.show_type?(l(),i(H,{key:2,class:"cotegory-type cotegory-type-3"},{default:c((()=>[r(H,{class:"category-tab"},{default:c((()=>[r(v,{"scroll-y":"true",class:"scroll-Y",style:g("height:"+w.scrollviewHigh+"px;")},{default:c((()=>[(l(!0),u(p,null,y(w.listData,((t,e)=>(l(),i(H,{class:o(e==w.select_index?"item active":"item"),key:e,onClick:t=>C.selectCategory(e)},{default:c((()=>[r(D,null,{default:c((()=>[d(h(t.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"])])),_:1}),r(H,{class:"category-content pr"},{default:c((()=>[r(v,{"scroll-y":"true",class:"scroll-Y scroll-3",style:g("height:"+w.scrollviewHigh+"px;")},{default:c((()=>[r(H,{class:"f26 catename"},{default:c((()=>[d(h(w.catename),1)])),_:1}),r(H,{class:"list"},{default:c((()=>[(l(!0),u(p,null,y(w.childlist,((t,e)=>(l(),i(H,{class:"item",key:e,onClick:e=>C.gotoList(t.category_id)},{default:c((()=>[r(b,{src:C.hasImages(t),mode:"aspectFit"},null,8,["src"]),r(D,{class:"type-name"},{default:c((()=>[d(h(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})):_("",!0)])),_:1}),r(B),r(I,{loadding:w.isloadding},null,8,["loadding"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-c430a3f6"]]);export{w as default};
