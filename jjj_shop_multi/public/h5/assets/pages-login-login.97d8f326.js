import{_ as e,z as s,L as t,A as a,s as n,M as o,B as i,o as c,c as d,w as r,h as l,d as u,e as g,j as _}from"./index-73db7405.js";const h=e({data:()=>({background:"",listData:[]}),onShow(){},onLoad(){},methods:{changeMsg(){this.second>0?(this.send_btn_txt=this.second+"秒",this.second--,setTimeout(this.changeMsg,1e3)):(this.send_btn_txt="获取验证码",this.second=60,this.is_send=!1)},onNotLogin:function(){this.gotoPage("/pages/index/index")},getUserInfo:function(){let e=this;wx.getUserProfile({lang:"zh_CN",desc:"用于完善会员资料",success:c=>{if(console.log(c),"getUserProfile:ok"!==c.errMsg)return!1;s({title:"正在登录",mask:!0}),t({success(s){e._post("user.user/login",{code:s.code,user_info:c.rawData,encrypted_data:encodeURIComponent(c.encryptedData),iv:encodeURIComponent(c.iv),signature:c.signature,referee_id:a("referee_id"),source:"wx"},(e=>{n("token",e.data.token),n("user_id",e.data.user_id),o()}),!1,(()=>{i()}))}})}})}}},[["render",function(e,s,t,a,n,o){const i=l,h=_;return c(),d(i,{class:"login-container"},{default:r((()=>[u(i,{class:"wechatapp"},{default:r((()=>[u(i,{class:"header"})])),_:1}),u(i,{class:"auth-title"},{default:r((()=>[g("申请获取以下权限")])),_:1}),u(i,{class:"auth-subtitle"},{default:r((()=>[g("获得你的公开信息（昵称、头像等）")])),_:1}),u(i,{class:"login-btn"}),u(i,{class:"no-login-btn"},{default:r((()=>[u(h,{class:"btn-normal",onClick:o.onNotLogin},{default:r((()=>[g("暂不登录")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-c4a79f6a"]]);export{h as default};
