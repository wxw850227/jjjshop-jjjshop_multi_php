import{_ as e,z as t,B as s,o as a,c as i,w as o,d as l,f as c,e as r,x as d,n as u,i as n,h as p,k as _,j as f,g as h,r as m,F as g,S as k,t as A,J as y,a as v,u as b,I as w,l as x,T as C,U as H,V as S,K as P,W as I,M as N,X as M,Y as X,Z as F,$ as K,a0 as D}from"./index-73db7405.js";import{_ as T}from"./share.4d57c17c.js";import{P as V}from"./uni-popup.a3ada4d4.js";import{M as E}from"./Mpservice.7c7abc39.js";const Z=e({data:()=>({Visible:!1,poster_img:"",wechat_share:!1}),props:["isbottmpanel","product_id"],watch:{isbottmpanel:function(e,t){e!=t&&(this.wechat_share=!1,this.Visible=e)}},methods:{closePopup(e){this.$emit("close",{type:e,poster_img:this.poster_img})},share:function(){this.wechat_share=!0},genePoster:function(){let e=this;t({title:"加载中"});let a="wx";a="mp",e._get("product.product/poster",{product_id:e.product_id,source:"mp"},(t=>{e.poster_img=t.data.qrcode,e.closePopup(2)}),null,(()=>{s()}))}}},[["render",function(e,t,s,h,m,g){const k=n,A=p,y=_,v=f;return a(),i(A,{class:u(["bottom-panel",m.Visible?"bottom-panel open":"bottom-panel close"]),onClick:g.closePopup},{default:o((()=>[l(A,{class:"popup-bg"},{default:o((()=>[m.wechat_share?(a(),i(A,{key:0,class:"wechat-box"},{default:o((()=>[l(k,{src:T,mode:"widthFix"})])),_:1})):c("",!0)])),_:1}),l(A,{class:"content",onClick:t[1]||(t[1]=d((()=>{}),["stop"]))},{default:o((()=>[l(A,{class:"module-box module-share"},{default:o((()=>[l(A,{class:"hd d-c-c"},{default:o((()=>[r(" 分享 ")])),_:1}),l(A,{class:"p30 box-s-b"},{default:o((()=>[l(A,{class:"d-c-c"},{default:o((()=>[l(A,{class:"item flex-1 d-c-c d-c"},{default:o((()=>[l(v,{"open-type":"share",onClick:g.share},{default:o((()=>[l(A,{class:"icon-box d-c-c share-friend"},{default:o((()=>[l(y,{class:"iconfont icon-fenxiang"})])),_:1}),l(y,{class:"pt20"},{default:o((()=>[r("分享好友")])),_:1})])),_:1},8,["onClick"])])),_:1}),l(A,{class:"item flex-1 d-c-c d-c"},{default:o((()=>[l(v,{onClick:g.genePoster},{default:o((()=>[l(A,{class:"icon-box d-c-c"},{default:o((()=>[l(y,{class:"iconfont icon-edit"})])),_:1}),l(y,{class:"pt20"},{default:o((()=>[r("生成海报")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),l(A,{class:"btns"},{default:o((()=>[l(v,{type:"default",onClick:t[0]||(t[0]=e=>g.closePopup(1))},{default:o((()=>[r("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-aa06754c"]]);const Y=e({data:()=>({Visible:!1,poster_img:""}),props:["isguarantee","server"],watch:{isguarantee:function(e,t){e!=t&&(this.Visible=e)}},methods:{closePopup(e){this.$emit("close",{type:e,poster_img:this.poster_img})}}},[["render",function(e,t,s,c,n,f){const y=p,v=_,b=k;return a(),i(y,{class:u(["bottom-panel",n.Visible?"bottom-panel open":"bottom-panel close"]),onClick:f.closePopup},{default:o((()=>[l(y,{class:"popup-bg"}),l(y,{class:"content",onClick:t[0]||(t[0]=d((()=>{}),["stop"]))},{default:o((()=>[l(y,{class:"module-box module-share"},{default:o((()=>[l(y,{class:"hd d-c-c"},{default:o((()=>[l(v,{class:""},{default:o((()=>[r("基础服务")])),_:1}),l(v,{class:"iconfont icon-guanbi",onClick:f.closePopup},null,8,["onClick"])])),_:1}),l(b,{"scroll-y":"true",style:{height:"600rpx","min-height":"300rpx"}},{default:o((()=>[(a(!0),h(g,null,m(s.server,((e,t)=>(a(),i(y,{class:"p30 box-s-b",key:t},{default:o((()=>[l(y,{class:"d-s-s"},{default:o((()=>[l(y,null,{default:o((()=>[l(y,{class:"icon iconfont icon-tijiaochenggong"})])),_:1}),l(y,{class:"ml30"},{default:o((()=>[l(y,{class:"f26 gray9 mb10"},{default:o((()=>[r(A(e.name),1)])),_:2},1024),l(y,{class:"f22 gray9"},{default:o((()=>[r(A(e.describe),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-53c6994d"]]);const j=e({data:()=>({phoneHeight:0,scrollviewHigh:0,Visible:!1,datalist:{},ratio:1}),props:["isCoupon","couponList","discount"],onLoad(){},mounted(){this.init()},watch:{isCoupon:function(e,t){e!=t&&(this.Visible=e,this.datalist=this.couponList,this.getHeight())}},methods:{init(){let e=this;y({success(t){e.phoneHeight=t.windowHeight,e.ratio=t.windowWidth/750,e.getHeight()}})},getHeight(){let e=Object.keys(this.couponList).length;e>2?this.scrollviewHigh=.5*this.phoneHeight:1==e?this.scrollviewHigh=250*this.ratio+60:2==e&&(this.scrollviewHigh=460*this.ratio+60)},selectCoupon(e,a){let i=this;t({title:"领取中"}),i._post("user.coupon/receive",{coupon_id:e.coupon_id},(function(e){s(),v({title:"领取成功",duration:2e3,icon:"success"}),i.datalist[a].is_receive=!0}))},closePopup(){this.$emit("close")}}},[["render",function(e,t,s,n,f,y){const v=p,w=_,x=k;return a(),i(v,{class:u(f.Visible?"usable-coupon open":"usable-coupon close")},{default:o((()=>[l(v,{class:"popup-bg",onClick:y.closePopup},null,8,["onClick"]),l(v,{class:"main",onClick:t[0]||(t[0]=d((()=>{}),["stop"]))},{default:o((()=>[l(v,{class:"pop-title"},{default:o((()=>[l(v,null,{default:o((()=>[r("优惠")])),_:1}),l(v,{class:"pop-close",onClick:d(y.closePopup,["stop"])},{default:o((()=>[l(w,{class:"icon iconfont icon-guanbi"})])),_:1},8,["onClick"])])),_:1}),l(v,{class:"p-0-20"},{default:o((()=>[s.discount.give_points>0?(a(),i(v,{key:0,class:"p-20-0 line-h-50 f22 gray3"},{default:o((()=>[l(w,{class:"text-box"},{default:o((()=>[r("返"+A(e.points_name()),1)])),_:1}),r("商城购物返"+A(e.points_name())+"，订单完成后最高返"+A(s.discount.give_points)+A(e.points_name()),1)])),_:1})):c("",!0)])),_:1}),l(x,{"scroll-y":"true",class:"scroll-Y scroll-coupon",style:b("height:"+f.scrollviewHigh+"px;")},{default:o((()=>[l(v,null,{default:o((()=>[l(v,{class:"scroll-coupon-tit"},{default:o((()=>[r("可领取优惠券")])),_:1}),(a(!0),h(g,null,m(f.datalist,((t,s)=>(a(),i(v,{key:s,class:"mb20"},{default:o((()=>[l(v,{class:u(t.is_get?"coupon-item coupon-item-gray":"coupon-item coupon-item-"+t.color.text)},{default:o((()=>[l(v,{class:"circles"},{default:o((()=>[(a(),h(g,null,m(6,((e,t)=>l(w,{key:t}))),64))])),_:1}),l(v,{class:"info w100"},{default:o((()=>[l(v,{class:"d-c-c d-c"},{default:o((()=>[l(w,{class:"f40 fb w-s-n"},{default:o((()=>[r(A(t.coupon_type.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),l(v,{class:"operation d-b-c w-b"},{default:o((()=>[l(v,{class:"flex-1 o-h"},{default:o((()=>[10==t.coupon_type.value?(a(),i(v,{key:0,class:"f34"},{default:o((()=>[l(w,{class:"f34 fb"},{default:o((()=>[r("减"+A(1*t.reduce_price)+"元",1)])),_:2},1024)])),_:2},1024)):c("",!0),20==t.coupon_type.value?(a(),h(g,{key:1},[l(w,{class:"f34 fb"},{default:o((()=>[r(A(1*t.discount),1)])),_:2},1024),l(w,null,{default:o((()=>[r("折券")])),_:1})],64)):c("",!0),l(v,{class:"f24"},{default:o((()=>[r(A(t.min_price>0?"满"+1*t.min_price+"元可用":"无门槛"),1)])),_:2},1024),10==t.expire_type?(a(),i(v,{key:2,class:"mt30 f24"},{default:o((()=>[r("领取"+A(t.expire_day)+"天内有效",1)])),_:2},1024)):c("",!0),20==t.expire_type?(a(),i(v,{key:3,class:"mt30 f24 white"},{default:o((()=>[r(A(t.start_time.text)+"~"+A(t.end_time.text),1)])),_:2},1024)):c("",!0)])),_:2},1024),t.is_receive?(a(),i(v,{key:1,class:"f30 mr20 b-radio"},{default:o((()=>[l(w,null,{default:o((()=>[r("已领取")])),_:1})])),_:1})):(a(),i(v,{key:0,class:"f30 mr20 b-radio",onClick:e=>y.selectCoupon(t,s)},{default:o((()=>[r(" 立即领取 ")])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["class"]),20==t.apply_range?(a(),i(v,{key:0,class:"range_item d-b-c",onClick:d((s=>e.gotoPage("/pages/coupon/detail?coupon_id="+t.coupon_id)),["stop"])},{default:o((()=>[l(v,null,{default:o((()=>[r("限购商户部分商品")])),_:1}),l(v,null,{default:o((()=>[l(w,{class:"icon iconfont icon-jiantou",style:{color:"#999999","font-size":"24rpx"}})])),_:1})])),_:2},1032,["onClick"])):c("",!0)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-ffcef011"]]);const U=e({components:{spec:e({data:()=>({Visible:!1,form:{detail:{},show_sku:{sku_image:""}},stock:0,selectSpec:"",isOpenSpec:!1,type:"",clock:!1}),props:["isPopup","productModel","room_id"],onLoad(){},mounted(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(e,t){e!=t&&(this.Visible=e,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku()),this.form.type=this.productModel.type)},"form.specData":{handler(e,t){let s="",a="";if(this.isAll=!0,e){for(let t=0;t<e.spec_attr.length;t++)null==this.form.productSpecArr[t]?(this.isAll=!1,s+=e.spec_attr[t].group_name+" "):e.spec_attr[t].spec_items.forEach((e=>{this.form.productSpecArr[t]==e.item_id&&(a+='"'+e.spec_value+'" ')}));this.isAll?a="已选: "+a:s="请选择: "+s}this.selectSpec=this.isAll?a:s},deep:!0,immediate:!0}},methods:{initShowSku(){this.form.show_sku.sku_image=this.form.detail.image[0].file_path,this.form.show_sku.product_price=this.form.detail.product_price,20==this.form.detail.spec_type&&this.form.detail.product_price!=this.form.detail.product_max_price&&(this.form.show_sku.product_price=this.form.detail.product_price+"-"+this.form.detail.product_max_price),this.form.show_sku.spec_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.stock_num=this.form.detail.product_stock,this.form.show_sku.sum=1,this.stock=this.form.detail.product_stock,"advance"==this.form.plus_name&&(this.form.show_sku.product_price=this.form.plus_sku[0].product_price,this.form.show_sku.line_price="",this.form.show_sku.sku_image=this.form.plus_sku[0].productSku.image?this.form.plus_sku[0].productSku.image.file_path:this.form.detail.image[0].file_path,this.form.show_sku.stock_num=this.form.plus_sku[0].advance_stock,this.stock=this.form.plus_sku[0].advance_stock),"seckill"==this.form.plus_name&&(this.form.show_sku.product_price=this.form.plus_sku[0].seckill_price,this.form.show_sku.line_price=this.form.plus_sku[0].product_price,this.form.show_sku.sku_image=this.form.plus_sku[0].productSku.image?this.form.plus_sku[0].productSku.image.file_path:this.form.detail.image[0].file_path,this.form.show_sku.stock_num=this.form.plus_sku[0].seckill_stock,this.stock=this.form.plus_sku[0].seckill_stock)},selectAttr(e,t){let s=this,a=s.form.specData.spec_attr[e].spec_items,i=a[t];if(i.checked)i.checked=!1,s.form.productSpecArr[e]=null;else{for(let e=0;e<a.length;e++)a[e].checked=!1;i.checked=!0,s.form.productSpecArr[e]=i.item_id}for(let o=0;o<s.form.productSpecArr.length;o++)if(null==s.form.productSpecArr[o])return void s.initShowSku();s.updateSpecProduct()},updateSpecProduct(){let e=this,t=e.form.productSpecArr.join("_"),s=e.form.specData.spec_list;null!=e.form.plus_sku&&(s=e.form.plus_sku);let a=s.find((s=>e.form.plus_name?s.productSku.spec_sku_id==t:s.spec_sku_id==t));if(!a)return e.clock=!0,void e.initShowSku();e.clock=!1,e.form.plus_name&&!a.spec_form&&(a.spec_form=a.productSku),"object"==typeof a&&(e.form.plus_name?(e.stock=a[e.form.plus_name+"_stock"],e.form.show_sku.sum>e.stock&&(e.form.show_sku.sum=e.stock>0?e.stock:1)):(e.stock=a.spec_form.stock_num,e.form.show_sku.sum>e.stock&&(e.form.show_sku.sum=e.stock>0?e.stock:1)),e.form.show_sku.spec_sku_id=t,e.form.show_sku.product_price=a.spec_form.product_price,e.form.show_sku.line_price=a.spec_form.line_price,a.spec_form.image_id>0?e.form.show_sku.sku_image=a.spec_form.image_path:e.form.show_sku.sku_image=e.form.detail.image[0].file_path,e.form.show_sku.stock_num=a.spec_form.stock_num,e.form.plus_name&&(e.form.show_sku.product_price=a.product_price,"seckill"==e.form.plus_name&&(e.form.show_sku.product_price=a.seckill_price),e.form.show_sku.stock_num=a[e.form.plus_name+"_stock"],e.form.show_sku.line_price="",e.form.show_sku.sku_image=a.spec_form.image?a.spec_form.image.file_path:e.form.detail.image[0].file_path,e.form.show_sku.advance_product_id=a.spec_form.image?a.spec_form.image.file_path:e.form.detail.image[0].file_path))},closePopup(){this.$emit("close",this.form.specData,null)},confirmFunc(){if(null!=this.form.specData)for(let e=0;e<this.form.productSpecArr.length;e++)if(null==this.form.productSpecArr[e])return void v({title:"请选择规格",icon:"none",duration:2e3});"card"==this.form.type?this.addCart():this.createdOrder()},addCart(){let e=this,t=e.form.detail.product_id,s=e.form.show_sku.sum,a=e.form.show_sku.spec_sku_id;if(20==e.form.detail.spec_type&&0==a)return v({title:"请选择属性",icon:"none",duration:2e3}),!1;e._post("order.cart/add",{product_id:t,total_num:s,spec_sku_id:a},(function(t){v({title:t.msg,duration:2e3}),e.$emit("close",null,t.data.cart_total_num)}))},createdOrder(){let e=this.form.detail.product_id,t=this.form.show_sku.sum,s=this.form.show_sku.spec_sku_id,a="";0!=this.room_id&""!=this.room_id&&(a="&room_id="+this.room_id),console.log(a);let i="/pages/order/confirm-order?product_id="+e+"&product_num="+t+"&product_sku_id="+s+"&order_type=buy"+a;if("deposit"==this.form.type){if("advance"==this.form.plus_name){let a=this.form.detail.advance.sku.find((e=>e.productSku.spec_sku_id==s));i="/pages/order/confirm-order?product_id="+e+"&product_num="+t+"&product_sku_id="+s+"&advance_product_sku_id="+a.advance_product_sku_id+"&advance_product_id="+a.advance_product_id+"&order_type=deposit"}if("seckill"==this.form.plus_name){let e=this.form.detail.secKill.seckillSku.find((e=>e.productSku.spec_sku_id==s));i="/pages/order/confirm-order?seckill_product_id="+e.seckill_product_id+"&product_num="+t+"&product_sku_id="+e.productSku.spec_sku_id+"&seckill_product_sku_id="+e.seckill_product_sku_id+"&order_type=seckill"}}this.gotoPage(i)},add(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(v({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.detail.limit_num>0&&this.form.show_sku.sum>=this.form.detail.limit_num?(v({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(v({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}},[["render",function(e,t,s,y,v,b){const x=p,C=n,H=_,S=f,P=k,I=w;return a(),i(x,{class:u(v.Visible?"product-popup open":"product-popup close"),onTouchmove:t[5]||(t[5]=d((()=>{}),["stop","prevent"])),onClick:b.closePopup},{default:o((()=>[l(x,{class:"popup-bg"}),l(x,{class:"main",onClick:t[4]||(t[4]=d((()=>{}),["stop"]))},{default:o((()=>[l(x,{class:"header"},{default:o((()=>[l(C,{src:v.form.show_sku.sku_image,mode:"aspectFit",class:"avt"},null,8,["src"]),l(x,{class:"price"},{default:o((()=>[r(" ¥ "),l(H,{class:"num"},{default:o((()=>[r(A(v.form.show_sku.product_price),1)])),_:1}),v.form.show_sku.line_price?(a(),i(H,{key:0,class:"old-price"},{default:o((()=>[r("¥"+A(v.form.show_sku.line_price),1)])),_:1})):c("",!0)])),_:1}),l(x,{class:"stock"},{default:o((()=>[r("库存："+A(v.form.show_sku.stock_num),1)])),_:1}),l(x,{class:"select_spec"},{default:o((()=>[r(A(v.selectSpec),1)])),_:1}),l(x,{class:"close-btn",onClick:b.closePopup},{default:o((()=>[l(H,{class:"icon iconfont icon-guanbi"})])),_:1},8,["onClick"])])),_:1}),l(x,{class:"body"},{default:o((()=>[l(x,null,{default:o((()=>[null!=v.form.specData?(a(),i(P,{key:0,"scroll-y":"true",class:"specs mt20",style:{"max-height":"600rpx"}},{default:o((()=>[(a(!0),h(g,null,m(v.form.specData.spec_attr,((e,t)=>(a(),i(x,{class:"specs mt20",key:t},{default:o((()=>[l(x,{class:"specs-hd p-20-0"},{default:o((()=>[l(H,{class:"f26 gray3"},{default:o((()=>[r(A(e.group_name),1)])),_:2},1024)])),_:2},1024),l(x,{class:"specs-list"},{default:o((()=>[(a(!0),h(g,null,m(e.spec_items,((e,s)=>(a(),i(S,{class:u(e.checked?"btn-checked":"btn-checke"),key:s,onClick:e=>b.selectAttr(t,s)},{default:o((()=>[r(A(e.spec_value),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):c("",!0)])),_:1}),l(x,{class:"level-box count_choose"},{default:o((()=>[l(H,{class:"key"},{default:o((()=>[r("数量")])),_:1}),l(x,{class:"d-s-c"},{default:o((()=>[l(x,{class:u(["icon-box minus d-c-c",{"num-wrap":!b.issub}]),onClick:t[0]||(t[0]=e=>b.sub())},{default:o((()=>[l(H,{class:"icon iconfont icon-jian",style:{"font-size":"20rpx",color:"#333333"}})])),_:1},8,["class"]),l(x,{class:"text-wrap"},{default:o((()=>[l(I,{type:"text",modelValue:v.form.show_sku.sum,"onUpdate:modelValue":t[1]||(t[1]=e=>v.form.show_sku.sum=e)},null,8,["modelValue"])])),_:1}),l(x,{class:u(["icon-box plus d-c-c",{"num-wrap":!b.isadd}]),onClick:t[2]||(t[2]=e=>b.add())},{default:o((()=>[l(H,{class:"icon iconfont icon-jia",style:{"font-size":"20rpx",color:"#333333"}})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),l(x,{class:"btns"},{default:o((()=>[v.clock?(a(),i(S,{key:1,class:"confirm-btn"},{default:o((()=>[r("暂无库存")])),_:1})):(a(),i(S,{key:0,class:"confirm-btn",onClick:t[3]||(t[3]=e=>b.confirmFunc(v.form))},{default:o((()=>[r("确认")])),_:1}))])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-daad4ced"]]),share:Z,uniPopup:V,Mpservice:E,guarantee:Y,coupon:j,Countdown:e({data:()=>({status:0,day:"0",hour:"0",minute:"0",second:"0",timer:null,totalSeconds:0,title:"还剩"}),props:{config:{type:Object,default:function(){return{type:"all"}}},color:{type:String,default:function(){return"#ffffff"}},timeSize:{type:String,default:function(){return"28rpx"}}},created(){},watch:{config:{deep:!0,handler:function(e,t){e!=t&&0!=e.endstamp&&(e.title&&void 0!==e.title&&(this.title=e.title),this.setTime())},immediate:!0}},methods:{setTime(){let e=this;e.timer=setInterval((function(){e.init()}),1e3)},init(){let e=Date.now()/1e3;e<this.config.startstamp?(this.status=1,this.title="距开始还剩"):e>this.config.endstamp?this.status=2:(this.totalSeconds=parseInt(this.config.endstamp-e),this.status=0,this.title="距截止还剩",this.countDown()),this.$emit("returnVal",this.status)},countDown(){let e=this.totalSeconds,t=Math.floor(e/86400),s=e%86400,a=Math.floor(s/3600);s%=3600;let i=Math.floor(s/60),o=s%60;this.day=this.convertTwo(t),this.hour=this.convertTwo(a),this.minute=this.convertTwo(i),this.second=this.convertTwo(o),this.totalSeconds--},convertTwo(e){let t="";return t=e<10?"0"+e:e,t},getLocalTime:e=>new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," "),clear(){console.log(1),clearInterval(this.timer),this.timer=null}},destroyed(){clearInterval(this.timer)}},[["render",function(e,t,s,c,d,u){const n=_,f=p;return a(),i(f,{class:"countdown",style:b("color:"+s.color)},{default:o((()=>[2==d.status?(a(),h(g,{key:0},[r("活动已结束")],64)):(a(),h(g,{key:1},[r(A(d.title)+" ",1),l(n,{class:"mr10"},{default:o((()=>[r(A(parseInt(d.day)+"天"),1)])),_:1}),l(n,{class:"f28",style:b("font-size:"+s.timeSize+";")},{default:o((()=>[r(A(parseInt(d.hour))+":"+A(d.minute)+":"+A(d.second),1)])),_:1},8,["style"])],64))])),_:1},8,["style"])}],["__scopeId","data-v-64147ff4"]]),previewProduct:e({components:{Countdown:e({data:()=>({status:0,day:"0",hour:"0",minute:"0",second:"0",timer:null,totalSeconds:0,title:"活动剩余："}),props:{config:{type:Object,default:function(){return{type:"all"}}},back_color:{type:String,default:()=>""},cut_color:{type:String,default:()=>""},color:{type:String,default:()=>""},start_name:{type:String,default:()=>"距开始:"},end_name:{type:String,default:()=>"距结束:"},activeName:{type:String,default:()=>""}},created(){},watch:{config:{deep:!0,handler:function(e,t){e!=t&&0!=e.endstamp&&(e.title&&e.title,this.setTime())},immediate:!0}},methods:{setTime(){let e=this;e.timer=setInterval((function(){e.init()}),1e3)},init(){let e=Date.now()/1e3;e<this.config.startstamp?(this.status=1,this.totalSeconds=parseInt(this.config.startstamp-e),this.countDown(),this.title=this.start_name):e>this.config.endstamp?this.status=2:(this.totalSeconds=parseInt(this.config.endstamp-e),this.status=0,this.countDown(),this.title=this.end_name),this.$emit("returnVal",this.status)},countDown(){let e=this.totalSeconds,t=Math.floor(e/86400),s=e%86400,a=Math.floor(s/3600);s%=3600;let i=Math.floor(s/60),o=s%60;this.day=t,this.hour=this.convertTwo(a),this.minute=this.convertTwo(i),this.second=this.convertTwo(o),this.totalSeconds--},convertTwo(e){let t="";return t=e<10?"0"+e:e,t},getLocalTime:e=>new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," "),clear(){console.log(1),clearInterval(this.timer),this.timer=null}},destroyed(){clearInterval(this.timer)}},[["render",function(e,t,s,d,n,f){const m=_,k=p;return a(),i(k,{class:u(["countdown",s.activeName]),style:b("color:"+s.color)},{default:o((()=>[s.config&&null==s.config.type?(a(),h(g,{key:0},[r(A(n.title),1),l(m,{class:"daybox",style:b("background-color: "+s.back_color+";color:"+s.cut_color)},{default:o((()=>[r(A(n.day)+"天",1)])),_:1},8,["style"]),l(m,{class:"numbox"},{default:o((()=>[r(A(n.hour)+":"+A(n.minute)+":"+A(n.second),1)])),_:1})],64)):c("",!0),s.config&&"text"===s.config.type?(a(),h(g,{key:1},[r(A(parseInt(24*n.day)+parseInt(n.hour))+":"+A(n.minute)+":"+A(n.second),1)],64)):c("",!0),s.config&&"preview"===s.config.type?(a(),h(g,{key:2},[r(A(n.title),1),l(m,{class:"daybox",style:b("background-color: "+s.back_color+";color:"+s.cut_color)},{default:o((()=>[r(A(n.day)+"天",1)])),_:1},8,["style"]),l(m,{class:"box",style:b("background-color: "+s.back_color+";color:"+s.cut_color)},{default:o((()=>[r(A(n.hour),1)])),_:1},8,["style"]),l(m,{class:"p-0-10",style:b("color:"+s.color)},{default:o((()=>[r(":")])),_:1},8,["style"]),l(m,{class:"box",style:b("background-color: "+s.back_color+";color:"+s.cut_color)},{default:o((()=>[r(A(n.minute),1)])),_:1},8,["style"]),l(m,{class:"p-0-10",style:b("color:"+s.color)},{default:o((()=>[r(":")])),_:1},8,["style"]),l(m,{class:"box",style:b("background-color: "+s.back_color+";color:"+s.cut_color)},{default:o((()=>[r(A(n.second),1)])),_:1},8,["style"]),l(m,{class:"p-0-10",style:b("color:"+s.color)},null,8,["style"])],64)):c("",!0)])),_:1},8,["style","class"])}],["__scopeId","data-v-90587f84"]])},data:()=>({}),props:["detail","is_fav"],methods:{sendFunc(e){this.$emit("send",e)},returnValFunc(e){}}},[["render",function(e,t,s,d,n,h){const m=p,g=_,k=x("Countdown"),y=f;return a(),i(m,null,{default:o((()=>[l(m,{class:"limited-spike m-0-20 d-b-s"},{default:o((()=>[l(m,{class:"active-name mr20"},{default:o((()=>[l(m,null,{default:o((()=>[r("预")])),_:1}),l(m,null,{default:o((()=>[r("告")])),_:1})])),_:1}),l(m,{class:"flex-1 pt16"},{default:o((()=>[l(m,{class:"white"},{default:o((()=>[l(g,{class:"f28 fb"},{default:o((()=>[r("￥")])),_:1}),l(g,{class:"f42 fb"},{default:o((()=>[r(A(e.subPrice(s.detail.product_price,"1"))+".",1)])),_:1}),l(g,{class:"f24 fb"},{default:o((()=>[r(A(e.subPrice(s.detail.product_price,"2")),1)])),_:1})])),_:1}),l(m,{class:"old-price"},{default:o((()=>[r("￥"+A(s.detail.product_sku.line_price),1)])),_:1})])),_:1}),l(m,{class:"right-time"},{default:o((()=>[l(k,{activeName:"previewProduct",ref:"countdown",config:{startstamp:s.detail.preview.start_time,endstamp:s.detail.preview.end_time,type:"preview"},start_name:"距开始仅剩",end_name:"距开始仅剩",onReturnVal:h.returnValFunc},null,8,["config","onReturnVal"])])),_:1})])),_:1}),l(m,{class:"bg-white m-0-20 mb20 p20 mt-down-box"},{default:o((()=>[l(m,{class:"f30 gray3"},{default:o((()=>[r(A(s.detail.product_name),1)])),_:1}),s.detail.selling_point?(a(),i(m,{key:0,class:"product-describe"},{default:o((()=>[r(A(s.detail.selling_point),1)])),_:1})):c("",!0),l(m,{class:"border-t d-b-c mt20"},{default:o((()=>[l(y,{class:"flex-1 active-btn d-c-c",onClick:t[0]||(t[0]=e=>h.sendFunc("showShare"))},{default:o((()=>[l(g,{class:"icon iconfont icon-fenxiang3 shoucang-icon"}),l(g,{class:"f28 gray9"},{default:o((()=>[r("分享")])),_:1})])),_:1}),l(y,{class:"flex-1 active-btn d-c-c",onClick:t[1]||(t[1]=e=>h.sendFunc("favorite"))},{default:o((()=>[l(g,{class:u([s.is_fav?"icon-shoucang2 dominant":"icon-shoucang1","icon iconfont shoucang-icon"]),src:"/static/icon/sc.png",mode:""},null,8,["class"]),l(g,{class:u(["f28",s.is_fav?"dominant":"gray9"])},{default:o((()=>[r("收藏")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-a9a4224f"]])},data:()=>({ispresale:!1,statusBarHeight:0,titleBarHeight:0,store_open:1,phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!1,interval:2e3,duration:500,isPopup:!1,product_id:null,detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""}},specData:null,productModel:{},buyNow:!1,url:"",productSpecArr:[],cart_total_num:0,isbottmpanel:!1,isguarantee:!1,isCreatedImg:!1,poster_img:"",isMpservice:!1,alreadyChioce:"",shop_info:"",isfollow:"",shop_supplier_id:"",serverList:"",room_id:"",service_open:1,service_type:0,user_id:0,is_virtual:1,couponList:[],isCoupon:!1,middle:1,isVideoPlay:!1,show_discount:"",discount:{product_coupon:[],give_points:""},activeName:"",activePrice:"",activeText:"",skuName:"",is_preview:0}),onLoad(e){this.GetStatusBarHeight();let t=C.getSceneData(e);this.user_id=H("user_id"),this.room_id=e.room_id,this.product_id=e.product_id?e.product_id:t.gid,this.isWeixin()&&(this.url=window.location.href)},onReady(){this.init(),this.getData()},methods:{GetStatusBarHeight(){const e=S();this.statusBarHeight=e.statusBarHeight,this.titleBarHeight=30},init(){let e=this;y({success(t){e.phoneHeight=t.windowHeight,P().select(".btns-wrap").boundingClientRect((t=>{let s=e.phoneHeight-t.height;e.scrollviewHigh=s})).exec()}})},getData(){let e=this,a=e.product_id;t({title:"加载中"}),e._get("product.product/detail",{product_id:a,url:e.url,visitcode:e.getVisitcode()},(function(t){if(console.log(1==t.data.detail.is_preview&&(new Date).valueOf()/1e3<t.data.detail.preview_time),1==t.data.detail.is_preview&&(new Date).valueOf()/1e3<t.data.detail.preview_time?(e.is_preview=t.data.detail.is_preview,e.activeText="预告",e.activeName="preview",e.activePrice="preview_price",t.data.detail.preview={start_time:(new Date).valueOf()/1e3,end_time:t.data.detail.preview_time}):t.data.detail.advance&&null!=t.data.detail.advance?(e.ispresale=!0,e.activeName="advance",e.activeText="预售",e.activePrice="advance_price",e.skuName="sku"):t.data.detail.secKill&&null!=t.data.detail.secKill&&(e.ispresale=!0,e.activeName="secKill",e.activeText="秒杀",e.activePrice="seckill_price",e.skuName="seckillSku",t.data.detail.secKill.start_time=t.data.detail.secKill.active.start_time,t.data.detail.secKill.end_time=t.data.detail.secKill.active.end_time),e.shop_supplier_id=t.data.detail.supplier.shop_supplier_id,e.shop_info=t.data.detail.supplier,e.isfollow=t.data.detail.isfollow,e.is_virtual=t.data.detail.is_virtual,e.couponList=t.data.couponList,null==t.data.mp_service?e.service_type=10:e.service_type=t.data.mp_service.service_type,e.cart_total_num=t.data.cart_total_num,t.data.detail.content=C.format_content(t.data.detail.content),e.activeName&&"advance"!=e.activeName?t.data.detail[e.activeName].specData&&e.initSpecData(t.data.detail[e.activeName].specData):20==t.data.detail.spec_type&&e.initSpecData(t.data.specData),e.detail=t.data.detail,e.show_discount=t.data.show_discount,e.discount=t.data.discount,""!=e.url){let s={product_id:e.product_id};e.configWx(t.data.share.signPackage,t.data.share.shareParams,s)}e.loadding=!1,s()}))},initSpecData(e){for(let t in e.spec_attr)for(let s in e.spec_attr[t].spec_items)e.spec_attr[t].spec_items[s].checked=!1;this.specData=e,this.specData.spec_attr&&(this.specData.spec_attr.forEach((e=>{this.alreadyChioce+=e.group_name,this.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},openPopup(e){let t={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",price:0,product_sku_id:0,line_price:0,stock:0,product_sku_id:0,sum:1},plus_sku:null,type:e,plus_name:""};"advance"==this.activeName&&(t.plus_sku=this.detail.advance.sku,t.plus_name="advance"),"secKill"==this.activeName&&(t.plus_sku=this.detail.secKill.seckillSku,t.plus_name="seckill"),this.productModel=t,this.isPopup=!0},closePopup(e,t){if(this.isPopup=!1,e&&e.spec_attr){this.alreadyChioce="";let t="已选：",s="";e.spec_attr.forEach((e=>{if(e.spec_items){let a="";for(let t=0;t<e.spec_items.length;t++){let s=e.spec_items[t];if(s.checked){a=s.spec_value+" / ";break}}""!=a?t+=a:s+=e.group_name}})),""!=s?this.alreadyChioce=s:(t=t.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=t)}t&&(this.cart_total_num=t)},lookEvaluate(e){this.gotoPage("/pages/product/detail/look-evaluate/look-evaluate?product_id="+e)},onShareAppMessage(){let e=this,t=e.getShareUrlParams({product_id:e.product_id});return{title:e.detail.product_name,path:"/pages/product/detail/detail?"+t}},goback(){let e=I();console.log(e.length),e.length<=1?this.gotoPage("/pages/index/index"):N()},gotocart(){this.gotoPage("/pages/cart/cart")},closeBottmpanel(e){this.isbottmpanel=!1,2==e.type&&(this.poster_img=e.poster_img,this.isCreatedImg=!0)},closeGuarantee(){this.isguarantee=!1},showGuarantee(){this.isguarantee=!0},showShare(){this.isbottmpanel=!0},hidePopupFunc(){this.isCreatedImg=!1},savePosterImg(){let e=this;t({title:"加载中"}),M({url:e.poster_img,success(t){s(),X({filePath:t.tempFilePath,success(t){v({title:"保存成功",icon:"success",duration:2e3}),e.isCreatedImg=!1},fail(e){"saveImageToPhotosAlbum:fail auth deny"===e.errMsg&&(v({title:"请允许访问相册后重试",icon:"none",duration:1e3}),setTimeout((()=>{uni.openSetting()}),1e3))},complete(e){console.log("complete")}})}})},openCoupon(){this.isCoupon=!this.isCoupon},openService(){10==this.service_type&&(this.isMpservice=!0),20==this.service_type&&this.gotoPage("/pagesPlus/chat/chat?user_id="+this.shop_info.supplier_user_id+"&product_id="+this.product_id+"&shop_supplier_id="+this.shop_info.shop_supplier_id+"&nickName="+this.shop_info.name)},closeMpservice(){this.isMpservice=!1},closeCouponFunc(e){this.isCoupon=!1},goto_shop(){this.gotoPage("/pages/shop/shop?shop_supplier_id="+this.shop_supplier_id)},favorite(){let e=this;e._post("user.Favorite/add",{pid:e.product_id,type:20},(t=>{0==e.isfollow?(v({icon:"none",title:"收藏成功，请到“我的->我的收藏”查看和管理哦"}),e.isfollow=1):1==e.isfollow&&(e.isfollow=0,v({icon:"none",title:"取消成功"}))}))},changeSwiper(){this.isVideoPlay=!1},returnValFunc(e){},sendFunc(e){this[e]()}}},[["render",function(e,t,s,d,y,v){const w=p,C=n,H=F,S=K,P=D,I=x("previewProduct"),N=_,M=x("Countdown"),X=f,T=k,V=x("spec"),E=x("share"),Z=x("guarantee"),Y=x("uniPopup"),j=x("Mpservice"),U=x("coupon");return a(),i(w,{class:u(["product-detail pr",e.theme()||""]),"data-theme":e.theme()},{default:o((()=>[y.loadding?c("",!0):(a(),i(T,{key:0,"scroll-y":"true",class:"scroll-Y scroll-box",style:b("height:"+y.scrollviewHigh+"px;")},{default:o((()=>[l(w,{class:"ww100",style:b("height:"+e.topBarTop()+"px")},null,8,["style"]),l(w,{class:"product-pic"},{default:o((()=>[l(P,{class:"swiper","indicator-active-color":"#ffffff","indicator-color":"rgba(255,255,255,.3)","indicator-dots":y.indicatorDots,autoplay:y.autoplay,interval:y.interval,duration:y.duration,onChange:v.changeSwiper},{default:o((()=>[0!=y.detail.video_id?(a(),i(S,{key:0},{default:o((()=>[y.isVideoPlay?c("",!0):(a(),i(w,{key:0,class:"icon iconfont icon-bofang",onClick:t[0]||(t[0]=e=>y.isVideoPlay=!0)})),y.isVideoPlay?c("",!0):(a(),i(C,{key:1,src:y.detail.poster?y.detail.poster.file_path:y.detail.image[0].file_path,mode:"",onClick:t[1]||(t[1]=e=>y.isVideoPlay=!0)},null,8,["src"])),y.isVideoPlay?(a(),i(H,{key:2,src:y.detail.video.file_path,autoplay:y.isVideoPlay,onClick:t[2]||(t[2]=e=>y.isVideoPlay=!1),class:"video",controls:!1,"show-center-play-btn":!1,"show-play-btn":!1,"enable-progress-gesture":!1,onEnded:t[3]||(t[3]=e=>y.isVideoPlay=!1)},null,8,["src","autoplay"])):c("",!0)])),_:1})):c("",!0),(a(!0),h(g,null,m(y.detail.image,((t,s)=>(a(),i(S,{key:s},{default:o((()=>[l(C,{onClick:t=>e.yulan(y.detail.image,s),src:t.file_path,mode:"aspectFit"},null,8,["onClick","src"])])),_:2},1024)))),128))])),_:1},8,["indicator-dots","autoplay","interval","duration","onChange"])])),_:1}),1==y.is_preview?(a(),h(g,{key:0},[y.loadding?c("",!0):(a(),i(I,{key:0,detail:y.detail,onSend:v.sendFunc,is_fav:e.is_fav},null,8,["detail","onSend","is_fav"]))],64)):c("",!0),y.ispresale?(a(),h(g,{key:1},[l(w,{class:"limited-spike m-0-20"},{default:o((()=>[l(w,{class:"d-s-c mb16"},{default:o((()=>["advance"==y.activeName?(a(),i(w,{key:0,class:"f32"},{default:o((()=>[r(" ￥ "),l(N,{class:"f42 fb"},{default:o((()=>[r(A(e.subPrice(y.detail[y.activeName][y.skuName][0].product_price,"1"))+".",1)])),_:1}),l(N,{class:"f24 fb"},{default:o((()=>[r(A(e.subPrice(y.detail[y.activeName][y.skuName][0].product_price,"2")),1)])),_:1})])),_:1})):(a(),i(w,{key:1,class:"f32"},{default:o((()=>[r(" ￥ "),l(N,{class:"f42 fb"},{default:o((()=>[r(A(e.subPrice(y.detail[y.activeName][y.skuName][0][y.activePrice],"1"))+".",1)])),_:1}),l(N,{class:"f24 fb"},{default:o((()=>[r(A(e.subPrice(y.detail[y.activeName][y.skuName][0][y.activePrice],"2")),1)])),_:1})])),_:1})),"advance"==y.activeName?(a(),i(w,{key:2,class:"tips-box"},{default:o((()=>[r(" 预估到手价￥"+A((1*y.detail[y.activeName][y.skuName][0].product_price-1*y.detail[y.activeName][y.skuName][0][y.activePrice]).toFixed(2)),1)])),_:1})):c("",!0)])),_:1}),"advance"==y.activeName?(a(),i(N,{key:0,class:"left-name"},{default:o((()=>[r("定金¥"+A(y.detail[y.activeName].money)+" (尾款立减¥"+A(y.detail[y.activeName][y.skuName][0][y.activePrice])+")",1)])),_:1})):c("",!0),l(w,{class:"right-time"},{default:o((()=>[l(w,{class:"d-e-c mb16"},{default:o((()=>[r(A(y.activeText)+" ",1),l(C,{class:"jiantou",src:"/h5/static/icon/jiantou-white.png",mode:""})])),_:1}),l(M,{ref:"countdown",config:{startstamp:y.detail[y.activeName].start_time,endstamp:y.detail[y.activeName].end_time},onReturnVal:v.returnValFunc},null,8,["config","onReturnVal"])])),_:1})])),_:1}),l(w,{class:"bg-white m-0-20 mb20 p20 mt-down-box"},{default:o((()=>[l(w,{class:"f30 gray3"},{default:o((()=>[r(A(y.detail.product_name),1)])),_:1}),y.detail.selling_point?(a(),i(w,{key:0,class:"product-describe"},{default:o((()=>[r(A(y.detail.selling_point),1)])),_:1})):c("",!0),"advance"==y.activeName?(a(),i(w,{key:1,class:"product-presale"},{default:o((()=>[l(w,{class:"d-b-s"},{default:o((()=>[l(w,{class:"gray3 f24",style:{width:"100rpx"}},{default:o((()=>[r("尾款：")])),_:1}),l(w,{class:"flex-1"},{default:o((()=>[l(w,{class:"f24 redF11"},{default:o((()=>[r(" ￥"+A((1*y.detail[y.activeName][y.skuName][0].product_price-1*y.detail[y.activeName][y.skuName][0][y.activePrice]).toFixed(2)),1)])),_:1}),l(w,{class:"gray9 f24"},{default:o((()=>[r(" ("+A(y.detail[y.activeName].active_time[0])+"-"+A(y.detail[y.activeName].active_time[1])+") ",1)])),_:1})])),_:1})])),_:1}),l(w,{class:"d-b-s"},{default:o((()=>[l(w,{class:"gray3 f24",style:{width:"100rpx"}},{default:o((()=>[r("流程：")])),_:1}),l(w,{class:"flex-1 gray6 f24"},{default:o((()=>[r("1.付定金-2.付尾款-3.发货")])),_:1})])),_:1})])),_:1})):c("",!0)])),_:1})],64)):c("",!0),y.ispresale||1==y.is_preview?c("",!0):(a(),i(w,{key:2,class:"bg-white p30 mb22"},{default:o((()=>[l(w,{class:"price-wrap"},{default:o((()=>[l(w,{class:"d-s-s d-c ww100"},{default:o((()=>[l(w,{class:"d-s-c pr ww100 mb16"},{default:o((()=>[l(w,{class:"new-price theme-price"},{default:o((()=>[y.detail.is_user_grade?(a(),i(N,{key:0,class:"fn mr10"},{default:o((()=>[r("会员价")])),_:1})):c("",!0),l(N,null,{default:o((()=>[r("¥")])),_:1}),l(N,{class:"num"},{default:o((()=>[r(A(y.detail.product_sku.product_price),1)])),_:1}),20==y.detail.spec_type&&y.detail.product_sku.product_price!=y.detail.product_max_price?(a(),i(N,{key:1,class:"num"},{default:o((()=>[r(" -"+A(y.detail.product_max_price),1)])),_:1})):c("",!0)])),_:1}),l(w,{class:"share-box"},{default:o((()=>[l(X,{onClick:v.showShare},{default:o((()=>[l(C,{class:"share_img",src:"data:image/png;base64,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",mode:""}),l(N,{class:"f22"},{default:o((()=>[r("分享")])),_:1})])),_:1},8,["onClick"])])),_:1}),l(w,{class:"sc-box"},{default:o((()=>[l(X,{onClick:t[4]||(t[4]=e=>v.favorite())},{default:o((()=>[l(C,{class:u([y.isfollow?"":"img_gray","share_img"]),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAz1BMVEUAAADYHgbYHgXZHgXYHgbYHgXYHQXZHgbZHQXYHgXZHgbXHgXZHgbYHQbZHgbZHgXYHgbaHgXXHAXYHgbZHgXYHgXYHgXYHgXZHgXYHgbYHQXXHgPZHgXYHgXaHgXYHgXZHgXaHwXYHQXYHgXYHgXZHgbYHQXZHgbZHgXZHQXYHgbYHQbZHQXZHQXcHAbbHQTWHwXVHQTXHAbYHgbaHQbYHgXVHgbZHQXHFATZHAXTGgTYHgbmEgTqEgPYHgbXHgbZHQbYHQbbHwbUIQfXIwedA0SiAAAAPnRSTlMA9O8E3QzCFOOv+WJCoFOqnHQ7CZR7b1ino5k12saITUYP1865tbKQgH5rZ15bSjAsGO7n0cCMgycfgMh2VWFE8NAAAAKzSURBVFjD7ddpV+IwFIDhi7i0ZS0WUJBVUXEBXGDEmbmhOP//N02TlF7gNJaUfJkzvJ8g5TwnXVPg0KH/oXz7p4Nhx6VcD6jzonctxjPNaKzLkNXV2svwCjc78iYgm3++RaO3sOqK/yar8oYZjKnwwmfnOUsaKkFY1uITPlPsbB+pxfosn6FrbUx7HIHH/Gs8+COirEGjmqu1L68jIfzEEK9uPfeJA4ngBcqsWf4cwia1Fq73XqWzkQQWQs4VGlVsEZej4USwupDHP+KoGsruaSgZ7MijN4S4Km+IvlMEDbDn8AmyDsR3dpuZThTbBNjbHi2L+eVA2UnMGF3Yr9uDc86xGexc3W6dyqb8VnBOw1o3D8CbBYNflsbt7qOqRZ0f2CMOjnYHPTXo28H2EQs+9WH3npgSZC4/JX4w1Rpo1LYyq4QdfTtqZMMzz15Aq5Ownrhs5quv8r7g3jvoR5fN1vNQ3HO6kPpOkTO8Nwz6rmHw65fpXR4aBvHO9DG8Af1o1du6iDMBaEHKOOhsPefFqjFOCT7ELA4ef+xUIWXFQm57KC9eY8BgFhfrBsEqB98Mgj2x5pUNip+ByNhvSNWH6igu/jRBv/E19mPIJgYtMx/aXsXxcdHPxrzLMS6+TrQ95NGdQtn8vCydsZ6HogbENUVOOk19b6DYfKMr5ukFXiUKsqLnDUDdAEUVHc+G77J3n2OXvGTRz+/rUSWGvCRxRF5SF1Lswnd16P9UciW516MEj+a36xw76oe+xvxEl/JcF814JGJxX48qMFQtM3XpXYBeZRQ9a3r64jN5unlyrzcX8SfpXUKa7pDEvTwS5Rwfo4EceelqS/Fh0ytA+tq4Jj7u5dFayKvt61H3obja37KB9yiRTZ4Zkbz9cyOvAWZyyTMlkmeoGqN/RmZ6tF049C/3Fy/V3099sTbQAAAAAElFTkSuQmCC",mode:""},null,8,["class"]),l(N,{class:u(["f22",y.isfollow?"red":"gray3"])},{default:o((()=>[r("收藏")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),l(w,null,{default:o((()=>[l(N,{class:"old-price mr16"},{default:o((()=>[r("¥"+A(y.detail.product_sku.line_price),1)])),_:1}),l(N,{class:"already-sale"},{default:o((()=>[r("已售"+A(y.detail.product_sales)+"件",1)])),_:1})])),_:1})])),_:1})])),_:1}),l(w,{class:"product-name text-ellipsis-2"},{default:o((()=>[20==y.detail.supplier.store_type?(a(),i(w,{key:0,class:"store_type"},{default:o((()=>[r("自营")])),_:1})):c("",!0),r(" "+A(y.detail.product_name),1)])),_:1}),y.detail.selling_point?(a(),i(w,{key:0,class:"product-describe"},{default:o((()=>[r(A(y.detail.selling_point),1)])),_:1})):c("",!0)])),_:1})),y.show_discount?(a(),i(w,{key:3,class:"o-h p-0-30 bg-white mb21 pb44"},{default:o((()=>[l(w,{class:"already-choice",onClick:t[5]||(t[5]=e=>v.openCoupon())},{default:o((()=>[l(w,{class:"group-hd d-b-s",style:{height:"auto"}},{default:o((()=>[l(w,{class:"left"},{default:o((()=>[l(N,{class:"min-name gray3"},{default:o((()=>[r("优惠：")])),_:1})])),_:1})])),_:1}),l(w,{class:"d-b-c"},{default:o((()=>[l(w,{class:"flex-1"},{default:o((()=>[y.discount.give_points>0?(a(),i(w,{key:0,class:"pb20 line-h-50 f26 gray3"},{default:o((()=>[l(N,{class:"text-box"},{default:o((()=>[r("返"+A(e.points_name()),1)])),_:1}),r(" 商城购物返"+A(e.points_name())+"，订单完成后最高返"+A(y.discount.give_points)+A(e.points_name()),1)])),_:1})):c("",!0),y.discount.product_coupon.length>0?(a(),i(w,{key:1,class:"flex-1 d-b-c"},{default:o((()=>[l(w,{class:"f26 gray3 line-h-50 pb20 flex-1"},{default:o((()=>[l(w,{class:"d-b-c"},{default:o((()=>[l(N,{class:"text-box"},{default:o((()=>[r("领券")])),_:1}),l(w,{class:"flex-1 text-coupon-list"},{default:o((()=>[(a(!0),h(g,null,m(y.discount.product_coupon,((e,t)=>(a(),h(g,{key:t},[t<=2?(a(),i(w,{key:0,class:"ml20 text-coupon-box"},{default:o((()=>[l(w,{class:"text-coupon-left"}),l(w,{class:"text-coupon"},{default:o((()=>[r(A(e.name),1)])),_:2},1024),l(w,{class:"text-coupon-right"})])),_:2},1024)):c("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0)])),_:1}),l(w,null,{default:o((()=>[l(N,{class:"icon iconfont icon-jiantou",style:{color:"#999999","font-size":"22rpx"}})])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0),l(w,{class:"o-h p-0-30 bg-white mb21"},{default:o((()=>[20==y.detail.spec_type?(a(),i(w,{key:0,class:u(["already-choice",""!=y.detail.server?"border-b-d9":""]),onClick:t[6]||(t[6]=e=>v.openPopup(y.ispresale?"deposit":"order"))},{default:o((()=>[l(w,{class:"group-hd"},{default:o((()=>[l(w,{class:"left"},{default:o((()=>[l(N,{class:"min-name gray9"},{default:o((()=>[r("选择：")])),_:1})])),_:1}),l(w,{class:"flex-1 p-0-20 center-content f28 text-ellipsis o-h"},{default:o((()=>[r(A(y.alreadyChioce),1)])),_:1}),l(w,{class:"right"},{default:o((()=>[l(N,{class:"icon iconfont icon-jiantou",style:{"font-size":"22rpx",color:"#9A9A9A"}})])),_:1})])),_:1})])),_:1},8,["class"])):c("",!0)])),_:1}),l(w,{class:"product-comment"},{default:o((()=>[l(w,{class:"p-0-30 d-b-c"},{default:o((()=>[l(w,{class:"group-hd left"},{default:o((()=>[l(N,{class:"min-name f28"},{default:o((()=>[r("评价("+A(y.detail.comment_data_count)+")",1)])),_:1})])),_:1}),l(w,{class:"right",onClick:t[7]||(t[7]=e=>v.lookEvaluate(y.detail.product_id))},{default:o((()=>[l(N,{class:"more"},{default:o((()=>[r("查看全部")])),_:1}),l(N,{class:"icon iconfont icon-jiantou",style:{"font-size":"22rpx",color:"#9A9A9A"}})])),_:1})])),_:1}),y.detail.comment_data_count>0?(a(),i(w,{key:0,class:"comment-list"},{default:o((()=>[e.index<=1?(a(!0),h(g,{key:0},m(y.detail.commentData,((e,t)=>(a(),i(w,{class:"item",key:t},{default:o((()=>[l(w,{class:"cmt-user"},{default:o((()=>[l(w,{class:"left"},{default:o((()=>[l(C,{class:"photo",src:e.user.avatarUrl,mode:"aspectFill"},null,8,["src"]),l(N,{class:"name"},{default:o((()=>[r(A(e.user.nickName),1)])),_:2},1024)])),_:2},1024),l(N,{class:"datetime"},{default:o((()=>[r(A(e.create_time),1)])),_:2},1024)])),_:2},1024),l(w,{class:"mt20 lh150 f24"},{default:o((()=>[r(A(e.content),1)])),_:2},1024)])),_:2},1024)))),128)):c("",!0)])),_:1})):c("",!0)])),_:1}),y.store_open?(a(),i(w,{key:4,class:"shop_head_info"},{default:o((()=>[l(w,{class:"shop_list_body_item_shop"},{default:o((()=>[l(w,{class:"shop_list_body_item_shop_logo"},{default:o((()=>[l(C,{src:y.shop_info.logos,mode:""},null,8,["src"])])),_:1}),l(w,{class:"shop_list_body_item_shop_info flex-1"},{default:o((()=>[l(w,{class:"f32 title fb"},{default:o((()=>[r(A(y.shop_info.name),1)])),_:1}),l(w,{class:"f26 brand gray9"},{default:o((()=>[r("主营品牌： "+A(y.shop_info.category_name),1)])),_:1}),l(w,{class:"f26 sales gray9"},{default:o((()=>[r("销量："+A(y.shop_info.product_sales)+"件",1)])),_:1})])),_:1}),l(w,{class:"shop_list_body_item_shop_others"},{default:o((()=>[l(w,{class:"f26 collect"},{default:o((()=>[r(" 商户评分： "),l(N,{class:"fb"},{default:o((()=>[r(A(y.shop_info.server_score),1)])),_:1})])),_:1}),l(X,{class:"theme-borderbtn",onClick:t[8]||(t[8]=e=>v.goto_shop())},{default:o((()=>[r("进店看看")])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0),l(w,{class:"product-content"},{default:o((()=>[l(w,{class:"p-0-30 border-b-e"},{default:o((()=>[l(w,{class:"group-hd d-s-c"},{default:o((()=>[l(N,{class:"min-name f28"},{default:o((()=>[r("商品介绍")])),_:1})])),_:1})])),_:1}),0==y.detail.is_picture?(a(),i(w,{key:0,class:"content-box",innerHTML:y.detail.content},null,8,["innerHTML"])):c("",!0),1==y.detail.is_picture?(a(),i(w,{key:1,class:"content-box"},{default:o((()=>[(a(!0),h(g,null,m(y.detail.contentImage,((e,t)=>(a(),i(w,{class:"ww100",key:t},{default:o((()=>[l(C,{class:"ww100",src:e.file_path,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})):c("",!0)])),_:1}),l(w,{class:"sage-bottom"})])),_:1},8,["style"])),l(w,{class:"btns-wrap"},{default:o((()=>[l(w,{class:"icon-box d-c-c",onClick:t[9]||(t[9]=t=>e.gotoPage("/pages/index/index"))},{default:o((()=>[l(X,{class:"d-c-c d-c bg-white"},{default:o((()=>[l(N,{class:"btn_btom pr icon iconfont icon-Homehomepagemenu gray3",style:{height:"50rpx","line-height":"60rpx"}}),l(N,{class:"f22 gray3",style:{height:"50rpx","line-height":"40rpx"}},{default:o((()=>[r("首页")])),_:1})])),_:1})])),_:1}),l(w,{class:"icon-box d-c-c",onClick:t[10]||(t[10]=t=>e.gotoPage("/pages/cart/cart"))},{default:o((()=>[l(X,{class:"pr d-c-c d-c bg-white"},{default:o((()=>[l(N,{class:"gray3 icon iconfont icon-gouwuche1",style:{"font-size":"36rpx",height:"50rpx","line-height":"60rpx"}}),l(N,{class:"f22 gray3",style:{height:"50rpx","line-height":"40rpx"}},{default:o((()=>[r("购物车")])),_:1}),y.cart_total_num>0?(a(),i(N,{key:0,class:"cart_num"},{default:o((()=>[r(A(y.cart_total_num),1)])),_:1})):c("",!0)])),_:1})])),_:1}),y.service_open?(a(),i(w,{key:0,class:"icon-box d-c-c",onClick:v.openService},{default:o((()=>[l(X,{class:"d-c-c d-c bg-white"},{default:o((()=>[l(N,{class:"icon iconfont icon-kefu2 gray3",style:{height:"50rpx","line-height":"60rpx"}}),l(N,{class:"f22 gray3",style:{height:"50rpx","line-height":"40rpx"}},{default:o((()=>[r("客服")])),_:1})])),_:1})])),_:1},8,["onClick"])):c("",!0),1==y.is_preview?(a(),i(X,{key:1,class:"add-cart-no",style:{"border-radius":"40rpx","margin-right":"20rpx"}},{default:o((()=>[r("暂未开始售卖")])),_:1})):(a(),h(g,{key:2},[1!=!y.room_id||y.is_virtual||y.ispresale?(a(),i(X,{key:1,class:"add-cart-no"},{default:o((()=>[r("加入购物车")])),_:1})):(a(),i(X,{key:0,class:"add-cart",onClick:t[11]||(t[11]=e=>v.openPopup("card"))},{default:o((()=>[r("加入购物车")])),_:1})),l(X,{class:"buy",onClick:t[12]||(t[12]=e=>v.openPopup("order"))},{default:o((()=>[r("立即购买")])),_:1})],64))])),_:1}),l(V,{isPopup:y.isPopup,productModel:y.productModel,onClose:v.closePopup,room_id:y.room_id},null,8,["isPopup","productModel","onClose","room_id"]),l(E,{isbottmpanel:y.isbottmpanel,product_id:y.product_id,onClose:v.closeBottmpanel},null,8,["isbottmpanel","product_id","onClose"]),l(Z,{isguarantee:y.isguarantee,server:y.detail.server,onClose:v.closeGuarantee},null,8,["isguarantee","server","onClose"]),l(Y,{show:y.isCreatedImg,type:"middle",onHidePopup:v.hidePopupFunc},{default:o((()=>[l(w,{class:"d-c-c d-c create-img"},{default:o((()=>[l(C,{src:y.poster_img,mode:"widthFix"},null,8,["src"]),l(w,{class:"mt20 f34 red",type:"default"},{default:o((()=>[r("长按保存图片")])),_:1})])),_:1})])),_:1},8,["show","onHidePopup"]),y.isMpservice?(a(),i(j,{key:1,isMpservice:y.isMpservice,shopSupplierId:y.shop_supplier_id,onClose:v.closeMpservice},null,8,["isMpservice","shopSupplierId","onClose"])):c("",!0),l(U,{isCoupon:y.isCoupon,discount:y.discount,couponList:y.discount.product_coupon,onClose:v.closeCouponFunc},null,8,["isCoupon","discount","couponList","onClose"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-3cfac849"]]);export{U as default};
