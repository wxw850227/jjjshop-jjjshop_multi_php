import{_ as t,J as o,o as s,c as a,w as l,h as e,d as i,g as d,r as _,F as c,e as r,u as p,k as n,l as u,S as g,t as h,i as f,j as m}from"./index-73db7405.js";import{u as y}from"./uni-load-more.e615c410.js";const w=t({components:{uniLoadMore:y},data:()=>({loading:!0,no_more:!1,scrollviewHigh:"",product_list:[],page:1,last_page:"",isfollow:""}),computed:{loadingType(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onShow(){this.init(),this.getData()},methods:{init(){let t=this;t.page=1,t.product_list=[],o({success(o){t.scrollviewHigh=o.windowHeight}})},getData(){let t=this;t.loading=!0,t._post("user.Favorite/list",{page:t.page,type:20,list_rows:15},(o=>{t.loading=!1,t.last_page=o.data.list.last_page,t.product_list=t.product_list.concat(o.data.list.data),o.data.list.last_page<=1?t.no_more=!0:t.no_more=!1}))},scrolltolowerFunc(){let t=this;t.no_more||(t.page++,t.page<=t.last_page?t.getData():t.no_more=!0)},goto_product(t){this.gotoPage("pages/product/detail/detail?product_id="+t)},guanzhu(t){let o=this;o.page=1,o.loading=!0,o._post("user.Favorite/add",{pid:t,type:20},(t=>{o.loading=!1,o._post("user.Favorite/list",{page:o.page,type:20,list_rows:15},(t=>{o.product_list=t.data.list.data}))}))}}},[["render",function(t,o,y,w,k,b){const v=f,C=e,F=n,j=m,T=u("uni-load-more"),x=g;return s(),a(C,{class:"shop_body"},{default:l((()=>[i(x,{"scroll-y":"true",style:p("height:"+k.scrollviewHigh+"px;"),class:"scroll-Y","lower-threshold":"50",onScrolltolower:b.scrolltolowerFunc},{default:l((()=>[(s(!0),d(c,null,_(k.product_list,((t,o)=>(s(),a(C,{class:"shop_body_l_item",key:o},{default:l((()=>[i(v,{src:t.product_image,onClick:o=>b.goto_product(t.product_id)},null,8,["src","onClick"]),i(C,{class:"shop_body_l_item_info",onClick:o=>b.goto_product(t.product_id)},{default:l((()=>[i(C,{class:"shop_body_l_item_info_title h1"},{default:l((()=>[r(h(t.product_name),1)])),_:2},1024),i(C,{class:"shop_body_l_item_info_price"},{default:l((()=>[i(C,{class:"h2 red"},{default:l((()=>[r("¥"),i(F,{class:"h1"},{default:l((()=>[r(h(t.product_price),1)])),_:2},1024)])),_:2},1024),i(C,{class:"h4 huaxianjia"},{default:l((()=>[r("¥"),i(F,{class:"h3"},{default:l((()=>[r(h(t.line_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(C,{class:"shop_body_l_item_info_others h3"},{default:l((()=>[i(C,{class:"shop_body_l_item_info_others_sales"},{default:l((()=>[r("累计销量："+h(t.product_sales)+"件",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),i(j,{type:"default",onClick:o=>b.guanzhu(t.product_id)},{default:l((()=>[r("取消关注")])),_:2},1032,["onClick"])])),_:2},1024)))),128)),0!=k.product_list.length||k.loading?(s(),a(T,{key:1,loadingType:b.loadingType},null,8,["loadingType"])):(s(),a(C,{key:0,class:"d-c-c p30"},{default:l((()=>[i(F,{class:"iconfont icon-wushuju"}),i(F,{class:"cont"},{default:l((()=>[r("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-d2e7cd57"]]);export{w as default};
