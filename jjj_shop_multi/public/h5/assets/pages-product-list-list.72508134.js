import{_ as t,J as e,K as s,o as a,c as o,w as l,h as i,d as c,n as r,e as _,u as d,g as p,r as n,F as h,f as u,k as f,I as g,i as y,l as m,S as b,t as w}from"./index-73db7405.js";import{u as x}from"./uni-load-more.e615c410.js";const D=t({components:{uniLoadMore:x},data:()=>({isLieBiao:!0,phoneHeight:0,scrollviewHigh:0,topRefresh:!1,loading:!0,no_more:!1,type_active:0,price_top:!1,listData:[],page:1,category_id:0,search:"",sortType:"",sortPrice:0,list_rows:10,last_page:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad(t){this.category_id=t.category_id,t.search&&(this.search=t.search),t.sortType&&(this.sortType=t.sortType),t.sortPrice&&(this.sortPrice=t.sortPrice)},mounted(){this.init(),this.getData()},onPullDownRefresh(){this.restoreData(),this.getData()},methods:{searchFunc(){this.listData=[],this.page=1,this.getData()},init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,s().select(".top-box").boundingClientRect((e=>{let s=t.phoneHeight-e.height;t.scrollviewHigh=s})).exec()}})},restoreData(){this.listData=[],this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},tabTypeFunc(t){let e=this;e.listData=[],e.page=1,e.no_more=!1,e.loading=!0,2==t?(e.price_top=!this.price_top,1==e.price_top?e.sortPrice=0:e.sortPrice=1,e.sortType="price"):1==t&&(e.price_top=!this.price_top,e.sortType="sales"),e.type_active=t,console.log(e.type_active),e.getData()},getData(){let t=this,e=t.page,s=t.list_rows,a=t.category_id,o=t.search,l=t.sortType,i=t.sortPrice;t.loading=!0,t._get("product.product/lists",{page:e||1,category_id:a,search:o,sortType:l,sortPrice:i,list_rows:s},(function(e){t.loading=!1,t.listData=t.listData.concat(e.data.list.data),t.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){let e="pages/product/detail/detail?product_id="+t;this.gotoPage(e)},gotoSearch(){self.gotoPage("/pages/product/search/search")},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()},select_type(){this.isLieBiao=!this.isLieBiao},onShareAppMessage(){return{title:"全部分类",path:"/pages/product/category?"+this.getShareUrlParams()}}}},[["render",function(t,e,s,x,D,v){const T=f,k=g,P=i,L=y,C=m("uni-load-more"),F=b;return a(),o(P,null,{default:l((()=>[c(P,{class:"top-box"},{default:l((()=>[c(P,{class:"index-search-box index-search-box_re d-b-c",id:"searchBox"},{default:l((()=>[c(P,{class:"index-search index-search_re t-c flex-1"},{default:l((()=>[c(T,{class:"icon iconfont icon-sousuo"}),c(k,{type:"text",modelValue:D.search,"onUpdate:modelValue":e[0]||(e[0]=t=>D.search=t),class:"flex-1 ml10 f26 gray3","placeholder-class":"f26 gray9",placeholder:"搜索商品","confirm-type":"search",onConfirm:e[1]||(e[1]=t=>v.searchFunc())},null,8,["modelValue"])])),_:1})])),_:1}),c(P,{class:"inner-tab"},{default:l((()=>[c(P,{class:r(0==D.type_active?"item active":"item"),onClick:e[2]||(e[2]=t=>v.tabTypeFunc(0))},{default:l((()=>[c(P,{class:"box"},{default:l((()=>[_("综合")])),_:1})])),_:1},8,["class"]),c(P,{class:r(1==D.type_active?"item active":"item"),onClick:e[3]||(e[3]=t=>v.tabTypeFunc(1))},{default:l((()=>[c(P,{class:"box"},{default:l((()=>[_("销量")])),_:1})])),_:1},8,["class"]),c(P,{class:r(2==D.type_active?"item active":"item"),onClick:e[4]||(e[4]=t=>v.tabTypeFunc(2))},{default:l((()=>[c(P,{class:"box"},{default:l((()=>[c(T,null,{default:l((()=>[_("价格")])),_:1}),c(P,{class:"arrows"},{default:l((()=>[c(P,{class:r(D.price_top&&2==D.type_active?"arrow active":"arrow")},{default:l((()=>[c(T,{class:"icon iconfont icon-sanjiao2"})])),_:1},8,["class"]),c(P,{class:r(D.price_top||2!=D.type_active?"arrow":"arrow active")},{default:l((()=>[c(T,{class:"icon iconfont icon-sanjiao1"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["class"]),c(P,{class:"item",onClick:e[5]||(e[5]=t=>v.select_type())},{default:l((()=>[c(P,{class:"box",style:{height:"100%"}},{default:l((()=>[c(L,{style:{width:"36rpx",height:"36rpx"},src:1==D.isLieBiao?"/static/shop/liebiao.png":"/static/shop/tubiao.png"},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),c(P,{class:"prodcut-list-wrap"},{default:l((()=>[c(F,{"scroll-y":"true",class:"scroll-Y",style:d("height:"+D.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:v.scrolltolowerFunc},{default:l((()=>[c(P,{class:r(D.topRefresh?"top-refresh open":"top-refresh")},{default:l((()=>[(a(),p(h,null,n(3,((t,e)=>c(P,{class:"circle",key:e}))),64))])),_:1},8,["class"]),1==D.isLieBiao?(a(),o(P,{key:0,class:"shop_body"},{default:l((()=>[(a(!0),p(h,null,n(D.listData,((t,e)=>(a(),o(P,{class:r(["shop_body_l_item",e==D.listData.length-1?"noborder":""]),key:e,onClick:e=>v.gotoList(t.product_id)},{default:l((()=>[c(P,null,{default:l((()=>[c(L,{src:t.product_image,mode:""},null,8,["src"])])),_:2},1024),c(P,{class:"shop_body_l_item_info"},{default:l((()=>[c(P,{class:"shop_body_l_item_info_title gray3 f32"},{default:l((()=>[_(w(t.product_name),1)])),_:2},1024),c(P,{class:"d-b-c pb10"},{default:l((()=>[c(P,{class:"shop_body_l_item_info_price"},{default:l((()=>[c(P,{class:"f24 shop_red"},{default:l((()=>[_("¥"),c(T,{class:"f32 fb"},{default:l((()=>[_(w(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(P,{class:"shop_body_l_item_info_others f22"},{default:l((()=>[c(P,{class:"shop_body_l_item_info_others_sales"},{default:l((()=>[_("累计成交："+w(t.product_sales)+"笔",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):u("",!0),0==D.isLieBiao?(a(),o(P,{key:1,class:"shop_body2"},{default:l((()=>[(a(!0),p(h,null,n(D.listData,((t,e)=>(a(),o(P,{class:r(["shop_body_t_item",e%2==0?"ml20 mr20":" mr20"]),key:e,onClick:e=>v.gotoList(t.product_id)},{default:l((()=>[c(L,{src:t.product_image,mode:""},null,8,["src"]),c(P,{class:"shop_body_t_item_info"},{default:l((()=>[c(P,{class:"shop_body_t_item_info_title f26"},{default:l((()=>[_(w(t.product_name),1)])),_:2},1024),c(P,{class:"shop_body_t_item_info_others f24 gray9 mt"},{default:l((()=>[c(P,{class:"shop_body_t_item_info_others_sales"},{default:l((()=>[_("累计成交："+w(t.product_sales)+"笔",1)])),_:2},1024)])),_:2},1024),c(P,{class:"shop_body_t_item_info_price"},{default:l((()=>[c(P,{class:"f20 redF6"},{default:l((()=>[_("¥"),c(T,{class:"f32"},{default:l((()=>[_(w(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):u("",!0),0!=D.listData.length||D.loading?(a(),o(C,{key:3,loadingType:v.loadingType},null,8,["loadingType"])):(a(),o(P,{key:2,class:"d-c-c p30"},{default:l((()=>[c(T,{class:"iconfont icon-wushuju"}),c(T,{class:"cont"},{default:l((()=>[_("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})])),_:1})}],["__scopeId","data-v-48dabdf3"]]);export{D as default};
