import{_ as e,ad as o,ae as t,A as a,z as i,af as s,B as n,o as l,c,h as u}from"./index-73db7405.js";const m=e({data:()=>({imageList:[]}),props:["num","isVideo"],onLoad(){},mounted(){this.chooseImageFunc()},methods:{chooseImageFunc(){let e=this;this.isVideo?o({maxDuration:60,camera:"back",success:o=>{if(console.log(o),o){let t=[];t.push(o.tempFilePath),console.log(t),e.uploadFile(t)}},fail(o){console.log(o),e.$emit("getImgs",null)}}):t({count:e.num||9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(o){e.uploadFile(o.tempFilePaths)},fail:function(o){e.$emit("getImgs",null)},complete:function(e){}})},uploadFile:function(e){let o=this,t=0,l=e.length,c={token:a("token"),app_id:o.getAppId(),file_type:o.isVideo?"video":"image"};i({title:"上传中"}),e.forEach((function(e,a){s({url:o.websiteUrl+"/index.php?s=/api/file.upload/image",filePath:e,name:"iFile",formData:c,success:function(e){let t="object"==typeof e.data?e.data:JSON.parse(e.data);if(-1===t.code)return console.log("登录态失效, 重新登录"),void o.doLogin();1===t.code&&o.imageList.push(t.data)},complete:function(){t++,l===t&&(n(),o.$emit("getImgs",o.imageList))}})}))}}},[["render",function(e,o,t,a,i,s){const n=u;return l(),c(n)}]]);export{m as default};
