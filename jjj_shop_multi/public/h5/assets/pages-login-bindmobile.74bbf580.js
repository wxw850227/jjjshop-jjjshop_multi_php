import{_ as s,L as e,z as a,B as t,M as o,o as n,c as i,w as l,h as d,d as c,e as r,j as u}from"./index-73db7405.js";const _=s({data:()=>({sessionKey:""}),onLoad(){let s=this;e({success(e){s._post("user.user/getSession",{code:e.code},(e=>{s.sessionKey=e.data.session_key}))}})},methods:{onNotLogin:function(){this.gotoPage("/pages/index/index")},getPhoneNumber(s){var n=this;if(console.log(s.detail),"getPhoneNumber:ok"!==s.detail.errMsg)return!1;a({title:"正在处理",mask:!0}),e({success(e){n._post("user.user/bindMobile",{session_key:n.sessionKey,encrypted_data:s.detail.encryptedData,iv:s.detail.iv},(s=>{t(),o()}),!1,(()=>{t()}))}})}}},[["render",function(s,e,a,t,o,_){const g=d,f=u;return n(),i(g,{class:"login-container"},{default:l((()=>[c(g,{class:"wechatapp"},{default:l((()=>[c(g,{class:"header"})])),_:1}),c(g,{class:"auth-title"},{default:l((()=>[r("申请获取以下权限")])),_:1}),c(g,{class:"auth-subtitle"},{default:l((()=>[r("为了为您提供更优质的服务，我们需要获得你的手机号")])),_:1}),c(g,{class:"login-btn"}),c(g,{class:"no-login-btn"},{default:l((()=>[c(f,{class:"btn-normal",onClick:_.onNotLogin},{default:l((()=>[r("暂不授权")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-562e4517"]]);export{_ as default};
