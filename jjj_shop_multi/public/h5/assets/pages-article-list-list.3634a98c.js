import{_ as t,J as a,K as e,z as l,B as s,o as i,c as o,w as c,n,h as r,d,e as g,g as u,r as _,F as h,u as p,S as m,k as y,l as f,t as w,f as b,i as v}from"./index-73db7405.js";import{u as D}from"./uni-load-more.e615c410.js";const k=t({components:{uniLoadMore:D},data:()=>({loading:!0,phoneHeight:0,scrollviewHigh:0,listData:[],no_more:null,list_rows:10,page:1,categorys:[],type_active:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},mounted(){this.init(),this.getCategory(),this.getData()},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,e().select(".top-tabbar").boundingClientRect((a=>{let e=t.phoneHeight-a.height;t.scrollviewHigh=e})).exec()}})},getCategory(){let t=this;t._get("plus.article.article/category",{},(function(a){t.categorys=a.data.category}))},tabTypeFunc(t){t!=this.type_active&&(this.type_active=t,this.page=1,this.listData=[],this.getData())},getData(){let t=this,a=t.page,e=t.list_rows;t.loading=!0,l({title:"加载中"}),t._get("plus.article.article/index",{page:a||1,list_rows:e,category_id:t.type_active},(function(a){t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(t.no_more=!0),t.loading=!1,s()}))},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()},gotoDetail(t){this.gotoPage("/pages/article/detail/detail?article_id="+t)}}},[["render",function(t,a,e,l,s,D){const k=r,C=m,T=y,F=v,H=f("uni-load-more"),x=f("tabBar");return i(),o(k,{"data-theme":t.theme(),class:n([t.theme()||"","article-list-wrap"])},{default:c((()=>[d(k,{class:"top-tabbar"},{default:c((()=>[d(C,{"scroll-x":"true","scroll-with-animation":"true"},{default:c((()=>[d(k,{class:"type-list d-s-c"},{default:c((()=>[d(k,{class:n(0==s.type_active?"tab-item  active":"tab-item "),onClick:a[0]||(a[0]=t=>D.tabTypeFunc(0))},{default:c((()=>[g(" 全部 ")])),_:1},8,["class"]),(i(!0),u(h,null,_(s.categorys,((t,a)=>(i(),o(k,{class:n(s.type_active==t.category_id?"tab-item  active":"tab-item "),key:a,onClick:a=>D.tabTypeFunc(t.category_id)},{default:c((()=>[g(w(t.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),d(C,{"scroll-y":"true",class:"scroll-Y",style:p("height:"+s.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:D.scrolltolowerFunc},{default:c((()=>[d(k,{class:"article-list"},{default:c((()=>[(i(!0),u(h,null,_(s.listData,((t,a)=>(i(),o(k,{class:"item",key:a,onClick:a=>D.gotoDetail(t.article_id)},{default:c((()=>[d(k,{class:"info"},{default:c((()=>[d(k,{class:"title"},{default:c((()=>[g(w(t.article_title),1)])),_:2},1024),d(k,{class:"summary"},{default:c((()=>[g(w(t.dec),1)])),_:2},1024),d(k,{class:"datatime d-s-c"},{default:c((()=>[d(T,null,{default:c((()=>[g(w(t.create_time),1)])),_:2},1024),d(T,{class:"icon iconfont icon-chakan ml30"}),d(T,{class:"ml10"},{default:c((()=>[g(w(t.actual_views),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),null!=t.image?(i(),o(k,{key:0,class:"pic"},{default:c((()=>[d(F,{src:t.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1024)):b("",!0)])),_:2},1032,["onClick"])))),128))])),_:1}),0!=s.listData.length||s.loading?(i(),o(H,{key:1,loadingType:D.loadingType},null,8,["loadingType"])):(i(),o(k,{key:0,class:"d-c-c p30"},{default:c((()=>[d(T,{class:"iconfont icon-wushuju"}),d(T,{class:"cont"},{default:c((()=>[g("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"]),d(x)])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-82653cca"]]);export{k as default};
