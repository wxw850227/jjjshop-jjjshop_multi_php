import{_ as a,V as t,z as e,B as l,a as s,M as i,o,c,w as d,f as u,h as n,d as p,e as r,t as _,n as f,g,r as A,F as y,x as h,k as m,j as k,i as w,l as C}from"./index-73db7405.js";const b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACc0lEQVQ4T22TvU9TURjGn+e0pbf3FisffoRAWwJGZWJw0MGBQSMYFkGDi6NuhhhwY6BaQwIaTYyf/4IrRo0mYhzUOCGJCYa28qFMxsb23lvoPa+5BZrycYYznI9fnvf3nkMAKCXrj3lK9ylgdi5TnDkBrPvrO0cpXtflBUPnlGDOyBbf+Pv0JzsZHYJCCpA8NUeMXOEjAa8WkO8Id4Z0KA3IaYAvzGzhehXgttcf9SBpUs4D+EbhiJGtQLR/yG0Ld+hQMAXBBQDfFWXMyNjTVYAAqtQePqIZukNInwCzoL4RWXA+uQkjLiqQAjAgwHzAw0h4sTjDzTIrJWwNP4mmTADSC/Ar6N2lqH4RDAnxIyAYDWeL72rL2waoCE1Ej3sKE6CcBZgHJAZgXmncDOeKb3e62QUQgGud0S7tyZQQPSLMgHr0S8Z+3QOUd3amApAWmA4jjaWQU2jI4a8PsRNmtwqoa1rrV2bOnvZrlk6EHTfSvA7HiS3jT1ViMWH2UqkxUD7LukxaS/YvX2w+HovFFvP/CJSlFRG3zrwswqskX0YyBV/sxjsotFtnCD4g0QbIM/Fkyvpp/96KK0kYLq2LAqRARkVw38oW0lXA6iFY+yLRfircAnCQIk/LgnvRXHHVj+1qaxDClCaaFOSxrOmH5rKzUgVUPGwcHADoR2vWWh4p5T0p6+CpgEJagAM+WG+Ct9Jt60I2CeMwrUGA4xrYT+IDRbpBNgrlufYw5aeq7cSuNi61ItIctC4JMQ6wFRAXhO9lstbLngmq0lpglozoFREMg3hvl7zbTSvO8l4/dFeCKiSOBpvmSQZlzlxwlva67K/9B2y0FSC6laY7AAAAAElFTkSuQmCC";const v=a({data:()=>({loading:!0,statusBarHeight:0,titleBarHeight:0,titleHeight:0,opacity:0,coupon_id:0,listData:[],detail:{state:{value:0,text:""}}}),onPageScroll(a){a.scrollTop<100?this.opacity=a.scrollTop/100:this.opacity=1},onLoad(a){this.coupon_id=a.coupon_id,this.apply_range=a.apply_range,this.GetStatusBarHeight()},onShow(){this.page=1,this.listData=[],this.getData()},methods:{GetStatusBarHeight(){const a=t();this.statusBarHeight=a.statusBarHeight,this.titleHeight=this.statusBarHeight},getData(){let a=this;a.loading=!0,e({title:"加载中"}),a.data_type,a._get("coupon.coupon/detail",{coupon_id:a.coupon_id},(function(t){l(),a.loading=!1,a.detail=t.data.model,20==a.apply_range?a.listData=t.data.model.product:30==a.apply_range&&(a.listData=a.listData.concat(t.data.product_list.data),a.last_page=t.data.product_list.last_page,t.data.product_list.last_page<=1&&(a.no_more=!0))}))},receiveCoupon(){let a=this;if(1==a.detail.is_get)return!1;a._post("user.coupon/receive",{coupon_id:a.detail.coupon_id},(function(t){s({title:"领取成功",icon:"success",mask:!0,duration:2e3}),a.detail.is_get=1,a.detail.state.text="已领取"}))},goback(){i()}}},[["render",function(a,t,e,l,s,i){const v=m,x=n,B=k,D=w,H=C("uni-load-more");return s.loading?u("",!0):(o(),c(x,{key:0,class:"coupon_bg"},{default:d((()=>[p(x,{class:"coupon-detail-top"},{default:d((()=>[p(x,{class:"top_box"},{default:d((()=>[p(x,null,{default:d((()=>[p(v,{class:"icon iconfont icon-dianpu1",style:{color:"#333333","font-size":"30rpx"}}),p(v,{class:"gray3 fb f30 ml10"},{default:d((()=>[r(_(s.detail.supplier?s.detail.supplier.name:"平台通用"),1)])),_:1})])),_:1}),p(x,{class:"item-wrap"},{default:d((()=>[p(x,{class:f("coupon-item coupon-item-"+s.detail.color.text)},{default:d((()=>[p(x,{class:"circles"},{default:d((()=>[(o(),g(y,null,A(8,((a,t)=>p(v,{key:t}))),64))])),_:1}),p(x,{class:"info"},{default:d((()=>[p(x,null,{default:d((()=>[r(_(s.detail.coupon_type.text),1)])),_:1})])),_:1}),p(x,{class:"operation d-b-c w-b"},{default:d((()=>[p(x,{class:"flex-1 coupon-content"},{default:d((()=>[p(x,null,{default:d((()=>[10==s.detail.coupon_type.value?(o(),c(x,{key:0,class:"price"},{default:d((()=>[p(v,{class:"f40 fb"},{default:d((()=>[r("减"+_(1*s.detail.reduce_price)+"元",1)])),_:1})])),_:1})):u("",!0),20==s.detail.coupon_type.value?(o(),g(y,{key:1},[p(v,{class:"f40 fb"},{default:d((()=>[r(_(1*s.detail.discount),1)])),_:1}),p(v,null,{default:d((()=>[r("折")])),_:1})],64)):u("",!0)])),_:1}),p(x,{class:"f30"},{default:d((()=>[r(_(s.detail.min_price>0?"满"+1*s.detail.min_price+"元可用":"无门槛"),1)])),_:1}),p(x,{class:"f24"},{default:d((()=>[20==s.detail.expire_type?(o(),g(y,{key:0},[r(" 有效期："+_(s.detail.start_time.text)+" 至 "+_(s.detail.end_time.text),1)],64)):u("",!0),10==s.detail.expire_type?(o(),g(y,{key:1},[r(" 有效期：领取后"+_(s.detail.expire_day)+"天有效 ",1)],64)):u("",!0)])),_:1})])),_:1}),p(x,{class:"btns d-c-c",onClick:t[1]||(t[1]=a=>i.receiveCoupon())},{default:d((()=>[0==s.detail.is_get?(o(),c(B,{key:0,type:"default",class:f("btn-red")},{default:d((()=>[r(" 立即领取 ")])),_:1})):(o(),c(B,{key:1,type:"default",class:"btn-gray",onClick:t[0]||(t[0]=h((()=>{}),["stop"]))},{default:d((()=>[r(" 已领取 ")])),_:1}))])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),p(x,{class:"redF6 f26 fb pt30 d-c-c"},{default:d((()=>[p(D,{class:"decorate",src:b,mode:""}),p(v,{class:"ml10 mr10"},{default:d((()=>[r("指定以下商品使用")])),_:1}),p(D,{class:"decorate",src:b,mode:""})])),_:1}),10!=a.apply_range?(o(),c(x,{key:0,class:"o-h pro_list"},{default:d((()=>[p(x,{class:"d-b-c f-w ww100"},{default:d((()=>[(o(!0),g(y,null,A(s.listData,((t,e)=>(o(),c(x,{class:"pro_item",key:e,onClick:e=>a.gotoPage("/pages/product/detail/detail?product_id="+t.product_id)},{default:d((()=>[p(x,{class:"pro_item_image"},{default:d((()=>[p(D,{src:t.product_image||"/static/default.png",mode:"aspectFill"},null,8,["src"])])),_:2},1024),p(x,{class:"f26 gray3 text-ellipsis mt20 mb23 tc"},{default:d((()=>[r(_(t.product_name),1)])),_:2},1024),p(x,{class:"fb redF6 tc"},{default:d((()=>[p(v,{class:"f22"},{default:d((()=>[r("￥")])),_:1}),p(v,{class:"f32"},{default:d((()=>[r(_(t.product_price),1)])),_:2},1024)])),_:2},1024),p(x,{class:"d-c-c"},{default:d((()=>[p(B,{class:"add_btn"},{default:d((()=>[r("加入购物车")])),_:1})])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1}),0!=s.listData.length||s.loading?(o(),c(H,{key:1,loadingType:a.loadingType},null,8,["loadingType"])):(o(),c(x,{key:0,class:"d-c-c p30 ww100"},{default:d((()=>[p(v,{class:"iconfont icon-wushuju"}),p(v,{class:"cont"},{default:d((()=>[r("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1})):u("",!0)])),_:1})])),_:1}))}],["__scopeId","data-v-2127c8a6"]]);export{v as default};
