import{E as e,d as o,e as s,n as l,o as a,f as r,g as i,c as d,l as t}from"./element-plus-1d28f1d0.js";import{_ as m}from"./GetUser-3d7de25d.js";import{_ as n,h as u}from"./index-3957abef.js";import{o as p,T as c,S as f,P as _,c as g,Q as h,a9 as b,W as j,a as V,Y as w}from"./@vue-fcfaff04.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-28c84072.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-6c014c7f.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./data-72b673e3.js";import"./vue-router-0cda4647.js";import"./pinia-234ab43f.js";import"./axios-63583d02.js";import"./vue-ueditor-wrap-33bac798.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";const y={key:0,class:"img"},k=["src"],v={slot:"footer",class:"dialog-footer"};const C=n({data:()=>({formLabelWidth:"120px",loading:!1,open_add:!1,dialogVisible:!1,form:{user_name:"",access_id:[],user_id:0,user_info:{user:{}}},formRules:{user_name:[{required:!0,message:" ",trigger:"blur"}],role_id:[{required:!0,message:" ",trigger:"blur"}],password:[{required:!0,message:" ",trigger:"blur"}],confirm_password:[{required:!0,message:" ",trigger:"blur"}],real_name:[{required:!0,message:" ",trigger:"blur"}]}}),props:["open","roleList"],watch:{open:function(e,o){e!=o&&(this.dialogVisible=this.open)}},components:{GetUser:m},watch:{open:function(e,o){e!=o&&(this.dialogVisible=this.open,this.form={user_name:"",access_id:[],user_id:0,user_info:{user:{}}})}},methods:{onSubmit(){let o=this;o.loading=!0;let s=o.form;u(s).then((s=>{o.loading=!1,e({message:"恭喜你，添加成功",type:"success"}),o.dialogFormVisible(!0)})).catch((e=>{o.loading=!1}))},addClick(){this.open_add=!0},closeDialogFunc(e){e&&"error"!=e.type&&(this.form.user_info=e.params[0],this.form.user_id=e.params[0].user_id),this.open_add=!1},dialogFormVisible(e){e?this.$emit("close",{type:"success",openDialog:!1}):this.$emit("close",{type:"error",openDialog:!1})}}},[["render",function(e,n,u,C,U,q){const F=o,x=s,D=l,L=a,S=r,W=i,z=d,G=m,P=t;return p(),c(P,{title:"添加管理员",modelValue:U.dialogVisible,"onUpdate:modelValue":n[6]||(n[6]=e=>U.dialogVisible=e),onClose:q.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0},{default:f((()=>[_(z,{size:"small",ref:"form",model:U.form,rules:U.formRules,"label-width":U.formLabelWidth},{default:f((()=>[_(x,{label:"用户名",prop:"user_name"},{default:f((()=>[_(F,{modelValue:U.form.user_name,"onUpdate:modelValue":n[0]||(n[0]=e=>U.form.user_name=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),_(x,{label:"所属角色",prop:"access_id"},{default:f((()=>[_(L,{modelValue:U.form.access_id,"onUpdate:modelValue":n[1]||(n[1]=e=>U.form.access_id=e),multiple:!0},{default:f((()=>[(p(!0),g(h,null,b(u.roleList,(e=>(p(),c(D,{value:e.role_id,key:e.role_id,label:e.role_name_h1},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(x,{label:"绑定用户"},{default:f((()=>[_(W,null,{default:f((()=>[_(S,{onClick:q.addClick,icon:"Plus"},{default:f((()=>[j("选择会员")])),_:1},8,["onClick"]),""!=U.form.user_info.user_id?(p(),g("div",y,[V("img",{src:U.form.user_info.user.avatarUrl,width:"100",height:"100"},null,8,k)])):w("",!0)])),_:1})])),_:1}),_(x,{label:"登录密码",prop:"password"},{default:f((()=>[_(F,{modelValue:U.form.password,"onUpdate:modelValue":n[2]||(n[2]=e=>U.form.password=e),placeholder:"请输入登录密码",type:"password"},null,8,["modelValue"])])),_:1}),_(x,{label:"确认密码",prop:"confirm_password"},{default:f((()=>[_(F,{modelValue:U.form.confirm_password,"onUpdate:modelValue":n[3]||(n[3]=e=>U.form.confirm_password=e),placeholder:"请输入确认密码",type:"password"},null,8,["modelValue"])])),_:1}),_(x,{label:"姓名",prop:"real_name"},{default:f((()=>[_(F,{modelValue:U.form.real_name,"onUpdate:modelValue":n[4]||(n[4]=e=>U.form.real_name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","label-width"]),V("div",v,[_(S,{onClick:n[5]||(n[5]=e=>U.dialogVisible=!1)},{default:f((()=>[j("取 消")])),_:1}),_(S,{type:"primary",onClick:q.onSubmit,loading:U.loading},{default:f((()=>[j("确 定")])),_:1},8,["onClick","loading"])]),_(G,{is_open:U.open_add,onClose:q.closeDialogFunc},null,8,["is_open","onClose"])])),_:1},8,["modelValue","onClose"])}]]);export{C as default};
