System.register(["./element-plus-legacy-257d6f76.js","./product-legacy-a554960e.js","./index-legacy-40e126b0.js","./@vue-legacy-22137cea.js","./live-legacy-d141065a.js","./Products-legacy-b4a6b258.js","./Edit-legacy-a60c6af0.js","./Gift-legacy-22a19cff.js","./lodash-es-legacy-74aa31b9.js","./async-validator-legacy-aa1fd2de.js","./@vueuse-legacy-f51a040e.js","./dayjs-legacy-455cbe2f.js","./call-bind-legacy-ce7de972.js","./get-intrinsic-legacy-675d089b.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-8d596841.js","./escape-html-legacy-89f0c831.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-921da64f.js","./pinia-legacy-71de3e62.js","./axios-legacy-d06d9fd6.js","./vue-ueditor-wrap-legacy-b0e85f37.js","./qs-legacy-0ee9e797.js","./side-channel-legacy-bc002aec.js","./object-inspect-legacy-76ba9711.js"],(function(e,t){"use strict";var a,n,l,i,o,r,c,u,s,d,p,g,h,f,m,_,y,b,v,w,C,k,j,z,x,S,D,F,P,T,L,M,V;return{setters:[function(e){a=e.q,n=e.r,l=e.C,i=e.d,o=e.e,r=e.f,c=e.c,u=e.i,s=e.j,d=e.k,p=e.v,g=e.a,h=e.E},function(e){f=e.c,m=e.p},function(e){_=e._},function(e){y=e.an,b=e.o,v=e.c,w=e.P,C=e.S,k=e.$,j=e.a,z=e.Y,x=e.W,S=e.X,D=e.ae,F=e.T},function(e){P=e.g,T=e.d},function(e){L=e.default},function(e){M=e.default},function(e){V=e.default},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".table-wrap.setlink-product-table .product-info .pic[data-v-cca2ea37]{width:20px;height:20px;background:#FFFFFF}.table-wrap.setlink-product-table .product-info .pic img[data-v-cca2ea37]{width:20px;height:20px}.marketing-box .el-tree-node__content[data-v-cca2ea37]{height:30px}.marketing-box .el-tree-node__content[data-v-cca2ea37]{margin-bottom:10px}.picture-box[data-v-cf5c58ae]{width:50px;height:50px}.picture-box img[data-v-cf5c58ae]{width:100%;height:100%;object-fit:fill}.user-info img[data-v-cf5c58ae]{width:40px;height:40px;border-radius:50%}\n",document.head.appendChild(t);var N={class:"marketing-box"},A={key:0,class:"product"},E={class:"product-content"},G={class:"table-wrap type-table"},U={key:1,class:"product-list"},q={class:"common-seach-wrap"},$={class:"product-content"},I={class:"table-wrap setlink-product-table"},W={class:"product-info"},X={class:"pic"},Y={alt:""},B={class:"info"},H={class:"name text-ellipsis"},J={class:"red"},K={class:"pagination"},O=_({data:function(){return{loading:!0,activeTab:"type",categoryList:[],categoryActive:[],searchForm:{product_name:""},tableData:[],pageSize:5,totalDataNumber:0,curPage:1,activePage:null}},created:function(){this.getCategory()},watch:{activeTab:function(e,t){e!=t&&(this.tableData=[],"type"==e&&this.autoType(),"detail"==e&&this.getData())}},methods:{getCategory:function(){var e=this;e.loading=!0,f({}).then((function(t){e.categoryList=t.data.list,e.autoType(),e.loading=!1})).catch((function(t){e.loading=!1}))},autoType:function(e){if(e|=0,this.categoryActive=[],this.categoryList.length>0){var t=this.categoryList[e];this.categoryActive.push(t.category_id),t.child&&void 0!==t.child&&t.child.length>0?(this.categoryActive.push(t.child[0].category_id),this.changeFunc(t.child[0])):(e++,this.autoType(e))}},changeCategory:function(e){var t=this.$refs.cascader.getCheckedNodes();this.changeFunc(t[0].data)},handleCurrentChange:function(e){this.curPage=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.curPage=0,this.getData()},getData:function(){var e=this;e.loading=!0;var t={};t.page=e.curPage,t.list_rows=e.pageSize,t.product_name=e.searchForm.product_name,m(t).then((function(t){e.loading=!1,e.tableData=t.data.list.data,e.totalDataNumber=t.data.list.total,1==e.curPage&&e.tableData.length>0&&e.changeFunc(e.tableData[0])})).catch((function(t){e.loading=!1}))},onSubmit:function(){this.curPage=0,this.getData()},changeFunc:function(e){var t={};"type"==this.activeTab&&(t.name=e.name,t.url="pages/product/list/list?category_id="+e.category_id,t.type="商品分类"),"detail"==this.activeTab&&(t.name=e.product_name,t.url="pages/product/detail/detail?product_id="+e.product_id,t.type="商品详情"),this.$emit("changeData",t)}}},[["render",function(e,t,g,h,f,m){var _=a,D=n,F=l,P=i,T=o,L=r,M=c,V=u,O=s,Q=d,R=p,Z=y("img-url");return b(),v("div",N,[w(D,{modelValue:f.activeTab,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.activeTab=e})},{default:C((function(){return[w(_,{label:"分类",name:"type"}),w(_,{label:"详情",name:"detail"})]})),_:1},8,["modelValue"]),"type"==f.activeTab?(b(),v("div",A,[k((b(),v("div",E,[j("div",G,[w(F,{class:"ww100",ref:"cascader",modelValue:f.categoryActive,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.categoryActive=e}),options:f.categoryList,props:{children:"child",value:"category_id",label:"name"},onChange:m.changeCategory},null,8,["modelValue","options","onChange"])])])),[[R,f.loading]])])):z("",!0),"detail"==f.activeTab?k((b(),v("div",U,[j("div",q,[w(M,{size:"small",inline:!0,model:f.searchForm,class:"demo-form-inline"},{default:C((function(){return[w(T,{label:"商品名称"},{default:C((function(){return[w(P,{size:"small",modelValue:f.searchForm.product_name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return f.searchForm.product_name=e}),placeholder:"请输入商品名称"},null,8,["modelValue"])]})),_:1}),w(T,null,{default:C((function(){return[w(L,{size:"small",icon:"Search",onClick:m.onSubmit},{default:C((function(){return[x("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),j("div",$,[j("div",I,[w(O,{size:"mini",data:f.tableData,border:"",style:{width:"100%"}},{default:C((function(){return[w(V,{prop:"product_name",label:"产品"},{default:C((function(e){return[j("div",W,[j("div",X,[k(j("img",Y,null,512),[[Z,e.row.image[0].file_path]])]),j("div",B,[j("div",H,S(e.row.product_name),1)])])]})),_:1}),w(V,{prop:"product_price",label:"价格",width:"100"},{default:C((function(e){return[j("span",J,S(e.row.product_price),1)]})),_:1}),w(V,{label:"操作",width:"80"},{default:C((function(e){return[w(L,{size:"mini",onClick:function(t){return m.changeFunc(e.row)}},{default:C((function(){return[x("选择")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])]),j("div",K,[w(Q,{onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange,background:"","current-page":f.curPage,"page-size":f.pageSize,layout:"total, prev, pager, next, jumper",total:f.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])),[[R,f.loading]]):z("",!0)])}],["__scopeId","data-v-cca2ea37"]]),Q={class:"list"},R={class:"common-seach-wrap"},Z={class:"product-content"},ee={class:"table-wrap"},te={class:"text-ellipsis"},ae={key:0,class:"red"},ne={key:0,class:"picture-box d-c-c"},le=["src"],ie={key:0,class:"fb green"},oe={key:0,class:"fb green"},re={key:0,class:"fb gray"},ce={key:1,class:"fb red"},ue={class:"user-info d-s-c"},se={class:"ml10"},de={class:"pagination"};e("default",_({components:{Products:L,Edit:M,Gift:V},inject:["reload"],data:function(){return{loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,searchForm:{search:""},open_edit:!1,curModel:{},open_product:!1,open_audit:!1,open_gift:!1}},created:function(){this.getTableList()},methods:{searchSubmit:function(){this.curPage=1,this.getTableList()},handleCurrentChange:function(e){var t=this;t.curPage=e,t.loading=!0,t.getTableList()},handleSizeChange:function(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList:function(){var e=this,t={page:e.curPage,list_rows:e.pageSize,username:e.searchForm.search};P(t).then((function(t){e.loading=!1,e.tableData=t.data.list.data.map((function(e){return e.users||(e.users={nickName:"Unknown"}),e})),e.totalDataNumber=t.data.list.total})).catch((function(e){}))},deleteClick:function(e){var t=this;g.confirm("删除后不可恢复，确认删除该记录吗?","提示",{type:"warning"}).then((function(){T({room_id:e.room_id}).then((function(e){h({message:"删除成功",type:"success"}),t.getTableList()}))}))},showProduct:function(e){this.curModel=e,this.open_product=!0},closeProducts:function(){this.open_product=!1},showGift:function(e){this.curModel=e,this.open_gift=!0},closeGift:function(){this.open_gift=!1},editClick:function(e){this.curModel=e,this.open_edit=!0},closeEdit:function(){this.open_edit=!1,this.getTableList()}}},[["render",function(e,t,a,n,l,g){var h=i,f=o,m=r,_=c,P=u,T=s,L=d,M=D("Audit"),V=O,N=D("Edit"),A=D("Gift"),E=y("auth"),G=p;return b(),v("div",Q,[j("div",R,[w(_,{size:"small",inline:!0,model:l.searchForm,class:"demo-form-inline"},{default:C((function(){return[w(f,null,{default:C((function(){return[w(h,{size:"small",modelValue:l.searchForm.search,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.searchForm.search=e}),placeholder:"请输入用户名和真实姓名"},null,8,["modelValue"])]})),_:1}),w(f,null,{default:C((function(){return[w(m,{size:"small",type:"primary",icon:"Search",onClick:g.searchSubmit},{default:C((function(){return[x("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),j("div",Z,[j("div",ee,[k((b(),F(T,{size:"small",data:l.tableData,border:"",style:{width:"100%"}},{default:C((function(){return[w(P,{prop:"name",label:"标题"},{default:C((function(e){return[j("div",te,[1==e.row.is_top?(b(),v("span",ae,"[置顶]")):z("",!0),x(S(e.row.name),1)])]})),_:1}),w(P,{prop:"share_img_id",label:"封面"},{default:C((function(e){return[e.row.share_img_id>0?(b(),v("div",ne,[j("img",{src:e.row.share.file_path,alt:"封面"},null,8,le)])):z("",!0)]})),_:1}),w(P,{prop:"virtual_num",label:"虚拟人数",width:"70"}),w(P,{prop:"status_text",label:"直播状态"}),w(P,{prop:"status_text",label:"开播时间"},{default:C((function(e){return[103==e.row.live_status||101==e.row.live_status?(b(),v("span",ie,S(e.row.real_start_time_text),1)):z("",!0)]})),_:1}),w(P,{prop:"status_text",label:"结束时间"},{default:C((function(e){return[103==e.row.live_status?(b(),v("span",oe,S(e.row.real_end_time_text),1)):z("",!0)]})),_:1}),w(P,{label:"房间状态"},{default:C((function(e){return[1==e.row.is_delete?(b(),v("span",re,"隐藏")):z("",!0),0==e.row.is_delete?(b(),v("span",ce,"显示")):z("",!0)]})),_:1}),w(P,{prop:"supplier.name",label:"商户",width:"70"}),w(P,{prop:"anchor_name",label:"主播名"},{default:C((function(e){return[j("div",ue,[j("span",se,S(e.row.users.nickName),1)])]})),_:1}),w(P,{label:"数据统计"},{default:C((function(e){return[j("div",null,"观看人数："+S(e.row.view_num),1),j("div",null,"礼物收入："+S(e.row.gift_num),1),j("div",null,"订单数量："+S(e.row.sales_num),1),j("div",null,"点赞数量："+S(e.row.digg_num),1)]})),_:1}),w(P,{prop:"sort",label:"排序",width:"70"}),w(P,{prop:"create_time",label:"添加时间"}),w(P,{fixed:"right",label:"操作",width:"120"},{default:C((function(t){return[0==t.row.live_status?k((b(),F(m,{key:0,onClick:function(a){return e.auditClick(t.row)},link:"",type:"primary",size:"small"},{default:C((function(){return[x("审核")]})),_:2},1032,["onClick"])),[[E,"/plus/live/room/audit"]]):z("",!0),k((b(),F(m,{onClick:function(e){return g.editClick(t.row)},link:"",type:"primary",size:"small"},{default:C((function(){return[x("修改")]})),_:2},1032,["onClick"])),[[E,"/plus/live/room/edit"]]),k((b(),F(m,{onClick:function(e){return g.showGift(t.row)},link:"",type:"primary",size:"small"},{default:C((function(){return[x("礼物排行")]})),_:2},1032,["onClick"])),[[E,"/plus/live/room/user_gift"]])]})),_:1})]})),_:1},8,["data"])),[[G,l.loading]])]),j("div",de,[w(L,{onSizeChange:g.handleSizeChange,onCurrentChange:g.handleCurrentChange,background:"","current-page":l.curPage,"page-size":l.pageSize,layout:"total, prev, pager, next, jumper",total:l.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),l.open_audit?(b(),F(M,{key:0,form:l.curModel,onClose:t[1]||(t[1]=function(t){return e.closeAudit(t,"audit")})},null,8,["form"])):z("",!0),w(V,{is_open:l.open_product,curModel:l.curModel,onClose:g.closeProducts},null,8,["is_open","curModel","onClose"]),w(N,{open:l.open_edit,form:l.curModel,onClose:g.closeEdit},null,8,["open","form","onClose"]),w(A,{is_open:l.open_gift,curModel:l.curModel,onClose:g.closeGift},null,8,["is_open","curModel","onClose"])])}],["__scopeId","data-v-cf5c58ae"]]))}}}));
