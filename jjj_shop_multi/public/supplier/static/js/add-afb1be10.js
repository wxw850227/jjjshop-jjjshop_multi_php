import{_ as e}from"./Upload-c4f46615.js";import{E as a,d as l,e as o,f as s,g as t,n as d,o as r,s as i,t as m,c as n}from"./element-plus-1d28f1d0.js";import{_ as u}from"./Getpoint-9a39b59f.js";import{f as p}from"./store-1bf91338.js";import{a as c}from"./data-72b673e3.js";import{_ as f}from"./index-3957abef.js";import{o as h,c as _,P as g,S as V,W as b,a as y,Y as j,Q as v,a9 as k,T as w,bh as U,bf as x}from"./@vue-fcfaff04.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-28c84072.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-6c014c7f.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-0cda4647.js";import"./pinia-234ab43f.js";import"./axios-63583d02.js";import"./vue-ueditor-wrap-33bac798.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";const C={components:{Getpoint:u,Upload:e},data:()=>({form:{store_name:"",logo_image_id:0,linkman:"",phone:"",shop_hours:"",province_id:"",city_id:"",region_id:"",address:"",coordinate:"",summary:"",sort:1,is_check:1,status:1,is_search_map:!1},file_path:"",areaList:[],isupload:!1,loading:!1}),created(){this.getData()},methods:{getData(){let e=this;c({}).then((a=>{e.areaList=a.data.regionData})).catch((e=>{}))},onSubmit(){let e=this,l=e.form;e.$refs.form.validate((o=>{o&&(e.loading=!0,p(l).then((l=>{e.loading=!1,1==l.code?(a({message:"恭喜你，添加成功",type:"success"}),e.$router.push("/store/store/index")):e.loading=!1})).catch((a=>{e.loading=!1})))}))},initCity(){this.form.city_id=""},initRegion(){this.form.region_id=""},getMapdataFunc(e){this.form.coordinate=e.data[0].toFixed(6)+","+e.data[1].toFixed(6)},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&(this.file_path=e[0].file_path,this.form.logo_image_id=e[0].file_id),this.isupload=!1},choseFunc(e){this.form.coordinate=e.location.lat+","+e.location.lng,this.form.address=e.address},cancelFunc(){this.$router.back(-1)}}},F={class:"product-add"},q=(e=>(U("data-v-0a8993f8"),e=e(),x(),e))((()=>y("div",{class:"common-form"},"添加门店",-1))),I={key:0,class:"img"},L=["src"],z={class:"ww100 mb16"},G={class:"ww100"},M={class:"common-button-wrapper"};const R=f(C,[["render",function(a,p,c,f,U,x){const C=l,R=o,D=s,S=t,$=d,E=r,P=u,Q=i,T=m,W=n,Y=e;return h(),_("div",F,[g(W,{size:"small",ref:"form",model:U.form,"label-width":"80px"},{default:V((()=>[q,g(R,{label:"门店名称",prop:"store_name",rules:[{required:!0,message:" "}]},{default:V((()=>[g(C,{modelValue:U.form.store_name,"onUpdate:modelValue":p[0]||(p[0]=e=>U.form.store_name=e),placeholder:"请输入门店名称",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"门店logo"},{default:V((()=>[g(S,null,{default:V((()=>[g(D,{icon:"picture",onClick:x.openUpload},{default:V((()=>[b("选择图片")])),_:1},8,["onClick"]),""!=U.form.logo_image_id?(h(),_("div",I,[y("img",{src:U.file_path,width:"100",height:"100"},null,8,L)])):j("",!0)])),_:1})])),_:1}),g(R,{label:"联系人",prop:"linkman",rules:[{required:!0,message:" "}]},{default:V((()=>[g(C,{modelValue:U.form.linkman,"onUpdate:modelValue":p[1]||(p[1]=e=>U.form.linkman=e),placeholder:"请输入门店联系人",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"联系电话",prop:"phone",rules:[{required:!0,message:" "}]},{default:V((()=>[g(C,{modelValue:U.form.phone,"onUpdate:modelValue":p[2]||(p[2]=e=>U.form.phone=e),placeholder:"请输入门店联系电话",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"营业时间",prop:"shop_hours",rules:[{required:!0,message:" "}]},{default:V((()=>[g(C,{modelValue:U.form.shop_hours,"onUpdate:modelValue":p[3]||(p[3]=e=>U.form.shop_hours=e),placeholder:"请输入营业时间,例如:8:30-17:30",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"门店区域"},{default:V((()=>[g(E,{modelValue:U.form.province_id,"onUpdate:modelValue":p[4]||(p[4]=e=>U.form.province_id=e),placeholder:"省",onChange:x.initCity},{default:V((()=>[(h(!0),_(v,null,k(U.areaList,((e,a)=>(h(),w($,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),""!=U.form.province_id?(h(),w(E,{key:0,modelValue:U.form.city_id,"onUpdate:modelValue":p[5]||(p[5]=e=>U.form.city_id=e),placeholder:"市",onChange:x.initRegion},{default:V((()=>[(h(!0),_(v,null,k(U.areaList[U.form.province_id].city,((e,a)=>(h(),w($,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):j("",!0),""!=U.form.city_id?(h(),w(E,{key:1,modelValue:U.form.region_id,"onUpdate:modelValue":p[6]||(p[6]=e=>U.form.region_id=e),placeholder:"区"},{default:V((()=>[(h(!0),_(v,null,k(U.areaList[U.form.province_id].city[U.form.city_id].region,((e,a)=>(h(),w($,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):j("",!0)])),_:1}),g(R,{label:"详细地址",prop:"address",rules:[{required:!0,message:" "}]},{default:V((()=>[g(C,{modelValue:U.form.address,"onUpdate:modelValue":p[7]||(p[7]=e=>U.form.address=e),placeholder:"请输入详细地址",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"门店坐标"},{default:V((()=>[y("div",z,[g(C,{modelValue:U.form.coordinate,"onUpdate:modelValue":p[8]||(p[8]=e=>U.form.coordinate=e),class:"max-w460"},null,8,["modelValue"])]),y("div",G,[g(P,{form:U.form,onGetMapdata:x.getMapdataFunc,onChose:x.choseFunc},null,8,["form","onGetMapdata","onChose"])])])),_:1}),g(R,{label:"门店简介"},{default:V((()=>[g(C,{type:"textarea",modelValue:U.form.summary,"onUpdate:modelValue":p[9]||(p[9]=e=>U.form.summary=e),placeholder:"请输入门店简介",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"门店排序"},{default:V((()=>[g(C,{type:"number",modelValue:U.form.sort,"onUpdate:modelValue":p[10]||(p[10]=e=>U.form.sort=e),placeholder:"请输入门店排序",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"自提核销"},{default:V((()=>[g(T,{modelValue:U.form.is_check,"onUpdate:modelValue":p[11]||(p[11]=e=>U.form.is_check=e)},{default:V((()=>[g(Q,{label:1},{default:V((()=>[b("支持")])),_:1}),g(Q,{label:0},{default:V((()=>[b("不支持")])),_:1})])),_:1},8,["modelValue"])])),_:1}),g(R,{label:"门店状态"},{default:V((()=>[g(T,{modelValue:U.form.status,"onUpdate:modelValue":p[12]||(p[12]=e=>U.form.status=e)},{default:V((()=>[g(Q,{label:1},{default:V((()=>[b("启用")])),_:1}),g(Q,{label:0},{default:V((()=>[b("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y("div",M,[g(D,{size:"small",type:"info",onClick:x.cancelFunc},{default:V((()=>[b("取消")])),_:1},8,["onClick"]),g(D,{size:"small",type:"primary",onClick:x.onSubmit,loading:U.loading},{default:V((()=>[b("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),U.isupload?(h(),w(Y,{key:0,isupload:U.isupload,type:a.type,onReturnImgs:x.returnImgsFunc},{default:V((()=>[b("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):j("",!0)])}],["__scopeId","data-v-0a8993f8"]]);export{R as default};
