import{a,E as e,u as t,q as l,r as s,n as r,o,e as i,d as c,f as d,c as u,i as p,j as n,k as m,v as _}from"./element-plus-1d28f1d0.js";import{p as h,m as g,n as y}from"./product-248f65bb.js";import{_ as k}from"./index-3957abef.js";import{an as b,o as f,c as v,a as C,P as z,S as j,W as w,X as S,Q as D,a9 as N,T as P,$ as V,Y as x,ak as F}from"./@vue-fcfaff04.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-28c84072.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-6c014c7f.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-0cda4647.js";import"./pinia-234ab43f.js";import"./axios-63583d02.js";import"./vue-ueditor-wrap-33bac798.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";const q={class:"product-list"},$={class:"common-seach-wrap"},L={key:0,class:"common-level-rail"},T={key:1,class:"common-level-rail"},U={key:0,class:"red pl16"},E={key:1,class:"red pl16"},I={class:"product-content"},Q={class:"table-wrap"},W={class:"product-info"},X={class:"pic"},Y={alt:""},A={class:"info"},B={class:"name"},G={class:"price"},H={key:0,class:"price"},J={key:1,class:"price"},K={key:0},M={key:1,class:"green"},O={class:"table-btn-column"},R={class:"pagination"};const Z=k({components:{},data:()=>({activeName:"sell",activeIndex:"0",loading:!0,pageSize:10,totalDataNumber:0,curPage:1,searchForm:{product_name:"",category_id:""},tableData:[],categoryList:[],supplier:[],product_count:{}}),created(){this.getData()},methods:{handleCurrentChange(a){let e=this;e.loading=!0,e.curPage=a,e.getData()},handleSizeChange(a){this.pageSize=a,this.getData()},handleClick(a,e){this.curPage=1,this.getData()},getData(){let a=this,e=a.searchForm;e.page=a.curPage,e.list_rows=a.pageSize,e.type=a.activeName,a.loading=!0,h(e).then((e=>{a.loading=!1,a.tableData=e.data.list.data,a.categoryList=e.data.category,a.totalDataNumber=e.data.list.total,a.supplier=e.data.supplier,a.product_count=e.data.product_count})).catch((e=>{a.loading=!1}))},onSubmit(){this.curPage=1,this.getData()},addClick(){this.$router.push("/product/product/add")},editClick(a){this.$router.push({path:"/product/product/edit",query:{product_id:a.product_id,scene:"edit"}})},copyClick(a){this.$router.push({path:"/product/product/edit",query:{product_id:a.product_id,scene:"copy"}})},delClick:function(t){let l=this,s="";s=30==t.product_status?"删除后不可恢复，确认删除该记录吗?":"删除后将移动到回收站，确定删除该记录吗?",a.confirm(s,"提示",{type:"warning"}).then((()=>{g({product_id:t.product_id}).then((a=>{e({message:"删除成功",type:"success"}),l.getData()}))}))},changeStatus(t,l){let s=this,r="";10==l?r="确认要上架该商品吗?":(r="确认要下架该商品吗?","recovery"==s.activeName&&(r="确认要移动该商品到仓库吗?")),a.confirm(r,"提示",{type:"warning"}).then((()=>{y({product_id:t.product_id,state:l}).then((a=>{e({message:"操作成功",type:"success"}),s.getData()}))}))}}},[["render",function(a,e,h,g,y,k){const Z=t,aa=l,ea=s,ta=r,la=o,sa=i,ra=c,oa=d,ia=u,ca=p,da=n,ua=m,pa=b("auth"),na=b("img-url"),ma=_;return f(),v("div",q,[C("div",$,[z(ea,{modelValue:y.activeName,"onUpdate:modelValue":e[0]||(e[0]=a=>y.activeName=a),onTabChange:k.handleClick},{default:j((()=>[z(aa,{label:"出售中",name:"sell"},{label:j((()=>[C("span",null,[w("出售中 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.sell),1)])),_:1})])])),_:1}),z(aa,{label:"仓库中",name:"lower"},{label:j((()=>[C("span",null,[w("仓库中 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.lower),1)])),_:1})])])),_:1}),z(aa,{label:"回收站",name:"recovery"},{label:j((()=>[C("span",null,[w("回收站 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.recovery),1)])),_:1})])])),_:1}),z(aa,{label:"库存紧张",name:"stock"},{label:j((()=>[C("span",null,[w("库存紧张 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.stock),1)])),_:1})])])),_:1}),z(aa,{label:"草稿箱",name:"draft"},{label:j((()=>[C("span",null,[w("草稿箱 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.draft),1)])),_:1})])])),_:1}),z(aa,{label:"待审核",name:"audit"},{label:j((()=>[C("span",null,[w("待审核 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.audit),1)])),_:1})])])),_:1}),z(aa,{label:"未通过",name:"no_audit"},{label:j((()=>[C("span",null,[w("未通过 "),z(Z,{size:"small"},{default:j((()=>[w(S(y.product_count.no_audit),1)])),_:1})])])),_:1})])),_:1},8,["modelValue","onTabChange"]),z(ia,{size:"small",inline:!0,model:y.searchForm,class:"demo-form-inline"},{default:j((()=>[z(sa,{label:"商品分类"},{default:j((()=>[z(la,{size:"small",modelValue:y.searchForm.category_id,"onUpdate:modelValue":e[1]||(e[1]=a=>y.searchForm.category_id=a),placeholder:"所有分类"},{default:j((()=>[z(ta,{label:"全部",value:"0"}),(f(!0),v(D,null,N(y.categoryList,((a,e)=>(f(),P(ta,{key:e,label:a.name,value:a.category_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),z(sa,{label:"商品名称"},{default:j((()=>[z(ra,{size:"small",modelValue:y.searchForm.product_name,"onUpdate:modelValue":e[2]||(e[2]=a=>y.searchForm.product_name=a),placeholder:"请输入商品名称"},null,8,["modelValue"])])),_:1}),z(sa,null,{default:j((()=>[z(oa,{size:"small",type:"primary",icon:"Search",onClick:k.onSubmit},{default:j((()=>[w("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),0==y.supplier.status?(f(),v("div",L,[V((f(),P(oa,{size:"small",type:"primary",icon:"Plus",onClick:k.addClick},{default:j((()=>[w("添加产品")])),_:1},8,["onClick"])),[[pa,"/product/product/add"]])])):x("",!0),0!=y.supplier.status?(f(),v("div",T,[V((f(),P(oa,{size:"small",type:"primary",icon:"Plus",disabled:"true"},{default:j((()=>[w("添加产品")])),_:1})),[[pa,"/product/product/add"]]),10==y.supplier.status?(f(),v("span",U,"正在退保证金")):x("",!0),20==y.supplier.status?(f(),v("span",E,"未交纳保证金，请到移动端交纳")):x("",!0)])):x("",!0),C("div",I,[C("div",Q,[V((f(),P(da,{size:"small",data:y.tableData,border:"",style:{width:"100%"}},{default:j((()=>[z(ca,{prop:"product_name",label:"产品",width:"400px"},{default:j((a=>[C("div",W,[C("div",X,[V(C("img",Y,null,512),[[na,a.row.image[0].file_path]])]),C("div",A,[C("div",B,S(a.row.product_name),1),C("div",G,"￥"+S(a.row.product_price),1),20==a.row.audit_status?(f(),v("div",H," 未通过原因："+S(a.row.audit_remark),1)):x("",!0),30==a.row.audit_status?(f(),v("div",J," 强制下架："+S(a.row.audit_remark),1)):x("",!0)])])])),_:1}),z(ca,{prop:"category.name",label:"分类"}),z(ca,{prop:"sales_actual",label:"实际销量"}),z(ca,{prop:"product_stock",label:"库存"}),z(ca,{prop:"view_times",label:"点击数"}),z(ca,{prop:"product_status.text",label:"商品属性"},{default:j((a=>[0==a.row.is_virtual?(f(),v("span",K,"实物商品")):x("",!0),1==a.row.is_virtual?(f(),v("span",M,"虚拟商品")):x("",!0)])),_:1}),z(ca,{prop:"create_time",label:"发布时间"}),z(ca,{prop:"product_sort",label:"排序"}),z(ca,{fixed:"right",label:"操作",width:"80"},F({_:2},[0==y.supplier.status?{name:"default",fn:j((a=>[C("div",O,[V((f(),P(oa,{onClick:e=>k.editClick(a.row),link:"",type:"primary",size:"small"},{default:j((()=>[w("编辑商品")])),_:2},1032,["onClick"])),[[pa,"/product/product/edit"]]),V((f(),P(oa,{onClick:e=>k.delClick(a.row),link:"",type:"primary",size:"small"},{default:j((()=>[w("删除商品")])),_:2},1032,["onClick"])),[[pa,"/product/product/delete"]]),"sell"==y.activeName?V((f(),P(oa,{key:0,onClick:e=>k.changeStatus(a.row,20),link:"",type:"primary",size:"small"},{default:j((()=>[w("立即下架")])),_:2},1032,["onClick"])),[[pa,"/product/product/state"]]):x("",!0),"lower"==y.activeName?V((f(),P(oa,{key:1,onClick:e=>k.changeStatus(a.row,10),link:"",type:"primary",size:"small"},{default:j((()=>[w("立即上架")])),_:2},1032,["onClick"])),[[pa,"/product/product/state"]]):x("",!0),"recovery"==y.activeName?V((f(),P(oa,{key:2,onClick:e=>k.changeStatus(a.row,20),link:"",type:"primary",size:"small"},{default:j((()=>[w("恢复")])),_:2},1032,["onClick"])),[[pa,"/product/product/state"]]):x("",!0),V((f(),P(oa,{onClick:e=>k.copyClick(a.row),link:"",type:"primary",size:"small"},{default:j((()=>[w("一键复制")])),_:2},1032,["onClick"])),[[pa,"/product/product/copy"]])])])),key:"0"}:void 0]),1024)])),_:1},8,["data"])),[[ma,y.loading]])])]),C("div",R,[z(ua,{onSizeChange:k.handleSizeChange,onCurrentChange:k.handleCurrentChange,background:"","current-page":y.curPage,"page-size":y.pageSize,layout:"total, prev, pager, next, jumper",total:y.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])}]]);export{Z as default};
