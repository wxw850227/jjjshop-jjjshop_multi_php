import{_ as e}from"./Upload-c4f46615.js";import{E as a,d as l,e as o,f as s,g as t,n as r,o as d,s as i,t as m,c as n}from"./element-plus-1d28f1d0.js";import{_ as u}from"./Getpoint-9a39b59f.js";import{g as p,s as c}from"./store-1bf91338.js";import{_ as f,m as _}from"./index-3957abef.js";import{o as h,c as g,P as V,S as b,W as y,a as j,Y as v,Q as k,a9 as w,T as U,bh as x,bf as C}from"./@vue-fcfaff04.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-28c84072.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-6c014c7f.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-0cda4647.js";import"./pinia-234ab43f.js";import"./axios-63583d02.js";import"./vue-ueditor-wrap-33bac798.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";const F={components:{Getpoint:u,Upload:e},data:()=>({form:{store_id:null,store_name:0,store_name:"",linkman:"",phone:"",shop_hours:"",province_id:"",city_id:"",region_id:"",address:"",coordinate:"",summary:"",sort:"",is_check:"",status:"",logo_image_id:0},areaList:[],list:[],isupload:!1,loading:!1,file_path:""}),created(){this.form.store_id=this.$route.query.store_id,this.getData()},methods:{onSubmit(){let e=this,l=e.form;e.$refs.form.validate((o=>{o&&(e.loading=!0,p(l).then((l=>{e.loading=!1,a({message:"恭喜你，门店修改成功",type:"success"}),e.$router.push("/store/store/index")})).catch((a=>{e.loading=!1})))}))},initCity(){this.form.city_id=""},initRegion(){this.form.region_id=""},getMapdataFunc(e){this.form.coordinate=e.data[0].toFixed(6)+","+e.data[1].toFixed(6)},getData(){let e=this;c({store_id:e.form.store_id}).then((a=>{e.form=_(e.form,a.data.model),e.file_path=a.data.model.logo.file_path,e.form.is_check=a.data.model.is_check.value,e.form.status=a.data.model.status.value,e.areaList=a.data.regionData})).catch((e=>{}))},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&(this.file_path=e[0].file_path,this.form.logo_image_id=e[0].file_id),this.isupload=!1},choseFunc(e){this.form.coordinate=e.location.lat+","+e.location.lng,this.form.address=e.address},cancelFunc(){this.$router.back(-1)}}},q={class:"product-add"},I=(e=>(x("data-v-c89c33a4"),e=e(),C(),e))((()=>j("div",{class:"common-form"},"编辑门店",-1))),L={key:0,class:"img"},z=["src"],G={class:"ww100 mb16"},M={class:"ww100 mb16"},R={class:"common-button-wrapper"};const $=f(F,[["render",function(a,p,c,f,_,x){const C=l,F=o,$=s,D=t,S=r,E=d,P=u,Q=i,T=m,W=n,Y=e;return h(),g("div",q,[V(W,{size:"small",ref:"form",model:_.form,"label-width":"80px"},{default:b((()=>[I,V(F,{label:"门店名称",prop:"store_name",rules:[{required:!0,message:" "}]},{default:b((()=>[V(C,{modelValue:_.form.store_name,"onUpdate:modelValue":p[0]||(p[0]=e=>_.form.store_name=e),placeholder:"请输入门店名称",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"门店logo"},{default:b((()=>[V(D,null,{default:b((()=>[V($,{icon:"picture",onClick:x.openUpload},{default:b((()=>[y("选择图片")])),_:1},8,["onClick"]),""!=_.file_path?(h(),g("div",L,[j("img",{src:_.file_path,width:"100"},null,8,z)])):v("",!0)])),_:1})])),_:1}),V(F,{label:"联系人",prop:"linkman",rules:[{required:!0,message:" "}]},{default:b((()=>[V(C,{modelValue:_.form.linkman,"onUpdate:modelValue":p[1]||(p[1]=e=>_.form.linkman=e),placeholder:"请输入门店联系人",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"联系电话",prop:"phone",rules:[{required:!0,message:" "}]},{default:b((()=>[V(C,{modelValue:_.form.phone,"onUpdate:modelValue":p[2]||(p[2]=e=>_.form.phone=e),placeholder:"请输入门店联系电话",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"营业时间",prop:"shop_hours",rules:[{required:!0,message:" "}]},{default:b((()=>[V(C,{modelValue:_.form.shop_hours,"onUpdate:modelValue":p[3]||(p[3]=e=>_.form.shop_hours=e),placeholder:"请输入营业时间,例如:8:30-17:30",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"门店区域"},{default:b((()=>[V(E,{modelValue:_.form.province_id,"onUpdate:modelValue":p[4]||(p[4]=e=>_.form.province_id=e),placeholder:"省",onChange:x.initCity},{default:b((()=>[(h(!0),g(k,null,w(_.areaList,((e,a)=>(h(),U(S,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),""!=_.form.province_id?(h(),U(E,{key:0,modelValue:_.form.city_id,"onUpdate:modelValue":p[5]||(p[5]=e=>_.form.city_id=e),placeholder:"市",onChange:x.initRegion},{default:b((()=>[(h(!0),g(k,null,w(_.areaList[_.form.province_id].city,((e,a)=>(h(),U(S,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):v("",!0),""!=_.form.city_id?(h(),U(E,{key:1,modelValue:_.form.region_id,"onUpdate:modelValue":p[6]||(p[6]=e=>_.form.region_id=e),placeholder:"区"},{default:b((()=>[(h(!0),g(k,null,w(_.areaList[_.form.province_id].city[_.form.city_id].region,((e,a)=>(h(),U(S,{label:e.name,value:e.id,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):v("",!0)])),_:1}),V(F,{label:"详细地址",prop:"address",rules:[{required:!0,message:" "}]},{default:b((()=>[V(C,{modelValue:_.form.address,"onUpdate:modelValue":p[7]||(p[7]=e=>_.form.address=e),placeholder:"请输入详细地址",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"门店坐标"},{default:b((()=>[j("div",G,[V(C,{modelValue:_.form.coordinate,"onUpdate:modelValue":p[8]||(p[8]=e=>_.form.coordinate=e),class:"max-w460"},null,8,["modelValue"])]),j("div",M,[V(P,{form:_.form,onGetMapdata:x.getMapdataFunc,onChose:x.choseFunc},null,8,["form","onGetMapdata","onChose"])])])),_:1}),V(F,{label:"门店简介"},{default:b((()=>[V(C,{type:"textarea",modelValue:_.form.summary,"onUpdate:modelValue":p[9]||(p[9]=e=>_.form.summary=e),placeholder:"请输入门店简介",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"门店排序"},{default:b((()=>[V(C,{type:"number",modelValue:_.form.sort,"onUpdate:modelValue":p[10]||(p[10]=e=>_.form.sort=e),placeholder:"请输入门店排序",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(F,{label:"自提核销"},{default:b((()=>[V(T,{modelValue:_.form.is_check,"onUpdate:modelValue":p[11]||(p[11]=e=>_.form.is_check=e)},{default:b((()=>[V(Q,{label:1},{default:b((()=>[y("支持")])),_:1}),V(Q,{label:0},{default:b((()=>[y("不支持")])),_:1})])),_:1},8,["modelValue"])])),_:1}),V(F,{label:"门店状态"},{default:b((()=>[V(T,{modelValue:_.form.status,"onUpdate:modelValue":p[12]||(p[12]=e=>_.form.status=e)},{default:b((()=>[V(Q,{label:1},{default:b((()=>[y("启用")])),_:1}),V(Q,{label:0},{default:b((()=>[y("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),j("div",R,[V($,{size:"small",type:"info",onClick:x.cancelFunc},{default:b((()=>[y("取消")])),_:1},8,["onClick"]),V($,{size:"small",type:"primary",onClick:x.onSubmit,loading:_.loading},{default:b((()=>[y("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),_.isupload?(h(),U(Y,{key:0,isupload:_.isupload,type:a.type,onReturnImgs:x.returnImgsFunc},{default:b((()=>[y("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):v("",!0)])}],["__scopeId","data-v-c89c33a4"]]);export{$ as default};
