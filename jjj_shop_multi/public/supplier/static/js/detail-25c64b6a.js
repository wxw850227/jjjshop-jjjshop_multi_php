import{E as e,h as a,f as s,g as l,e as d,s as r,t,n as i,o,d as n,c as p,v as u}from"./element-plus-1d28f1d0.js";import{r as _,A as m,h as c}from"./order-c84ec710.js";import{_ as f}from"./index-3957abef.js";import{an as y,$ as v,o as g,c as b,a as x,P as h,S as k,W as j,X as V,T as w,Y as z,Q as U,a9 as C}from"./@vue-fcfaff04.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./@vueuse-28c84072.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-6c014c7f.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-0cda4647.js";import"./pinia-234ab43f.js";import"./axios-63583d02.js";import"./vue-ueditor-wrap-33bac798.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";const D={data:()=>({tableData:{},detail:{is_agree:{},type:{},status:{},order_master:{},user:{},orderproduct:{},express:{},address:{},image:[],sendexpress:{}},expressList:[],order:{},address:{},form:{is_agree:10,address_id:"",refuse_desc:"",refund_money:0},money:{refund_money:0},deliver:{send_express_id:"",send_express_no:""},order_refund_id:0,loading:!0}),created(){this.getData()},methods:{getData(){let e=this,a=this.$route.query.order_refund_id;_({order_refund_id:a}).then((a=>{e.detail=a.data.detail,e.order=a.data.order,e.address=a.data.address,e.expressList=a.data.expressList,e.loading=!1})).catch((e=>{}))},gotoPage(e){this.$router.push({path:"/order/order/detail",query:{order_id:e.order_id}})},onSubmit(a){let s=this,l=s.form,d=a;s.loading=!0,m({is_agree:l.is_agree,address_id:l.address_id,refuse_desc:l.refuse_desc,order_refund_id:d,refund_money:l.refund_money}).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData(),s.loading=!1})).catch((e=>{s.loading=!1}))},refundMoney(a){let s=this;s.loading=!0;let l={},d=s.deliver;""!=d.send_express_id||20!=s.detail.type.value?""!=d.send_express_no||20!=s.detail.type.value?(20==s.detail.type.value&&(l.send_express_id=d.send_express_id,l.send_express_no=d.send_express_no),l.refund_money=s.money.refund_money,l.order_refund_id=a,c(l).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData(),s.loading=!1})).catch((e=>{s.loading=!1}))):e.error("请填写物流单号"):e.error("请选择物流公司")},cancelFunc(){this.$router.back(-1)}}},q={class:"user pb50"},L={class:"product-content"},$=x("div",{class:"common-form"},"售后单信息",-1),P={class:"refund-detail-content"},S={class:"pb16"},F=x("span",{class:"gray9"},"订单号：",-1),M={class:"pb16"},A=x("span",{class:"gray9"},"买家：",-1),E={class:"pb16"},K=x("span",{class:"gray9"},"售后类型：",-1),N={class:"pb16"},Q=x("span",{class:"gray9"},"处理状态：",-1),T={class:"pb16"},W=x("div",{class:"common-form"},"售后商品信息",-1),X={class:"refund-detail-content"},Y=x("div",{class:"pb16"},[x("span",{class:"gray9"},"商品编码：")],-1),B={class:"pb16"},G=x("span",{class:"gray9"},"商品名称：",-1),H={class:"pb16"},I=x("span",{class:"gray9"},"重量(Kg)：",-1),J={class:"pb16"},O=x("span",{class:"gray9"},"单价：",-1),R={class:"pb16"},Z=x("span",{class:"gray9"},"购买数量：",-1),ee={class:"pb16"},ae={key:0,class:"red"},se={key:1,class:"gray9"},le={class:"pb16"},de=x("span",{class:"gray9"},"付款价：",-1),re={class:"apply-reason-box"},te=x("div",{class:"common-form"},"用户申请原因",-1),ie={class:"apply-reason"},oe={key:0,class:"d-s-s mt10"},ne={alt:"",width:"60"},pe={key:0},ue=x("div",{class:"common-form mt16"},"商家审核",-1),_e={class:"orange"},me={key:1},ce=x("div",{class:"common-form mt16"},"退货地址",-1),fe={class:"pb16"},ye=x("span",{class:"gray9"},"收货人：",-1),ve={class:"pb16"},ge=x("span",{class:"gray9"},"收货电话：",-1),be={class:"pb16"},xe=x("span",{class:"gray9"},"收货地址：",-1),he={key:2},ke=x("div",{class:"common-form"},"商家拒绝原因",-1),je={class:"apply-reason"},Ve={key:3},we=x("div",{class:"common-form mt16"},"用户发货信息",-1),ze={class:"pb16"},Ue=x("span",{class:"gray9"},"物流公司：",-1),Ce={class:"pb16"},De=x("span",{class:"gray9"},"物流单号：",-1),qe=x("div",{class:"pb16"},[x("span",{class:"gray9"},"用户发货状态："),j(" 已发货 ")],-1),Le={class:"pb16"},$e=x("span",{class:"gray9"},"发货时间：",-1),Pe={class:"pb16"},Se=x("span",{class:"gray9"},"商家收货状态：",-1),Fe={key:4},Me=x("div",{class:"common-form mt16"},"确认收货并退款",-1),Ae=x("p",null,"注：该操作将执行订单原路退款 并关闭当前售后单，请确认并填写退款的金额（不能大于订单实付款）",-1),Ee={class:"orange"},Ke={key:0},Ne={key:0},Qe=x("div",{class:"common-form mt16"},"发货",-1),Te={key:1},We=x("div",{class:"common-form mt16"},"平台发货信息",-1),Xe={class:"pb16"},Ye=x("span",{class:"gray9"},"物流公司：",-1),Be={class:"pb16"},Ge=x("span",{class:"gray9"},"物流单号：",-1),He={class:"pb16"},Ie=x("span",{class:"gray9"},"发货时间：",-1),Je=x("div",{class:"common-form"},"商家审核",-1),Oe={class:"refund-detail-content"},Re={class:"pb16"},Ze=x("span",{class:"gray9"},"审核状态：",-1),ea={class:"pb16"},aa=x("span",{class:"gray9"},"退款金额：",-1),sa={class:"common-button-wrapper"};const la=f(D,[["render",function(e,_,m,c,f,D){const la=a,da=s,ra=l,ta=d,ia=r,oa=t,na=i,pa=o,ua=n,_a=p,ma=y("img-url"),ca=u;return v((g(),b("div",q,[x("div",L,[$,x("div",P,[h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[x("div",S,[F,j(" "+V(f.detail.order_master.order_no),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",M,[A,j(" "+V(f.detail.user.nickName),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",E,[K,j(" "+V(f.detail.type.text),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",N,[Q,j(" "+V(f.detail.status.text),1)])])),_:1}),h(la,{span:4},{default:k((()=>[x("div",T,[h(da,{size:"mini",href:"/",target:"_blank",onClick:_[0]||(_[0]=e=>D.gotoPage(f.detail))},{default:k((()=>[j("订单详情")])),_:1})])])),_:1})])),_:1})]),W,x("div",X,[h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[Y])),_:1}),h(la,{span:19},{default:k((()=>[x("div",B,[G,j(" "+V(f.detail.orderproduct.product_name),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",H,[I,j(" "+V(f.detail.orderproduct.product_weight),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",J,[O,j(" "+V(f.detail.orderproduct.line_price),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",R,[Z,j(" "+V(f.detail.orderproduct.total_num),1)])])),_:1}),70==f.order.order_source?(g(),w(la,{key:0,span:5},{default:k((()=>[x("div",ee,[1==f.order.advance.money_return?(g(),b("span",ae,"定金(可退)：")):(g(),b("span",se,"定金(不可退)：")),j(" "+V(f.order.advance.pay_price),1)])])),_:1})):z("",!0),h(la,{span:5},{default:k((()=>[x("div",le,[de,j(" "+V(f.detail.orderproduct.total_pay_price),1)])])),_:1})])),_:1})]),x("div",re,[te,x("div",ie,V(f.detail.apply_desc),1),f.detail.image.length>0?(g(),b("div",oe,[(g(!0),b(U,null,C(f.detail.image,((e,a)=>(g(),b("div",{class:"pic",key:a},[v(x("img",ne,null,512),[[ma,e.file_path]])])))),128))])):z("",!0)]),0==f.detail.is_agree.value?(g(),b("div",pe,[ue,h(_a,{size:"small",ref:"form",model:f.form,"label-width":"80px"},{default:k((()=>[h(ta,{label:"售后类型"},{default:k((()=>[x("span",_e,V(f.detail.type.text),1)])),_:1}),h(ta,{label:"审核状态"},{default:k((()=>[h(oa,{modelValue:f.form.is_agree,"onUpdate:modelValue":_[1]||(_[1]=e=>f.form.is_agree=e)},{default:k((()=>[h(ia,{label:10},{default:k((()=>[j("同意")])),_:1}),h(ia,{label:20},{default:k((()=>[j("拒绝")])),_:1})])),_:1},8,["modelValue"])])),_:1}),10==f.form.is_agree&&30!=f.detail.type.value?(g(),w(ta,{key:0,label:"退货地址"},{default:k((()=>[h(pa,{modelValue:f.form.address_id,"onUpdate:modelValue":_[2]||(_[2]=e=>f.form.address_id=e),placeholder:"请选择地址"},{default:k((()=>[(g(!0),b(U,null,C(f.address,((e,a)=>(g(),w(na,{key:a,label:e.detail,value:e.address_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):z("",!0),10==f.form.is_agree&&30==f.detail.type.value?(g(),w(ta,{key:1,label:"退款金额"},{default:k((()=>[h(ua,{modelValue:f.form.refund_money,"onUpdate:modelValue":_[3]||(_[3]=e=>f.form.refund_money=e)},null,8,["modelValue"]),x("p",null,"请输入退款金额，最多"+V(f.detail.orderproduct.max_refund_money)+" 元。注：该操作将执行订单原路退款 并关闭当前售后单，请确认并填写退款的金额（不能大于订单实付款）",1)])),_:1})):z("",!0),20==f.form.is_agree?(g(),w(ta,{key:2,label:"拒绝原因"},{default:k((()=>[h(ua,{type:"textarea",modelValue:f.form.refuse_desc,"onUpdate:modelValue":_[4]||(_[4]=e=>f.form.refuse_desc=e),class:"max-w460"},null,8,["modelValue"])])),_:1})):z("",!0)])),_:1},8,["model"])])):z("",!0),10==f.detail.is_agree.value&&30!=f.detail.type.value?(g(),b("div",me,[ce,h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[x("div",fe,[ye,j(" "+V(f.detail.address.name),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",ve,[ge,j(" "+V(f.detail.address.phone),1)])])),_:1}),h(la,{span:14},{default:k((()=>[x("div",be,[xe,j(" "+V(f.detail.address.detail),1)])])),_:1})])),_:1})])):z("",!0),20==f.detail.is_agree.value?(g(),b("div",he,[ke,x("div",je,V(f.detail.refuse_desc),1)])):z("",!0),30!=f.detail.type.value&&10==f.detail.is_agree.value&&1==f.detail.is_user_send?(g(),b("div",Ve,[we,h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[x("div",ze,[Ue,j(" "+V(f.detail.express.express_name),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",Ce,[De,j(" "+V(f.detail.express_no),1)])])),_:1}),h(la,{span:5},{default:k((()=>[qe])),_:1}),h(la,{span:5},{default:k((()=>[x("div",Le,[$e,j(" "+V(f.detail.send_time),1)])])),_:1}),h(la,{span:4},{default:k((()=>[x("div",Pe,[Se,1==f.detail.is_receipt?(g(),b(U,{key:0},[j(" 已收货 ")],64)):(g(),b(U,{key:1},[j(" 待收货 ")],64))])])),_:1})])),_:1})])):z("",!0),10==f.detail.type.value&&10==f.detail.is_agree.value&&1==f.detail.is_user_send&&0==f.detail.is_receipt?(g(),b("div",Fe,[Me,h(_a,{size:"small",ref:"money",model:f.money,"label-width":"80px"},{default:k((()=>[Ae,h(ta,{label:"售后类型"},{default:k((()=>[x("span",Ee,V(f.detail.type.text),1)])),_:1}),h(ta,{label:"退款金额"},{default:k((()=>[h(ua,{modelValue:f.money.refund_money,"onUpdate:modelValue":_[5]||(_[5]=e=>f.money.refund_money=e)},null,8,["modelValue"]),x("p",null,"请输入退款金额，最多"+V(f.detail.orderproduct.max_refund_money)+" 元",1)])),_:1})])),_:1},8,["model"])])):z("",!0)]),20==f.detail.type.value&&10==f.detail.is_agree.value&&1==f.detail.is_user_send?(g(),b("div",Ke,[0==f.detail.is_plate_send?(g(),b("div",Ne,[Qe,h(_a,{size:"small",ref:"deliver",model:f.deliver,"label-width":"100px"},{default:k((()=>[h(ta,{label:"物流公司"},{default:k((()=>[h(pa,{modelValue:f.deliver.send_express_id,"onUpdate:modelValue":_[6]||(_[6]=e=>f.deliver.send_express_id=e),placeholder:"请选择快递公司"},{default:k((()=>[(g(!0),b(U,null,C(f.expressList,((e,a)=>(g(),w(na,{label:e.express_name,key:a,value:e.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(ta,{label:"物流单号"},{default:k((()=>[h(ua,{modelValue:f.deliver.send_express_no,"onUpdate:modelValue":_[7]||(_[7]=e=>f.deliver.send_express_no=e),class:"max-w460"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):z("",!0),1==f.detail.is_plate_send?(g(),b("div",Te,[We,h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[x("div",Xe,[Ye,j(" "+V(f.detail.sendexpress.express_name),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",Be,[Ge,j(" "+V(f.detail.send_express_no),1)])])),_:1}),h(la,{span:5},{default:k((()=>[x("div",He,[Ie,j(" "+V(f.detail.deliver_time),1)])])),_:1})])),_:1})])):z("",!0)])):z("",!0),Je,x("div",Oe,[h(ra,null,{default:k((()=>[h(la,{span:5},{default:k((()=>[x("div",Re,[Ze,j(" "+V(f.detail.status.text),1)])])),_:1}),10==f.detail.is_agree.value&&f.detail.refund_money>0?(g(),w(la,{key:0,span:5},{default:k((()=>[x("div",ea,[aa,j(" "+V(f.detail.refund_money),1)])])),_:1})):z("",!0)])),_:1})]),x("div",sa,[h(da,{size:"small",type:"info",onClick:D.cancelFunc},{default:k((()=>[j("取消 / 返回上一页")])),_:1},8,["onClick"]),0==f.detail.is_agree.value?(g(),w(da,{key:0,size:"small",type:"primary",loading:f.loading,onClick:_[8]||(_[8]=e=>D.onSubmit(f.detail.order_refund_id))},{default:k((()=>[j("确认审核")])),_:1},8,["loading"])):z("",!0),30!=f.detail.type.value&&10==f.detail.is_agree.value&&1==f.detail.is_user_send&&0==f.detail.is_receipt?(g(),w(da,{key:1,size:"small",type:"primary",loading:f.loading,onClick:_[9]||(_[9]=e=>D.refundMoney(f.detail.order_refund_id))},{default:k((()=>[j("确认审核")])),_:1},8,["loading"])):z("",!0)])])),[[ca,f.loading]])}]]);export{la as default};
